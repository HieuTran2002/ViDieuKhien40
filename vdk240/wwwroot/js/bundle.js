/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={277:(t,e,i)=>{t.exports=function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){return n(e[s][1][t]||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o=void 0,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,r){(function(i,r){(function(){"use strict";const n=t("events").EventEmitter,o=t("./store"),s=t("./topic-alias-recv"),a=t("./topic-alias-send"),l=t("mqtt-packet"),h=t("./default-message-id-provider"),c=t("readable-stream").Writable,u=t("inherits"),f=t("reinterval"),d=t("rfdc/default"),p=t("./validations"),g=t("xtend"),m=t("debug")("mqttjs:client"),b=i?i.nextTick:function(t){setTimeout(t,0)},y=r.setImmediate||function(t){b(t)},v={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},_=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],w={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function x(t,e){let i;e.properties&&(i=e.properties.topicAlias);let r=e.topic.toString();if(0===r.length){if(void 0===i)return new Error("Unregistered Topic Alias");if(r=t.topicAliasSend.getTopicByAlias(i),void 0===r)return new Error("Unregistered Topic Alias");e.topic=r}i&&delete e.properties.topicAlias}function k(t,e,i){m("sendPacket :: packet: %O",e),m("sendPacket :: emitting `packetsend`"),t.emit("packetsend",e),m("sendPacket :: writing to stream");const r=l.writeToStream(e,t.stream,t.options);m("sendPacket :: writeToStream result %s",r),!r&&i&&i!==C?(m("sendPacket :: handle events on `drain` once through callback."),t.stream.once("drain",i)):i&&(m("sendPacket :: invoking cb"),i())}function S(t,e,i,r){m("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let n,o=e;if("publish"===o.cmd&&(o=d(e),n=x(t,o),n))return i&&i(n);t.outgoingStore.put(o,(function(n){if(n)return i&&i(n);r(),k(t,e,i)}))}function C(t){m("nop ::",t)}function E(t,e){let i;const r=this;if(!(this instanceof E))return new E(t,e);for(i in this.options=e||{},v)void 0===this.options[i]?this.options[i]=v[i]:this.options[i]=e[i];m("MqttClient :: options.protocol",e.protocol),m("MqttClient :: options.protocolVersion",e.protocolVersion),m("MqttClient :: options.username",e.username),m("MqttClient :: options.keepalive",e.keepalive),m("MqttClient :: options.reconnectPeriod",e.reconnectPeriod),m("MqttClient :: options.rejectUnauthorized",e.rejectUnauthorized),m("MqttClient :: options.topicAliasMaximum",e.topicAliasMaximum),this.options.clientId="string"==typeof e.clientId?e.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),m("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===e.protocolVersion&&e.customHandleAcks?e.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=t,this.messageIdProvider=void 0===this.options.messageIdProvider?new h:this.options.messageIdProvider,this.outgoingStore=e.outgoingStore||new o,this.incomingStore=e.incomingStore||new o,this.queueQoSZero=void 0===e.queueQoSZero||e.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,e.topicAliasMaximum>0&&(e.topicAliasMaximum>65535?m("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new s(e.topicAliasMaximum)),this.on("connect",(function(){const t=this.queue;m("connect :: sending queued packets"),function e(){const i=t.shift();m("deliver :: entry %o",i);let n=null;if(!i)return void r._resubscribe();n=i.packet,m("deliver :: call _sendPacket for %o",n);let o=!0;n.messageId&&0!==n.messageId&&(r.messageIdProvider.register(n.messageId)||(o=!1)),o?r._sendPacket(n,(function(t){i.cb&&i.cb(t),e()})):(m("messageId: %d has already used. The message is skipped and removed.",n.messageId),e())}()})),this.on("close",(function(){m("close :: connected set to `false`"),this.connected=!1,m("close :: clearing connackTimer"),clearTimeout(this.connackTimer),m("close :: clearing ping timer"),null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),m("close :: calling _setupReconnect"),this._setupReconnect()})),n.call(this),m("MqttClient :: setting up stream"),this._setupStream()}u(E,n),E.prototype._setupStream=function(){const t=this,e=new c,i=l.parser(this.options);let r=null;const n=[];function o(){if(n.length)b(s);else{const t=r;r=null,t()}}function s(){m("work :: getting next packet in queue");const e=n.shift();if(e)m("work :: packet pulled from queue"),t._handlePacket(e,o);else{m("work :: no packets in queue");const t=r;r=null,m("work :: done flag is %s",!!t),t&&t()}}m("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),m("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),i.on("packet",(function(t){m("parser :: on packet push to packets array."),n.push(t)})),e._write=function(t,e,n){r=n,m("writable stream :: parsing buffer"),i.parse(t),s()},m("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",(function(e){m("streamErrorHandler :: error",e.message),_.includes(e.code)?(m("streamErrorHandler :: emitting error"),t.emit("error",e)):C(e)})),this.stream.on("close",(function(){var e;m("(%s)stream :: on close",t.options.clientId),(e=t.outgoing)&&(m("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(e).forEach((function(t){e[t].volatile&&"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])}))),m("stream: emit close to MqttClient"),t.emit("close")})),m("_setupStream: sending packet `connect`");const a=Object.create(this.options);if(a.cmd="connect",this.topicAliasRecv&&(a.properties||(a.properties={}),this.topicAliasRecv&&(a.properties.topicAliasMaximum=this.topicAliasRecv.max)),k(this,a),i.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return t.end((()=>this.emit("error",new Error("Packet has no Authentication Method")))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&k(this,g({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){m("!!connectTimeout hit!! Calling _cleanUp with force `true`"),t._cleanUp(!0)}),this.options.connectTimeout)},E.prototype._handlePacket=function(t,e){const i=this.options;if(5===i.protocolVersion&&i.properties&&i.properties.maximumPacketSize&&i.properties.maximumPacketSize<t.length)return this.emit("error",new Error("exceeding packets size "+t.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(m("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",t),t.cmd){case"publish":this._handlePublish(t,e);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(t),e();break;case"pubrel":this._handlePubrel(t,e);break;case"connack":this._handleConnack(t),e();break;case"auth":this._handleAuth(t),e();break;case"pingresp":this._handlePingresp(t),e();break;case"disconnect":this._handleDisconnect(t),e()}},E.prototype._checkDisconnecting=function(t){return this.disconnecting&&(t&&t!==C?t(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},E.prototype.publish=function(t,e,i,r){m("publish :: message `%s` to topic `%s`",e,t);const n=this.options;if("function"==typeof i&&(r=i,i=null),i=g({qos:0,retain:!1,dup:!1},i),this._checkDisconnecting(r))return this;const o=this,s=function(){let s=0;if((1===i.qos||2===i.qos)&&(s=o._nextId(),null===s))return m("No messageId left"),!1;const a={cmd:"publish",topic:t,payload:e,qos:i.qos,retain:i.retain,messageId:s,dup:i.dup};switch(5===n.protocolVersion&&(a.properties=i.properties),m("publish :: qos",i.qos),i.qos){case 1:case 2:o.outgoing[a.messageId]={volatile:!1,cb:r||C},m("MqttClient:publish: packet cmd: %s",a.cmd),o._sendPacket(a,void 0,i.cbStorePut);break;default:m("MqttClient:publish: packet cmd: %s",a.cmd),o._sendPacket(a,r,i.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!s())&&this._storeProcessingQueue.push({invoke:s,cbStorePut:i.cbStorePut,callback:r}),this},E.prototype.subscribe=function(){const t=this,e=new Array(arguments.length);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];const i=[];let r=e.shift();const n=r.resubscribe;let o=e.pop()||C,s=e.pop();const a=this.options.protocolVersion;delete r.resubscribe,"string"==typeof r&&(r=[r]),"function"!=typeof o&&(s=o,o=C);const l=p.validateTopics(r);if(null!==l)return y(o,new Error("Invalid topic "+l)),this;if(this._checkDisconnecting(o))return m("subscribe: discconecting true"),this;const h={qos:0};if(5===a&&(h.nl=!1,h.rap=!1,h.rh=0),s=g(h,s),Array.isArray(r)?r.forEach((function(e){if(m("subscribe: array topic %s",e),!Object.prototype.hasOwnProperty.call(t._resubscribeTopics,e)||t._resubscribeTopics[e].qos<s.qos||n){const t={topic:e,qos:s.qos};5===a&&(t.nl=s.nl,t.rap=s.rap,t.rh=s.rh,t.properties=s.properties),m("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),i.push(t)}})):Object.keys(r).forEach((function(e){if(m("subscribe: object topic %s",e),!Object.prototype.hasOwnProperty.call(t._resubscribeTopics,e)||t._resubscribeTopics[e].qos<r[e].qos||n){const t={topic:e,qos:r[e].qos};5===a&&(t.nl=r[e].nl,t.rap=r[e].rap,t.rh=r[e].rh,t.properties=s.properties),m("subscribe: pushing `%s` to subs list",t),i.push(t)}})),!i.length)return o(null,[]),this;const c=function(){const e=t._nextId();if(null===e)return m("No messageId left"),!1;const r={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:e};if(s.properties&&(r.properties=s.properties),t.options.resubscribe){m("subscribe :: resubscribe true");const e=[];i.forEach((function(i){if(t.options.reconnectPeriod>0){const r={qos:i.qos};5===a&&(r.nl=i.nl||!1,r.rap=i.rap||!1,r.rh=i.rh||0,r.properties=i.properties),t._resubscribeTopics[i.topic]=r,e.push(i.topic)}})),t.messageIdToTopic[r.messageId]=e}return t.outgoing[r.messageId]={volatile:!0,cb:function(t,e){if(!t){const t=e.granted;for(let e=0;e<t.length;e+=1)i[e].qos=t[e]}o(t,i)}},m("subscribe :: call _sendPacket"),t._sendPacket(r),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!c())&&this._storeProcessingQueue.push({invoke:c,callback:o}),this},E.prototype.unsubscribe=function(){const t=this,e=new Array(arguments.length);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];let i=e.shift(),r=e.pop()||C,n=e.pop();"string"==typeof i&&(i=[i]),"function"!=typeof r&&(n=r,r=C);const o=p.validateTopics(i);if(null!==o)return y(r,new Error("Invalid topic "+o)),this;if(t._checkDisconnecting(r))return this;const s=function(){const e=t._nextId();if(null===e)return m("No messageId left"),!1;const o={cmd:"unsubscribe",qos:1,messageId:e};return"string"==typeof i?o.unsubscriptions=[i]:Array.isArray(i)&&(o.unsubscriptions=i),t.options.resubscribe&&o.unsubscriptions.forEach((function(e){delete t._resubscribeTopics[e]})),"object"==typeof n&&n.properties&&(o.properties=n.properties),t.outgoing[o.messageId]={volatile:!0,cb:r},m("unsubscribe: call _sendPacket"),t._sendPacket(o),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!s())&&this._storeProcessingQueue.push({invoke:s,callback:r}),this},E.prototype.end=function(t,e,i){const r=this;function n(){m("end :: closeStores: closing incoming and outgoing stores"),r.disconnected=!0,r.incomingStore.close((function(t){r.outgoingStore.close((function(e){if(m("end :: closeStores: emitting end"),r.emit("end"),i){const r=t||e;m("end :: closeStores: invoking callback with args"),i(r)}}))})),r._deferredReconnect&&r._deferredReconnect()}function o(){m("end :: (%s) :: finish :: calling _cleanUp with force %s",r.options.clientId,t),r._cleanUp(t,(()=>{m("end :: finish :: calling process.nextTick on closeStores"),b(n.bind(r))}),e)}return m("end :: (%s)",this.options.clientId),null!=t&&"boolean"==typeof t||(i=e||C,e=t,t=!1,"object"!=typeof e&&(i=e,e=null,"function"!=typeof i&&(i=C))),"object"!=typeof e&&(i=e,e=null),m("end :: cb? %s",!!i),i=i||C,this.disconnecting?(i(),this):(this._clearReconnect(),this.disconnecting=!0,!t&&Object.keys(this.outgoing).length>0?(m("end :: (%s) :: calling finish in 10ms once outgoing is empty",r.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,o,10))):(m("end :: (%s) :: immediately calling finish",r.options.clientId),o()),this)},E.prototype.removeOutgoingMessage=function(t){const e=this.outgoing[t]?this.outgoing[t].cb:null;return delete this.outgoing[t],this.outgoingStore.del({messageId:t},(function(){e(new Error("Message removed"))})),this},E.prototype.reconnect=function(t){m("client reconnect");const e=this,i=function(){t?(e.options.incomingStore=t.incomingStore,e.options.outgoingStore=t.outgoingStore):(e.options.incomingStore=null,e.options.outgoingStore=null),e.incomingStore=e.options.incomingStore||new o,e.outgoingStore=e.options.outgoingStore||new o,e.disconnecting=!1,e.disconnected=!1,e._deferredReconnect=null,e._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=i:i(),this},E.prototype._reconnect=function(){m("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end((()=>{this._setupStream()})),m("client already connected. disconnecting first.")):(m("_reconnect: calling _setupStream"),this._setupStream())},E.prototype._setupReconnect=function(){const t=this;!t.disconnecting&&!t.reconnectTimer&&t.options.reconnectPeriod>0?(this.reconnecting||(m("_setupReconnect :: emit `offline` state"),this.emit("offline"),m("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),m("_setupReconnect :: setting reconnectTimer for %d ms",t.options.reconnectPeriod),t.reconnectTimer=setInterval((function(){m("reconnectTimer :: reconnect triggered!"),t._reconnect()}),t.options.reconnectPeriod)):m("_setupReconnect :: doing nothing...")},E.prototype._clearReconnect=function(){m("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},E.prototype._cleanUp=function(t,e){const i=arguments[2];if(e&&(m("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",e)),m("_cleanUp :: forced? %s",t),t)0===this.options.reconnectPeriod&&this.options.clean&&((r=this.outgoing)&&(m("flush: queue exists? %b",!!r),Object.keys(r).forEach((function(t){"function"==typeof r[t].cb&&(r[t].cb(new Error("Connection closed")),delete r[t])})))),m("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const t=g({cmd:"disconnect"},i);m("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(t,y.bind(null,this.stream.end.bind(this.stream)))}var r;this.disconnecting||(m("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(m("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),e&&!this.connected&&(m("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",e),e())},E.prototype._sendPacket=function(t,e,i){m("_sendPacket :: (%s) ::  start",this.options.clientId),i=i||C,e=e||C;const r=function(t,e){if(5===t.options.protocolVersion&&"publish"===e.cmd){let i;e.properties&&(i=e.properties.topicAlias);const r=e.topic.toString();if(t.topicAliasSend)if(i){if(0!==r.length&&(m("applyTopicAlias :: register topic: %s - alias: %d",r,i),!t.topicAliasSend.put(r,i)))return m("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,i),new Error("Sending Topic Alias out of range")}else 0!==r.length&&(t.options.autoAssignTopicAlias?(i=t.topicAliasSend.getAliasByTopic(r),i?(e.topic="",e.properties={...e.properties,topicAlias:i},m("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,i)):(i=t.topicAliasSend.getLruAlias(),t.topicAliasSend.put(r,i),e.properties={...e.properties,topicAlias:i},m("applyTopicAlias :: auto assign topic: %s - alias: %d",r,i))):t.options.autoUseTopicAlias&&(i=t.topicAliasSend.getAliasByTopic(r),i&&(e.topic="",e.properties={...e.properties,topicAlias:i},m("applyTopicAlias :: auto use topic: %s - alias: %d",r,i))));else if(i)return m("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,i),new Error("Sending Topic Alias out of range")}}(this,t);if(r)e(r);else{if(!this.connected)return"auth"===t.cmd?(this._shiftPingInterval(),void k(this,t,e)):(m("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(t,e,i));switch(this._shiftPingInterval(),t.cmd){case"publish":break;case"pubrel":return void S(this,t,e,i);default:return void k(this,t,e)}switch(t.qos){case 2:case 1:S(this,t,e,i);break;default:k(this,t,e)}m("_sendPacket :: (%s) ::  end",this.options.clientId)}},E.prototype._storePacket=function(t,e,i){m("_storePacket :: packet: %o",t),m("_storePacket :: cb? %s",!!e),i=i||C;let r=t;if("publish"===r.cmd){r=d(t);const i=x(this,r);if(i)return e&&e(i)}0===(r.qos||0)&&this.queueQoSZero||"publish"!==r.cmd?this.queue.push({packet:r,cb:e}):r.qos>0?(e=this.outgoing[r.messageId]?this.outgoing[r.messageId].cb:null,this.outgoingStore.put(r,(function(t){if(t)return e&&e(t);i()}))):e&&e(new Error("No connection to broker"))},E.prototype._setupPingTimer=function(){m("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const t=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=f((function(){t._checkPing()}),1e3*this.options.keepalive))},E.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},E.prototype._checkPing=function(){m("_checkPing :: checking ping..."),this.pingResp?(m("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(m("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},E.prototype._handlePingresp=function(){this.pingResp=!0},E.prototype._handleConnack=function(t){m("_handleConnack");const e=this.options,i=5===e.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));t.properties.topicAliasMaximum>0&&(this.topicAliasSend=new a(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=t.properties.serverKeepAlive,this._shiftPingInterval()),t.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===i)this.reconnecting=!1,this._onConnect(t);else if(i>0){const t=new Error("Connection refused: "+w[i]);t.code=i,this.emit("error",t)}},E.prototype._handleAuth=function(t){const e=this.options.protocolVersion,i=5===e?t.reasonCode:t.returnCode;if(5!==e){const t=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+e);return t.code=i,void this.emit("error",t)}const r=this;this.handleAuth(t,(function(t,e){if(t)r.emit("error",t);else if(24===i)r.reconnecting=!1,r._sendPacket(e);else{const e=new Error("Connection refused: "+w[i]);t.code=i,r.emit("error",e)}}))},E.prototype.handleAuth=function(t,e){e()},E.prototype._handlePublish=function(t,e){m("_handlePublish: packet %o",t),e=void 0!==e?e:C;let i=t.topic.toString();const r=t.payload,n=t.qos,o=t.messageId,s=this,a=this.options,l=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let e;if(t.properties&&(e=t.properties.topicAlias),void 0!==e)if(0===i.length){if(!(e>0&&e<=65535))return m("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));{const t=this.topicAliasRecv.getTopicByAlias(e);if(!t)return m("_handlePublish :: unregistered topic alias. alias: %d",e),void this.emit("error",new Error("Received unregistered Topic Alias"));i=t,m("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,e)}}else{if(!this.topicAliasRecv.put(i,e))return m("_handlePublish :: topic alias out of range. alias: %d",e),void this.emit("error",new Error("Received Topic Alias is out of range"));m("_handlePublish :: registered topic: %s - alias: %d",i,e)}}switch(m("_handlePublish: qos %d",n),n){case 2:a.customHandleAcks(i,r,t,(function(i,r){return i instanceof Error||(r=i,i=null),i?s.emit("error",i):-1===l.indexOf(r)?s.emit("error",new Error("Wrong reason code for pubrec")):void(r?s._sendPacket({cmd:"pubrec",messageId:o,reasonCode:r},e):s.incomingStore.put(t,(function(){s._sendPacket({cmd:"pubrec",messageId:o},e)})))}));break;case 1:a.customHandleAcks(i,r,t,(function(n,a){return n instanceof Error||(a=n,n=null),n?s.emit("error",n):-1===l.indexOf(a)?s.emit("error",new Error("Wrong reason code for puback")):(a||s.emit("message",i,r,t),void s.handleMessage(t,(function(t){if(t)return e&&e(t);s._sendPacket({cmd:"puback",messageId:o,reasonCode:a},e)})))}));break;case 0:this.emit("message",i,r,t),this.handleMessage(t,e);break;default:m("_handlePublish: unknown QoS. Doing nothing.")}},E.prototype.handleMessage=function(t,e){e()},E.prototype._handleAck=function(t){const e=t.messageId,i=t.cmd;let r=null;const n=this.outgoing[e]?this.outgoing[e].cb:null,o=this;let s;if(n){switch(m("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{const i=t.reasonCode;i&&i>0&&16!==i&&(s=new Error("Publish error: "+w[i]),s.code=i,n(s,t)),delete this.outgoing[e],this.outgoingStore.del(t,n),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue();break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:e};const i=t.reasonCode;i&&i>0&&16!==i?(s=new Error("Publish error: "+w[i]),s.code=i,n(s,t)):this._sendPacket(r);break}case"suback":delete this.outgoing[e],this.messageIdProvider.deallocate(e);for(let i=0;i<t.granted.length;i++)if(0!=(128&t.granted[i])){const t=this.messageIdToTopic[e];t&&t.forEach((function(t){delete o._resubscribeTopics[t]}))}this._invokeStoreProcessingQueue(),n(null,t);break;case"unsuback":delete this.outgoing[e],this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue(),n(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else m("_handleAck :: Server sent an ack in error. Ignoring.")},E.prototype._handlePubrel=function(t,e){m("handling pubrel packet"),e=void 0!==e?e:C;const i=t.messageId,r=this,n={cmd:"pubcomp",messageId:i};r.incomingStore.get(t,(function(t,i){t?r._sendPacket(n,e):(r.emit("message",i.topic,i.payload,i),r.handleMessage(i,(function(t){if(t)return e(t);r.incomingStore.del(i,C),r._sendPacket(n,e)})))}))},E.prototype._handleDisconnect=function(t){this.emit("disconnect",t)},E.prototype._nextId=function(){return this.messageIdProvider.allocate()},E.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},E.prototype._resubscribe=function(){m("_resubscribe");const t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&t.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){m("_resubscribe: protocolVersion 5");for(let e=0;e<t.length;e++){const i={};i[t[e]]=this._resubscribeTopics[t[e]],i.resubscribe=!0,this.subscribe(i,{properties:i[t[e]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},E.prototype._onConnect=function(t){if(this.disconnected)return void this.emit("connect",t);const e=this;this.connackPacket=t,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function i(){let r=e.outgoingStore.createStream();function n(){e._storeProcessing=!1,e._packetIdsDuringStoreProcessing={}}function o(){r.destroy(),r=null,e._flushStoreProcessingQueue(),n()}e.once("close",o),r.on("error",(function(t){n(),e._flushStoreProcessingQueue(),e.removeListener("close",o),e.emit("error",t)})),r.on("end",(function(){let r=!0;for(const t in e._packetIdsDuringStoreProcessing)if(!e._packetIdsDuringStoreProcessing[t]){r=!1;break}r?(n(),e.removeListener("close",o),e._invokeAllStoreProcessingQueue(),e.emit("connect",t)):i()})),function t(){if(!r)return;e._storeProcessing=!0;const i=r.read(1);let n;i?e._packetIdsDuringStoreProcessing[i.messageId]?t():e.disconnecting||e.reconnectTimer?r.destroy&&r.destroy():(n=e.outgoing[i.messageId]?e.outgoing[i.messageId].cb:null,e.outgoing[i.messageId]={volatile:!1,cb:function(e,i){n&&n(e,i),t()}},e._packetIdsDuringStoreProcessing[i.messageId]=!0,e.messageIdProvider.register(i.messageId)?e._sendPacket(i):m("messageId: %d has already used.",i.messageId)):r.once("readable",t)}()}()},E.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const t=this._storeProcessingQueue[0];if(t&&t.invoke())return this._storeProcessingQueue.shift(),!0}return!1},E.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},E.prototype._flushStoreProcessingQueue=function(){for(const t of this._storeProcessingQueue)t.cbStorePut&&t.cbStorePut(new Error("Connection closed")),t.callback&&t.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},e.exports=E}).call(this)}).call(this,t("_process"),void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(t,e,i){"use strict";const{Buffer:r}=t("buffer"),n=t("readable-stream").Transform,o=t("duplexify");let s,a,l,h=!1;e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");const i="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);const c=function(t,e){const i="alis"===t.protocol?"wss":"ws";let r=i+"://"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(r=i+"://"+t.hostname+":"+t.port+t.path),"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);return s=e.my,s.connectSocket({url:c,protocols:i}),a=function(){const t=new n;return t._write=function(t,e,i){s.sendSocketMessage({data:t.buffer,success:function(){i()},fail:function(){i(new Error)}})},t._flush=function(t){s.closeSocket({success:function(){t()}})},t}(),l=o.obj(),h||(h=!0,s.onSocketOpen((function(){l.setReadable(a),l.setWritable(a),l.emit("connect")})),s.onSocketMessage((function(t){if("string"==typeof t.data){const e=r.from(t.data,"base64");a.push(e)}else{const e=new FileReader;e.addEventListener("load",(function(){let t=e.result;t=t instanceof ArrayBuffer?r.from(t):r.from(t,"utf8"),a.push(t)})),e.readAsArrayBuffer(t.data)}})),s.onSocketClose((function(){l.end(),l.destroy()})),s.onSocketError((function(t){l.destroy(t)}))),l}},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(t,e,i){"use strict";const r=t("net"),n=t("debug")("mqttjs:tcp");e.exports=function(t,e){e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost";const i=e.port,o=e.hostname;return n("port %d and host %s",i,o),r.createConnection(i,o)}},{debug:18,net:16}],4:[function(t,e,i){"use strict";const r=t("tls"),n=t("net"),o=t("debug")("mqttjs:tls");e.exports=function(t,e){e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",0===n.isIP(e.host)&&(e.servername=e.host),e.rejectUnauthorized=!1!==e.rejectUnauthorized,delete e.path,o("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);const i=r.connect(e);function s(r){e.rejectUnauthorized&&t.emit("error",r),i.end()}return i.on("secureConnect",(function(){e.rejectUnauthorized&&!i.authorized?i.emit("error",new Error("TLS not authorized")):i.removeListener("error",s)})),i.on("error",s),i}},{debug:18,net:16,tls:16}],5:[function(t,e,r){(function(r){(function(){"use strict";const{Buffer:n}=t("buffer"),o=t("ws"),s=t("debug")("mqttjs:ws"),a=t("duplexify"),l=t("readable-stream").Transform,h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],c=void 0!==r&&"browser"===r.title||"function"==typeof i;function u(t,e){let i=t.protocol+"://"+t.hostname+":"+t.port+t.path;return"function"==typeof t.transformWsUrl&&(i=t.transformWsUrl(i,t,e)),i}function f(t){const e=t;return t.hostname||(e.hostname="localhost"),t.port||("wss"===t.protocol?e.port=443:e.port=80),t.path||(e.path="/"),t.wsOptions||(e.wsOptions={}),c||"wss"!==t.protocol||h.forEach((function(i){Object.prototype.hasOwnProperty.call(t,i)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,i)&&(e.wsOptions[i]=t[i])})),e}e.exports=c?function(t,e){let i;s("browserStreamBuilder");const r=function(t){const e=f(t);if(e.hostname||(e.hostname=e.host),!e.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const t=new URL(document.URL);e.hostname=t.hostname,e.port||(e.port=t.port)}return void 0===e.objectMode&&(e.objectMode=!(!0===e.binary||void 0===e.binary)),e}(e).browserBufferSize||524288,o=e.browserBufferTimeout||1e3,h=!e.objectMode,c=function(t,e){const i="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt",r=u(e,t),n=new WebSocket(r,[i]);return n.binaryType="arraybuffer",n}(t,e),d=function(t,e,i){const r=new l({objectModeMode:t.objectMode});return r._write=e,r._flush=i,r}(e,(function t(e,i,s){c.bufferedAmount>r&&setTimeout(t,o,e,i,s),h&&"string"==typeof e&&(e=n.from(e,"utf8"));try{c.send(e)}catch(t){return s(t)}s()}),(function(t){c.close(),t()}));e.objectMode||(d._writev=v),d.on("close",(()=>{c.close()}));const p=void 0!==c.addEventListener;function g(){i.setReadable(d),i.setWritable(d),i.emit("connect")}function m(){i.end(),i.destroy()}function b(t){i.destroy(t)}function y(t){let e=t.data;e=e instanceof ArrayBuffer?n.from(e):n.from(e,"utf8"),d.push(e)}function v(t,e){const i=new Array(t.length);for(let e=0;e<t.length;e++)"string"==typeof t[e].chunk?i[e]=n.from(t[e],"utf8"):i[e]=t[e].chunk;this._write(n.concat(i),"binary",e)}return c.readyState===c.OPEN?i=d:(i=i=a(void 0,void 0,e),e.objectMode||(i._writev=v),p?c.addEventListener("open",g):c.onopen=g),i.socket=c,p?(c.addEventListener("close",m),c.addEventListener("error",b),c.addEventListener("message",y)):(c.onclose=m,c.onerror=b,c.onmessage=y),i}:function(t,e){s("streamBuilder");const i=f(e),r=u(i,t),n=function(t,e,i){s("createWebSocket"),s("protocol: "+i.protocolId+" "+i.protocolVersion);const r="MQIsdp"===i.protocolId&&3===i.protocolVersion?"mqttv3.1":"mqtt";return s("creating new Websocket for url: "+e+" and protocol: "+r),new o(e,[r],i.wsOptions)}(0,r,i),a=o.createWebSocketStream(n,i.wsOptions);return a.url=r,n.on("close",(()=>{a.destroy()})),a}}).call(this)}).call(this,t("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(t,e,i){"use strict";const{Buffer:r}=t("buffer"),n=t("readable-stream").Transform,o=t("duplexify");let s,a,l;e.exports=function(t,e){if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");const i="MQIsdp"===e.protocolId&&3===e.protocolVersion?"mqttv3.1":"mqtt";!function(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}(e);const h=function(t,e){const i="wxs"===t.protocol?"wss":"ws";let r=i+"://"+t.hostname+t.path;return t.port&&80!==t.port&&443!==t.port&&(r=i+"://"+t.hostname+":"+t.port+t.path),"function"==typeof t.transformWsUrl&&(r=t.transformWsUrl(r,t,e)),r}(e,t);s=wx.connectSocket({url:h,protocols:[i]}),a=function(){const t=new n;return t._write=function(t,e,i){s.send({data:t.buffer,success:function(){i()},fail:function(t){i(new Error(t))}})},t._flush=function(t){s.close({success:function(){t()}})},t}(),l=o.obj(),l._destroy=function(t,e){s.close({success:function(){e&&e(t)}})};const c=l.destroy;return l.destroy=function(){l.destroy=c;const t=this;setTimeout((function(){s.close({fail:function(){t._destroy(new Error)}})}),0)}.bind(l),s.onOpen((function(){l.setReadable(a),l.setWritable(a),l.emit("connect")})),s.onMessage((function(t){let e=t.data;e=e instanceof ArrayBuffer?r.from(e):r.from(e,"utf8"),a.push(e)})),s.onClose((function(){l.end(),l.destroy()})),s.onError((function(t){l.destroy(new Error(t.errMsg))})),l}},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(t,e,i){"use strict";function r(){if(!(this instanceof r))return new r;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}r.prototype.allocate=function(){const t=this.nextId++;return 65536===this.nextId&&(this.nextId=1),t},r.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},r.prototype.register=function(t){return!0},r.prototype.deallocate=function(t){},r.prototype.clear=function(){},e.exports=r},{}],8:[function(t,e,i){"use strict";const r=t("xtend"),n=t("readable-stream").Readable,o={objectMode:!0},s={clean:!0};function a(t){if(!(this instanceof a))return new a(t);this.options=t||{},this.options=r(s,t),this._inflights=new Map}a.prototype.put=function(t,e){return this._inflights.set(t.messageId,t),e&&e(),this},a.prototype.createStream=function(){const t=new n(o),e=[];let i=!1,r=0;return this._inflights.forEach((function(t,i){e.push(t)})),t._read=function(){!i&&r<e.length?this.push(e[r++]):this.push(null)},t.destroy=function(){if(i)return;const t=this;i=!0,setTimeout((function(){t.emit("close")}),0)},t},a.prototype.del=function(t,e){return(t=this._inflights.get(t.messageId))?(this._inflights.delete(t.messageId),e(null,t)):e&&e(new Error("missing packet")),this},a.prototype.get=function(t,e){return(t=this._inflights.get(t.messageId))?e(null,t):e&&e(new Error("missing packet")),this},a.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},e.exports=a},{"readable-stream":69,xtend:81}],9:[function(t,e,i){"use strict";function r(t){if(!(this instanceof r))return new r(t);this.aliasToTopic={},this.max=t}r.prototype.put=function(t,e){return!(0===e||e>this.max||(this.aliasToTopic[e]=t,this.length=Object.keys(this.aliasToTopic).length,0))},r.prototype.getTopicByAlias=function(t){return this.aliasToTopic[t]},r.prototype.clear=function(){this.aliasToTopic={}},e.exports=r},{}],10:[function(t,e,i){"use strict";const r=t("lru-cache"),n=t("number-allocator").NumberAllocator;function o(t){if(!(this instanceof o))return new o(t);t>0&&(this.aliasToTopic=new r({max:t}),this.topicToAlias={},this.numberAllocator=new n(1,t),this.max=t,this.length=0)}o.prototype.put=function(t,e){if(0===e||e>this.max)return!1;const i=this.aliasToTopic.get(e);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(e,t),this.topicToAlias[t]=e,this.numberAllocator.use(e),this.length=this.aliasToTopic.length,!0},o.prototype.getTopicByAlias=function(t){return this.aliasToTopic.get(t)},o.prototype.getAliasByTopic=function(t){const e=this.topicToAlias[t];return void 0!==e&&this.aliasToTopic.get(e),e},o.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},o.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},e.exports=o},{"lru-cache":37,"number-allocator":46}],11:[function(t,e,i){"use strict";function r(t){const e=t.split("/");for(let t=0;t<e.length;t++)if("+"!==e[t]){if("#"===e[t])return t===e.length-1;if(-1!==e[t].indexOf("+")||-1!==e[t].indexOf("#"))return!1}return!0}e.exports={validateTopics:function(t){if(0===t.length)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!r(t[e]))return t[e];return null}}},{}],12:[function(t,e,r){(function(r){(function(){"use strict";const n=t("../client"),o=t("../store"),s=t("url"),a=t("xtend"),l=t("debug")("mqttjs"),h={};function c(t,e){if(l("connecting to an MQTT broker..."),"object"!=typeof t||e||(e=t,t=null),e=e||{},t){const i=s.parse(t,!0);if(null!=i.port&&(i.port=Number(i.port)),null===(e=a(i,e)).protocol)throw new Error("Missing protocol");e.protocol=e.protocol.replace(/:$/,"")}if(function(t){let e;t.auth&&(e=t.auth.match(/^(.+):(.+)$/),e?(t.username=e[1],t.password=e[2]):t.username=t.auth)}(e),e.query&&"string"==typeof e.query.clientId&&(e.clientId=e.query.clientId),e.cert&&e.key){if(!e.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(e.protocol))switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+e.protocol+'"!')}}if(!h[e.protocol]){const t=-1!==["mqtts","wss"].indexOf(e.protocol);e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((function(e,i){return(!t||i%2!=0)&&"function"==typeof h[e]}))[0]}if(!1===e.clean&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);const i=new n((function(t){return e.servers&&(t._reconnectCount&&t._reconnectCount!==e.servers.length||(t._reconnectCount=0),e.host=e.servers[t._reconnectCount].host,e.port=e.servers[t._reconnectCount].port,e.protocol=e.servers[t._reconnectCount].protocol?e.servers[t._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,t._reconnectCount++),l("calling streambuilder for",e.protocol),h[e.protocol](t,e)}),e);return i.on("error",(function(){})),i}void 0!==r&&"browser"!==r.title||"function"!=typeof i?(h.mqtt=t("./tcp"),h.tcp=t("./tcp"),h.ssl=t("./tls"),h.tls=t("./tls"),h.mqtts=t("./tls")):(h.wx=t("./wx"),h.wxs=t("./wx"),h.ali=t("./ali"),h.alis=t("./ali")),h.ws=t("./ws"),h.wss=t("./ws"),e.exports=c,e.exports.connect=c,e.exports.MqttClient=n,e.exports.Store=o}).call(this)}).call(this,t("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(t,e,i){"use strict";i.byteLength=function(t){var e=l(t),i=e[0],r=e[1];return 3*(i+r)/4-r},i.toByteArray=function(t){var e,i,r=l(t),s=r[0],a=r[1],h=new o(function(t,e,i){return 3*(e+i)/4-i}(0,s,a)),c=0,u=a>0?s-4:s;for(i=0;i<u;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],h[c++]=e>>16&255,h[c++]=e>>8&255,h[c++]=255&e;return 2===a&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,h[c++]=255&e),1===a&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,h[c++]=e>>8&255,h[c++]=255&e),h},i.fromByteArray=function(t){for(var e,i=t.length,n=i%3,o=[],s=16383,a=0,l=i-n;a<l;a+=s)o.push(h(t,a,a+s>l?l:a+s));return 1===n?(e=t[i-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===n&&(e=(t[i-2]<<8)+t[i-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function h(t,e,i){for(var n,o=[],s=e;s<i;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=n)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);var a;return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],14:[function(t,e,i){"use strict";const{Buffer:r}=t("buffer"),n=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let i=0;i<this._bufs.length;i++){const r=e+this._bufs[i].length;if(t<r||i===this._bufs.length-1)return[i,t-e];e=r}},o.prototype._reverseOffset=function(t){const e=t[0];let i=t[1];for(let t=0;t<e;t++)i+=this._bufs[t].length;return i},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,i,n){if(("number"!=typeof i||i<0)&&(i=0),("number"!=typeof n||n>this.length)&&(n=this.length),i>=this.length)return t||r.alloc(0);if(n<=0)return t||r.alloc(0);const o=!!t,s=this._offset(i),a=n-i;let l=a,h=o&&e||0,c=s[1];if(0===i&&n===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,h),h+=this._bufs[e].length;return t}if(l<=this._bufs[s[0]].length-c)return o?this._bufs[s[0]].copy(t,e,c,c+l):this._bufs[s[0]].slice(c,c+l);o||(t=r.allocUnsafe(a));for(let e=s[0];e<this._bufs.length;e++){const i=this._bufs[e].length-c;if(!(l>i)){this._bufs[e].copy(t,h,c,c+l),h+=i;break}this._bufs[e].copy(t,h,c),h+=i,l-=i,c&&(c=0)}return t.length>h?t.slice(0,h):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!=typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const i=this._offset(t),r=this._offset(e),n=this._bufs.slice(i[0],r[0]+1);return 0===r[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,r[1]),0!==i[1]&&(n[0]=n[0].slice(i[1])),this._new(n)},o.prototype.toString=function(t,e,i){return this.slice(e,i).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(r.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"==typeof t&&(t=t.toString()),this._appendBuffer(r.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,i){if(void 0===i&&"string"==typeof e&&(i=e,e=void 0),"function"==typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof t?t=r.from([t]):"string"==typeof t?t=r.from(t,i):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=r.from(t.buffer,t.byteOffset,t.byteLength):r.isBuffer(t)||(t=r.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const n=this._offset(e);let o=n[0],s=n[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];for(;s<e.length;)if(e.length-s>=t.length){const i=e.indexOf(t,s);if(-1!==i)return this._reverseOffset([o,i]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let i=0;i<e.length;i++)if(this.get(t+i)!==e[i])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)!function(e){o.prototype[e]=null===t[e]?function(t,i){return this.slice(t,t+i)[e](0,i)}:function(i=0){return this.slice(i,i+t[e])[e](0)}}(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[n]},e.exports=o},{buffer:17}],15:[function(t,e,i){"use strict";const r=t("readable-stream").Duplex,n=t("inherits"),o=t("./BufferList");function s(t){if(!(this instanceof s))return new s(t);if("function"==typeof t){this._callback=t;const e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",(function(t){t.on("error",e)})),this.on("unpipe",(function(t){t.removeListener("error",e)})),t=null}o._init.call(this,t),r.call(this)}n(s,r),Object.assign(s.prototype,o.prototype),s.prototype._new=function(t){return new s(t)},s.prototype._write=function(t,e,i){this._appendBuffer(t),"function"==typeof i&&i()},s.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},s.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype._destroy=function(t,e){this._bufs.length=0,this.length=0,e(t)},s.prototype._isBufferList=function(t){return t instanceof s||t instanceof o||s.isBufferList(t)},s.isBufferList=o.isBufferList,e.exports=s,e.exports.BufferListStream=s,e.exports.BufferList=o},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(t,e,i){},{}],17:[function(t,e,i){(function(e){(function(){"use strict";var e=t("base64-js"),r=t("ieee754");i.Buffer=s,i.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},i.INSPECT_MAX_BYTES=50;var n=2147483647;function o(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=s.prototype,e}function s(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return a(t,e,i)}function a(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var i=0|f(t,e),r=o(i),n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(z(t,ArrayBuffer)||t&&z(t.buffer,ArrayBuffer))return function(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i)).__proto__=s.prototype,r}(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,i);var n=function(t){if(s.isBuffer(t)){var e=0|u(t.length),i=o(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||F(t.length)?o(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return l(t),o(t<0?0:0|u(t))}function c(t){for(var e=t.length<0?0:0|u(t.length),i=o(e),r=0;r<e;r+=1)i[r]=255&t[r];return i}function u(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function f(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return N(t).length;default:if(n)return r?-1:B(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return E(this,e,i);case"latin1":case"binary":return M(this,e,i);case"base64":return k(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function p(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function g(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),F(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:m(t,e,i,r,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):m(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function m(t,e,i,r,n){var o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,i/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){var c=-1;for(o=i;o<a;o++)if(h(t,o)===h(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(i+l>a&&(i=a-l),o=i;o>=0;o--){for(var u=!0,f=0;f<l;f++)if(h(t,o+f)!==h(e,f)){u=!1;break}if(u)return o}return-1}function b(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(F(a))return s;t[i+s]=a}return s}function y(t,e,i,r){return j(B(e,t.length-i),t,i,r)}function v(t,e,i,r){return j(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function _(t,e,i,r){return v(t,e,i,r)}function w(t,e,i,r){return j(N(e),t,i,r)}function x(t,e,i,r){return j(function(t,e){for(var i,r,n,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(i=t.charCodeAt(s))>>8,n=i%256,o.push(n),o.push(r);return o}(e,t.length-i),t,i,r)}function k(t,i,r){return 0===i&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(i,r))}function S(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var o,s,a,l,h=t[n],c=null,u=h>239?4:h>223?3:h>191?2:1;if(n+u<=i)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(o=t[n+1]))&&(l=(31&h)<<6|63&o)>127&&(c=l);break;case 3:o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&(l=(15&h)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),n+=u}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);for(var i="",r=0;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=C));return i}(r)}i.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(t,e,i){return a(t,e,i)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(t,e,i){return function(t,e,i){return l(t),t<=0?o(t):void 0!==e?"string"==typeof i?o(t).fill(e,i):o(t).fill(e):o(t)}(t,e,i)},s.allocUnsafe=function(t){return h(t)},s.allocUnsafeSlow=function(t){return h(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),z(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,r=e.length,n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=s.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(z(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):d.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},s.prototype.compare=function(t,e,i,r,n){if(z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(r>>>=0),a=(i>>>=0)-(e>>>=0),l=Math.min(o,a),h=this.slice(r,n),c=t.slice(e,i),u=0;u<l;++u)if(h[u]!==c[u]){o=h[u],a=c[u];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},s.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},s.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},s.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,i);case"utf8":case"utf-8":return y(this,t,e,i);case"ascii":return v(this,t,e,i);case"latin1":case"binary":return _(this,t,e,i);case"base64":return w(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function E(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function M(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function T(t,e,i){var r,n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var o="",s=e;s<i;++s)o+=(r=t[s])<16?"0"+r.toString(16):r.toString(16);return o}function A(t,e,i){for(var r=t.slice(e,i),n="",o=0;o<r.length;o+=2)n+=String.fromCharCode(r[o]+256*r[o+1]);return n}function P(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,r,n,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function I(t,e,i,r,n,o){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function R(t,e,i,n,o){return e=+e,i>>>=0,o||I(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function L(t,e,i,n,o){return e=+e,i>>>=0,o||I(t,0,i,8),r.write(t,e,i,n,52,8),i+8}s.prototype.slice=function(t,e){var i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||P(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r},s.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||P(t,e,this.length);for(var r=this[t+--e],n=1;e>0&&(n*=256);)r+=this[t+--e]*n;return r},s.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||P(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||P(t,e,this.length);for(var r=e,n=1,o=this[t+--r];r>0&&(n*=256);)o+=this[t+--r]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),r.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),r.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),r.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),r.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||O(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},s.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||O(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+i},s.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);O(this,t,e,i,n-1,-n)}var o=0,s=1,a=0;for(this[e]=255&t;++o<i&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},s.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);O(this,t,e,i,n-1,-n)}var o=i-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},s.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,i){return R(this,t,e,!0,i)},s.prototype.writeFloatBE=function(t,e,i){return R(this,t,e,!1,i)},s.prototype.writeDoubleLE=function(t,e,i){return L(this,t,e,!0,i)},s.prototype.writeDoubleBE=function(t,e,i){return L(this,t,e,!1,i)},s.prototype.copy=function(t,e,i,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var n=r-i;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,i,r);else if(this===t&&i<e&&e<r)for(var o=n-1;o>=0;--o)t[o+e]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,r),e);return n},s.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var n=t.charCodeAt(0);("utf8"===r&&n<128||"latin1"===r)&&(t=n)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,r),l=a.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<i-e;++o)this[o+e]=a[o%l]}return this};var D=/[^+/0-9A-Za-z-_]/g;function B(t,e){var i;e=e||1/0;for(var r=t.length,n=null,o=[],s=0;s<r;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function N(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function j(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function F(t){return t!=t}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(t,e,i){(function(r){(function(){i.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const i="color: "+this.color;t.splice(1,0,i,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(n=r))})),t.splice(n,0,i)},i.save=function(t){try{t?i.storage.setItem("debug",t):i.storage.removeItem("debug")}catch(t){}},i.load=function(){let t;try{t=i.storage.getItem("debug")}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t},i.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},i.storage=function(){try{return localStorage}catch(t){}}(),i.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.log=console.debug||console.log||(()=>{}),e.exports=t("./common")(i);const{formatters:n}=e.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,t("_process"))},{"./common":19,_process:50}],19:[function(t,e,i){e.exports=function(e){function i(t){let e,n,o,s=null;function a(...t){if(!a.enabled)return;const r=a,n=Number(new Date),o=n-(e||n);r.diff=o,r.prev=e,r.curr=n,e=n,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";s++;const o=i.formatters[n];if("function"==typeof o){const i=t[s];e=o.call(r,i),t.splice(s,1),s--}return e})),i.formatArgs.call(r,t),(r.log||i.log).apply(r,t)}return a.namespace=t,a.useColors=i.useColors(),a.color=i.selectColor(t),a.extend=r,a.destroy=i.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(n!==i.namespaces&&(n=i.namespaces,o=i.enabled(t)),o),set:t=>{s=t}}),"function"==typeof i.init&&i.init(a),a}function r(t,e){const r=i(this.namespace+(void 0===e?":":e)+t);return r.log=this.log,r}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(t){return t instanceof Error?t.stack||t.message:t},i.disable=function(){const t=[...i.names.map(n),...i.skips.map(n).map((t=>"-"+t))].join(",");return i.enable(""),t},i.enable=function(t){let e;i.save(t),i.namespaces=t,i.names=[],i.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(e=0;e<n;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+t.substr(1)+"$")):i.names.push(new RegExp("^"+t+"$")))},i.enabled=function(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=i.skips.length;e<r;e++)if(i.skips[e].test(t))return!1;for(e=0,r=i.names.length;e<r;e++)if(i.names[e].test(t))return!0;return!1},i.humanize=t("ms"),i.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((t=>{i[t]=e[t]})),i.names=[],i.skips=[],i.formatters={},i.selectColor=function(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return i.colors[Math.abs(e)%i.colors.length]},i.enable(i.load()),i}},{ms:45}],20:[function(t,e,i){(function(i,r){(function(){var n=t("readable-stream"),o=t("end-of-stream"),s=t("inherits"),a=t("stream-shift"),l=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]),h=function(t,e){t._corked?t.once("uncork",e):e()},c=function(t,e){return function(i){i?function(t,e){t._autoDestroy&&t.destroy(e)}(t,"premature close"===i.message?null:i):e&&!t._ended&&t.end()}},u=function(){},f=function(t,e,i){if(!(this instanceof f))return new f(t,e,i);n.Duplex.call(this,i),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!i||!1!==i.autoDestroy,this._forwardDestroy=!i||!1!==i.destroy,this._forwardEnd=!i||!1!==i.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};s(f,n.Duplex),f.obj=function(t,e,i){return i||(i={}),i.objectMode=!0,i.highWaterMark=16,new f(t,e,i)},f.prototype.cork=function(){1==++this._corked&&this.emit("cork")},f.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},f.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed)t&&t.destroy&&t.destroy();else if(null!==t&&!1!==t){var e=this,r=o(t,{writable:!0,readable:!1},c(this,this._forwardEnd)),n=function(){var t=e._ondrain;e._ondrain=null,t&&t()};this._unwrite&&i.nextTick(n),this._writable=t,this._writable.on("drain",n),this._unwrite=function(){e._writable.removeListener("drain",n),r()},this.uncork()}else this.end()},f.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed)t&&t.destroy&&t.destroy();else{if(null===t||!1===t)return this.push(null),void this.resume();var e=this,i=o(t,{writable:!1,readable:!0},c(this)),r=function(){e._forward()},s=function(){e.push(null)};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:(a=t,new n.Readable({objectMode:!0,highWaterMark:16}).wrap(a)),this._readable2.on("readable",r),this._readable2.on("end",s),this._unread=function(){e._readable2.removeListener("readable",r),e._readable2.removeListener("end",s),i()},this._forward()}var a},f.prototype._read=function(){this._drained=!0,this._forward()},f.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var t;for(this._forwarding=!0;this._drained&&null!==(t=a(this._readable2));)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}},f.prototype.destroy=function(t,e){if(e||(e=u),this.destroyed)return e(null);this.destroyed=!0;var r=this;i.nextTick((function(){r._destroy(t),e(null)}))},f.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},f.prototype._write=function(t,e,i){if(!this.destroyed)return this._corked?h(this,this._write.bind(this,t,e,i)):t===l?this._finish(i):this._writable?void(!1===this._writable.write(t)?this._ondrain=i:this.destroyed||i()):i()},f.prototype._finish=function(t){var e=this;this.emit("preend"),h(this,(function(){var i,r;i=e._forwardEnd&&e._writable,r=function(){!1===e._writableState.prefinished&&(e._writableState.prefinished=!0),e.emit("prefinish"),h(e,t)},i?i._writableState&&i._writableState.finished?r():i._writableState?i.end(r):(i.end(),r()):r()}))},f.prototype.end=function(t,e,i){return"function"==typeof t?this.end(null,null,t):"function"==typeof e?this.end(t,null,e):(this._ended=!0,t&&this.write(t),this._writableState.ending||this._writableState.destroyed||this.write(l),n.Writable.prototype.end.call(this,i))},e.exports=f}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(t,e,i){(function(i){(function(){var r=t("once"),n=function(){},o=function(t,e,s){if("function"==typeof e)return o(t,null,e);e||(e={}),s=r(s||n);var a=t._writableState,l=t._readableState,h=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,u=!1,f=function(){t.writable||d()},d=function(){c=!1,h||s.call(t)},p=function(){h=!1,c||s.call(t)},g=function(e){s.call(t,e?new Error("exited with error code: "+e):null)},m=function(e){s.call(t,e)},b=function(){i.nextTick(y)},y=function(){if(!u)return(!h||l&&l.ended&&!l.destroyed)&&(!c||a&&a.ended&&!a.destroyed)?void 0:s.call(t,new Error("premature close"))},v=function(){t.req.on("finish",d)};return function(t){return t.setHeader&&"function"==typeof t.abort}(t)?(t.on("complete",d),t.on("abort",b),t.req?v():t.on("request",v)):c&&!a&&(t.on("end",f),t.on("close",f)),function(t){return t.stdio&&Array.isArray(t.stdio)&&3===t.stdio.length}(t)&&t.on("exit",g),t.on("end",p),t.on("finish",d),!1!==e.error&&t.on("error",m),t.on("close",b),function(){u=!0,t.removeListener("complete",d),t.removeListener("abort",b),t.removeListener("request",v),t.req&&t.req.removeListener("finish",d),t.removeListener("end",f),t.removeListener("close",f),t.removeListener("finish",d),t.removeListener("exit",g),t.removeListener("end",p),t.removeListener("error",m),t.removeListener("close",b)}};e.exports=o}).call(this)}).call(this,t("_process"))},{_process:50,once:48}],22:[function(t,e,i){var r=Object.create||function(t){var e=function(){};return e.prototype=t,new e},n=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return i},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var a,l=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),a=0===h.x}catch(t){a=!1}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,i,n){var o,s,a;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),a=s[e]):(s=t._events=r(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),!a.warned&&(o=c(t))&&o>0&&a.length>o){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else a=s[e]=i,++t._eventsCount;return t}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function d(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=o.call(f,r);return n.listener=i,r.wrapFn=n,n}function p(t,e,i){var r=t._events;if(!r)return[];var n=r[e];return n?"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):m(n,n.length):[]}function g(t){var e=this._events;if(e){var i=e[t];if("function"==typeof i)return 1;if(i)return i.length}return 0}function m(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}a?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');l=t}}):s.defaultMaxListeners=l,s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){var e,i,r,n,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var l=new Error('Unhandled "error" event. ('+e+")");throw l.context=e,l}if(!(i=s[t]))return!1;var h="function"==typeof i;switch(r=arguments.length){case 1:!function(t,e,i){if(e)t.call(i);else for(var r=t.length,n=m(t,r),o=0;o<r;++o)n[o].call(i)}(i,h,this);break;case 2:!function(t,e,i,r){if(e)t.call(i,r);else for(var n=t.length,o=m(t,n),s=0;s<n;++s)o[s].call(i,r)}(i,h,this,arguments[1]);break;case 3:!function(t,e,i,r,n){if(e)t.call(i,r,n);else for(var o=t.length,s=m(t,o),a=0;a<o;++a)s[a].call(i,r,n)}(i,h,this,arguments[1],arguments[2]);break;case 4:!function(t,e,i,r,n,o){if(e)t.call(i,r,n,o);else for(var s=t.length,a=m(t,s),l=0;l<s;++l)a[l].call(i,r,n,o)}(i,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(r-1),o=1;o<r;o++)n[o-1]=arguments[o];!function(t,e,i,r){if(e)t.apply(i,r);else for(var n=t.length,o=m(t,n),s=0;s<n;++s)o[s].apply(i,r)}(i,h,this,n)}return!0},s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,d(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,d(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,n,o,s,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=r(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){a=i[s].listener,o=s;break}if(o<0)return this;0===o?i.shift():function(t,e){for(var i=e,r=i+1,n=t.length;r<n;i+=1,r+=1)t[i]=t[r];t.pop()}(i,o),1===i.length&&(n[t]=i[0]),n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.removeAllListeners=function(t){var e,i,o;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):i[t]&&(0==--this._eventsCount?this._events=r(null):delete i[t]),this;if(0===arguments.length){var s,a=n(i);for(o=0;o<a.length;++o)"removeListener"!==(s=a[o])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(t,e,i){i.read=function(t,e,i,r,n){var o,s,a=8*n-r-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?n-1:0,f=i?-1:1,d=t[e+u];for(u+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+u],u+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+u],u+=f,c-=8);if(0===o)o=1-h;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=h}return(d?-1:1)*s*Math.pow(2,o-r)},i.write=function(t,e,i,r,n,o){var s,a,l,h=8*o-n-1,c=(1<<h)-1,u=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+u>=1?f/l:f*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(e*l-1)*Math.pow(2,n),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),s=0));n>=8;t[i+d]=255&a,d+=p,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;t[i+d]=255&s,d+=p,s/=256,h-=8);t[i+d-p]|=128*g}},{}],24:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},{}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=t,this.value=e}return t.prototype.rotateLeft=function(){var t=this.parent,e=this.brother,i=this.leftChild,r=this.rightChild;if(!r)throw new Error("unknown error");var n=r.leftChild,o=r.rightChild;return t&&(t.leftChild===this?t.leftChild=r:t.rightChild===this&&(t.rightChild=r)),r.parent=t,r.brother=e,r.leftChild=this,r.rightChild=o,e&&(e.brother=r),this.parent=r,this.brother=o,this.leftChild=i,this.rightChild=n,o&&(o.parent=r,o.brother=this),i&&(i.parent=this,i.brother=n),n&&(n.parent=this,n.brother=i),r},t.prototype.rotateRight=function(){var t=this.parent,e=this.brother,i=this.leftChild;if(!i)throw new Error("unknown error");var r=this.rightChild,n=i.leftChild,o=i.rightChild;return t&&(t.leftChild===this?t.leftChild=i:t.rightChild===this&&(t.rightChild=i)),i.parent=t,i.brother=e,i.leftChild=n,i.rightChild=this,e&&(e.brother=i),n&&(n.parent=i,n.brother=this),this.parent=i,this.brother=n,this.leftChild=o,this.rightChild=r,o&&(o.parent=this,o.brother=r),r&&(r.parent=this,r.brother=o),i},t.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},t.TreeNodeColorType={red:!0,black:!1},t}();Object.freeze(r),i.default=r},{}],26:[function(t,e,i){"use strict";var r=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function n(t){var e=this;void 0===t&&(t=[]);var i=[],o=0,s=0,a=0,l=0,h=0,c=0;this.size=function(){return c},this.empty=function(){return 0===c},this.clear=function(){o=a=s=l=h=c=0,f.call(this,n.bucketSize),c=0},this.front=function(){return i[o][s]},this.back=function(){return i[a][l]},this.forEach=function(t){if(!this.empty()){var e=0;if(o!==a){for(h=s;h<n.bucketSize;++h)t(i[o][h],e++);for(h=o+1;h<a;++h)for(var r=0;r<n.bucketSize;++r)t(i[h][r],e++);for(h=0;h<=l;++h)t(i[a][h],e++)}else for(var h=s;h<=l;++h)t(i[o][h],e++)}};var u=function(t){var e=o*n.bucketSize+s,i=e+t,r=a*n.bucketSize+l;if(i<e||i>r)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(i/n.bucketSize),curNodePointerIndex:i%n.bucketSize}};this.getElementByPos=function(t){var e=u(t),r=e.curNodeBucketIndex,n=e.curNodePointerIndex;return i[r][n]},this.eraseElementByPos=function(t){var e=this;if(t<0||t>c)throw new Error("pos should more than 0 and less than queue's size");if(0===t)this.popFront();else if(t===this.size())this.popBack();else{for(var i=[],r=t+1;r<c;++r)i.push(this.getElementByPos(r));this.cut(t),this.popBack(),i.forEach((function(t){return e.pushBack(t)}))}},this.eraseElementByValue=function(t){if(!this.empty()){var e=[];this.forEach((function(i){i!==t&&e.push(i)}));for(var i=e.length,r=0;r<i;++r)this.setElementByPos(r,e[r]);this.cut(i-1)}};var f=function(t){for(var e=[],r=t*n.sigma,u=Math.max(Math.ceil(r/n.bucketSize),2),f=0;f<u;++f)e.push(new Array(n.bucketSize));var d=Math.ceil(t/n.bucketSize),p=Math.floor(u/2)-Math.floor(d/2),g=p,m=0;if(this.size())for(f=0;f<d;++f){for(var b=0;b<n.bucketSize;++b)if(e[p+f][b]=this.front(),this.popFront(),this.empty()){g=p+f,m=b;break}if(this.empty())break}i=e,o=p,s=0,a=g,l=m,h=u,c=t};this.pushBack=function(t){this.empty()||(a===h-1&&l===n.bucketSize-1&&f.call(this,this.size()),l<n.bucketSize-1?++l:a<h-1&&(++a,l=0)),++c,i[a][l]=t},this.popBack=function(){this.empty()||(1!==this.size()&&(l>0?--l:o<a&&(--a,l=n.bucketSize-1)),c>0&&--c)},this.setElementByPos=function(t,e){var r=u(t),n=r.curNodeBucketIndex,o=r.curNodePointerIndex;i[n][o]=e},this.insert=function(t,e,i){var r=this;if(void 0===i&&(i=1),0===t)for(;i--;)this.pushFront(e);else if(t===this.size())for(;i--;)this.pushBack(e);else{for(var n=[],o=t;o<c;++o)n.push(this.getElementByPos(o));for(this.cut(t-1),o=0;o<i;++o)this.pushBack(e);n.forEach((function(t){return r.pushBack(t)}))}},this.find=function(t){if(o===a){for(var e=s;e<=l;++e)if(i[o][e]===t)return!0;return!1}for(e=s;e<n.bucketSize;++e)if(i[o][e]===t)return!0;for(e=o+1;e<a;++e)for(var r=0;r<n.bucketSize;++r)if(i[e][r]===t)return!0;for(e=0;e<=l;++e)if(i[a][e]===t)return!0;return!1},this.reverse=function(){for(var t=0,e=c-1;t<e;){var i=this.getElementByPos(t);this.setElementByPos(t,this.getElementByPos(e)),this.setElementByPos(e,i),++t,--e}},this.unique=function(){if(!this.empty()){var t=[],e=this.front();this.forEach((function(i,r){0!==r&&i===e||(t.push(i),e=i)}));for(var i=0;i<c;++i)this.setElementByPos(i,t[i]);this.cut(t.length-1)}},this.sort=function(t){var e=[];this.forEach((function(t){e.push(t)})),e.sort(t);for(var i=0;i<c;++i)this.setElementByPos(i,e[i])},this.pushFront=function(t){this.empty()||(0===o&&0===s&&f.call(this,this.size()),s>0?--s:o>0&&(--o,s=n.bucketSize-1)),++c,i[o][s]=t},this.popFront=function(){this.empty()||(1!==this.size()&&(s<n.bucketSize-1?++s:o<a&&(++o,s=0)),c>0&&--c)},this.shrinkToFit=function(){var t=this,e=[];this.forEach((function(t){e.push(t)}));var r=e.length;i=[];for(var o=Math.ceil(r/n.bucketSize),s=0;s<o;++s)i.push(new Array(n.bucketSize));this.clear(),e.forEach((function(e){return t.pushBack(e)}))},this.cut=function(t){if(t<0)this.clear();else{var e=u(t),i=e.curNodeBucketIndex,r=e.curNodePointerIndex;a=i,l=r,c=t+1}},this[Symbol.iterator]=function(){return function(){var t,e;return r(this,(function(r){switch(r.label){case 0:if(0===c)return[2];if(o!==a)return[3,5];e=s,r.label=1;case 1:return e<=l?[4,i[o][e]]:[3,4];case 2:r.sent(),r.label=3;case 3:return++e,[3,1];case 4:return[2];case 5:e=s,r.label=6;case 6:return e<n.bucketSize?[4,i[o][e]]:[3,9];case 7:r.sent(),r.label=8;case 8:return++e,[3,6];case 9:e=o+1,r.label=10;case 10:if(!(e<a))return[3,15];t=0,r.label=11;case 11:return t<n.bucketSize?[4,i[e][t]]:[3,14];case 12:r.sent(),r.label=13;case 13:return++t,[3,11];case 14:return++e,[3,10];case 15:e=0,r.label=16;case 16:return e<=l?[4,i[a][e]]:[3,19];case 17:r.sent(),r.label=18;case 18:return++e,[3,16];case 19:return[2]}}))}()},function(){var r=n.bucketSize;t.size?r=t.size():t.length&&(r=t.length);var s=r*n.sigma;h=Math.ceil(s/n.bucketSize),h=Math.max(h,3);for(var l=0;l<h;++l)i.push(new Array(n.bucketSize));var c=Math.ceil(r/n.bucketSize);o=Math.floor(h/2)-Math.floor(c/2),a=o,t.forEach((function(t){return e.pushBack(t)}))}(),Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),n.sigma=3,n.bucketSize=5e3,Object.freeze(n),i.default=n},{}],27:[function(t,e,i){"use strict";var r=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../LinkList/LinkList"),s=t("../Map/Map");function a(t,e,i){var l=this;if(void 0===t&&(t=[]),void 0===e&&(e=a.initSize),i=i||function(t){var e,i,r=0,o="";if("number"==typeof t)r=((r=Math.floor(t))<<5)-r,r&=r;else{o="string"!=typeof t?JSON.stringify(t):t;try{for(var s=n(o),a=s.next();!a.done;a=s.next())r=(r<<5)-r+a.value.charCodeAt(0),r&=r}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}}return r^r>>>16},0!=(e&e-1))throw new Error("initBucketNum must be 2 to the power of n");var h=0,c=[],u=Math.max(a.initSize,Math.min(a.maxSize,e));this.size=function(){return h},this.empty=function(){return 0===h},this.clear=function(){h=0,u=e,c=[]},this.forEach=function(t){var e=0;c.forEach((function(i){i.forEach((function(i){t(i,e++)}))}))};var f=function(t){if(!(t>=a.maxSize)){u=2*t;var e=[];c.forEach((function(r,n){if(!r.empty()){if(r instanceof o.default&&1===r.size()){var l=r.front(),h=l.key,f=l.value;e[i(h)&u-1]=new o.default([{key:h,value:f}])}else if(r instanceof s.default){var d=new o.default,p=new o.default;r.forEach((function(e){0==(i(e.key)&t)?d.pushBack(e):p.pushBack(e)})),d.size()>a.untreeifyThreshold?e[n]=new s.default(d):d.size()&&(e[n]=d),p.size()>a.untreeifyThreshold?e[n+t]=new s.default(p):p.size()&&(e[n+t]=p)}else{var g=new o.default,m=new o.default;r.forEach((function(e){0==(i(e.key)&t)?g.pushBack(e):m.pushBack(e)})),g.size()&&(e[n]=g),m.size()&&(e[n+t]=m)}c[n].clear()}})),c=e}};this.setElement=function(t,e){var r,l;if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=e){var d=i(t)&u-1;if(c[d]){var p=c[d].size();if(c[d]instanceof o.default){try{for(var g=n(c[d]),m=g.next();!m.done;m=g.next()){var b=m.value;if(b.key===t)return void(b.value=e)}}catch(t){r={error:t}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(r)throw r.error}}c[d].pushBack({key:t,value:e}),c[d].size()>=a.treeifyThreshold&&(c[d]=new s.default(c[d]))}else c[d].setElement(t,e);var y=c[d].size();h+=y-p}else++h,c[d]=new o.default([{key:t,value:e}]);h>u*a.sigma&&f.call(this,u)}else this.eraseElementByKey(t)},this.getElementByKey=function(t){var e,r,o=i(t)&u-1;if(c[o]){if(c[o]instanceof s.default)return c[o].getElementByKey(t);try{for(var a=n(c[o]),l=a.next();!l.done;l=a.next()){var h=l.value;if(h.key===t)return h.value}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}}},this.eraseElementByKey=function(t){var e,r,l=i(t)&u-1;if(c[l]){var f=c[l].size();if(c[l]instanceof s.default)c[l].eraseElementByKey(t),c[l].size()<=a.untreeifyThreshold&&(c[l]=new o.default(c[l]));else{var d=-1;try{for(var p=n(c[l]),g=p.next();!g.done;g=p.next()){var m=g.value;if(++d,m.key===t){c[l].eraseElementByPos(d);break}}}catch(t){e={error:t}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}}var b=c[l].size();h+=b-f}},this.find=function(t){var e,r,o=i(t)&u-1;if(!c[o])return!1;if(c[o]instanceof s.default)return c[o].find(t);try{for(var a=n(c[o]),l=a.next();!l.done;l=a.next())if(l.value.key===t)return!0}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return!1},this[Symbol.iterator]=function(){return function(){var t,e,i,o,s,a;return r(this,(function(r){switch(r.label){case 0:t=0,r.label=1;case 1:if(!(t<u))return[3,10];for(;t<u&&!c[t];)++t;if(t>=u)return[3,10];r.label=2;case 2:r.trys.push([2,7,8,9]),s=void 0,e=n(c[t]),i=e.next(),r.label=3;case 3:return i.done?[3,6]:[4,i.value];case 4:r.sent(),r.label=5;case 5:return i=e.next(),[3,3];case 6:return[3,9];case 7:return o=r.sent(),s={error:o},[3,9];case 8:try{i&&!i.done&&(a=e.return)&&a.call(e)}finally{if(s)throw s.error}return[7];case 9:return++t,[3,1];case 10:return[2]}}))}()},t.forEach((function(t){var e=t.key,i=t.value;return l.setElement(e,i)})),Object.freeze(this)}a.initSize=16,a.maxSize=1<<30,a.sigma=.75,a.treeifyThreshold=8,a.untreeifyThreshold=6,a.minTreeifySize=64,Object.freeze(a),i.default=a},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(t,e,i){"use strict";var r=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../Set/Set"),s=t("../LinkList/LinkList");function a(t,e,i){var l=this;if(void 0===t&&(t=[]),void 0===e&&(e=a.initSize),i=i||function(t){var e=0,i="";if("number"==typeof t)e=((e=Math.floor(t))<<5)-e,e&=e;else{i="string"!=typeof t?JSON.stringify(t):t;for(var r=0;r<i.length;r++)e=(e<<5)-e+i.charCodeAt(r),e&=e}return e^e>>>16},0!=(e&e-1))throw new Error("initBucketNum must be 2 to the power of n");var h=0,c=[],u=Math.max(a.initSize,Math.min(a.maxSize,e));this.size=function(){return h},this.empty=function(){return 0===h},this.clear=function(){h=0,u=e,c=[]},this.forEach=function(t){var e=0;c.forEach((function(i){i.forEach((function(i){t(i,e++)}))}))};var f=function(t){if(!(t>=a.maxSize)){u=2*t;var e=[];c.forEach((function(r,n){if(!r.empty()){if(r instanceof s.default&&1===r.size()){var l=r.front();if(void 0===l)throw new Error("unknown error");e[i(l)&u-1]=new s.default([l])}else if(r instanceof o.default){var h=new s.default,f=new s.default;r.forEach((function(e){0==(i(e)&t)?h.pushBack(e):f.pushBack(e)})),h.size()>a.untreeifyThreshold?e[n]=new o.default(h):h.size()&&(e[n]=h),f.size()>a.untreeifyThreshold?e[n+t]=new o.default(f):f.size()&&(e[n+t]=f)}else{var d=new s.default,p=new s.default;r.forEach((function(e){0==(i(e)&t)?d.pushBack(e):p.pushBack(e)})),d.size()&&(e[n]=d),p.size()&&(e[n+t]=p)}c[n].clear()}})),c=e}};this.insert=function(t){if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var e=i(t)&u-1;if(c[e]){var r=c[e].size();if(c[e]instanceof s.default){if(c[e].find(t))return;c[e].pushBack(t),c[e].size()>=a.treeifyThreshold&&(c[e]=new o.default(c[e]))}else c[e].insert(t);var n=c[e].size();h+=n-r}else c[e]=new s.default([t]),++h;h>u*a.sigma&&f.call(this,u)},this.eraseElementByValue=function(t){var e=i(t)&u-1;if(c[e]){var r=c[e].size();c[e].eraseElementByValue(t),c[e]instanceof o.default&&c[e].size()<=a.untreeifyThreshold&&(c[e]=new s.default(c[e]));var n=c[e].size();h+=n-r}},this.find=function(t){var e=i(t)&u-1;return!!c[e]&&c[e].find(t)},this[Symbol.iterator]=function(){return function(){var t,e,i,o,s,a;return r(this,(function(r){switch(r.label){case 0:t=0,r.label=1;case 1:if(!(t<u))return[3,10];for(;t<u&&!c[t];)++t;if(t>=u)return[3,10];r.label=2;case 2:r.trys.push([2,7,8,9]),s=void 0,e=n(c[t]),i=e.next(),r.label=3;case 3:return i.done?[3,6]:[4,i.value];case 4:r.sent(),r.label=5;case 5:return i=e.next(),[3,3];case 6:return[3,9];case 7:return o=r.sent(),s={error:o},[3,9];case 8:try{i&&!i.done&&(a=e.return)&&a.call(e)}finally{if(s)throw s.error}return[7];case 9:return++t,[3,1];case 10:return[2]}}))}()},t.forEach((function(t){return l.insert(t)})),Object.freeze(this)}a.initSize=16,a.maxSize=1<<30,a.sigma=.75,a.treeifyThreshold=8,a.untreeifyThreshold=6,a.minTreeifySize=64,Object.freeze(a),i.default=a},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(t,e,i){"use strict";var r=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=t};function o(t){var e=this;void 0===t&&(t=[]);var i=0,o=void 0,s=void 0;this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){o=s=void 0,i=0},this.front=function(){return null==o?void 0:o.value},this.back=function(){return null==s?void 0:s.value},this.forEach=function(t){for(var e=o,i=0;e;){if(void 0===e.value)throw new Error("unknown error");t(e.value,i++),e=e.next}},this.getElementByPos=function(t){if(t<0||t>=i)throw new Error("pos must more then 0 and less then the list length");for(var e=o;t--&&e;)e=e.next;if(!e||void 0===e.value)throw new Error("unknown error");return e.value},this.eraseElementByPos=function(t){if(t<0||t>=i)throw new Error("erase pos must more then 0 and less then the list length");if(0===t)this.popFront();else if(t===i-1)this.popBack();else{for(var e=o;t--;){if(!(null==e?void 0:e.next))throw new Error("unknown error");e=e.next}if(!e||!e.pre||!e.next)throw new Error("unknown error");var r=e.pre,n=e.next;n.pre=r,r.next=n,i>0&&--i}},this.eraseElementByValue=function(t){for(;o&&o.value===t;)this.popFront();for(;s&&s.value===t;)this.popBack();if(o)for(var e=o;e;){if(e.value===t){var r=e.pre,n=e.next;n&&(n.pre=r),r&&(r.next=n),i>0&&--i}e=e.next}},this.pushBack=function(t){if(null==t)throw new Error("you can't push null or undefined here");++i;var e=new n(t);s?(s.next=e,e.pre=s,s=e):o=s=e},this.popBack=function(){s&&(i>0&&--i,s&&(o===s?o=s=void 0:(s=s.pre)&&(s.next=void 0)))},this.setElementByPos=function(t,e){if(null==e)throw new Error("you can't set null or undefined here");if(t<0||t>=i)throw new Error("pos must more then 0 and less then the list length");for(var r=o;t--;){if(!r)throw new Error("unknown error");r=r.next}r&&(r.value=e)},this.insert=function(t,e,r){if(void 0===r&&(r=1),null==e)throw new Error("you can't insert null or undefined here");if(t<0||t>i)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(r<0)throw new Error("insert size must more than 0");if(0===t)for(;r--;)this.pushFront(e);else if(t===i)for(;r--;)this.pushBack(e);else{for(var s=o,a=1;a<t;++a){if(!(null==s?void 0:s.next))throw new Error("unknown error");s=null==s?void 0:s.next}if(!s)throw new Error("unknown error");var l=s.next;for(i+=r;r--;)s.next=new n(e),s.next.pre=s,s=s.next;s.next=l,l&&(l.pre=s)}},this.find=function(t){for(var e=o;e;){if(e.value===t)return!0;e=e.next}return!1},this.reverse=function(){for(var t=o,e=s,r=0;t&&e&&2*r<i;){var n=t.value;t.value=e.value,e.value=n,t=t.next,e=e.pre,++r}},this.unique=function(){for(var t=o;t;){for(var e=t;e&&e.next&&e.value===e.next.value;)e=e.next,i>0&&--i;t.next=e.next,t.next&&(t.next.pre=t),t=t.next}},this.sort=function(t){var e=[];this.forEach((function(t){e.push(t)})),e.sort(t);var i=o;e.forEach((function(t){i&&(i.value=t,i=i.next)}))},this.pushFront=function(t){if(null==t)throw new Error("you can't push null or undefined here");++i;var e=new n(t);o?(e.next=o,o.pre=e,o=e):o=s=e},this.popFront=function(){o&&(i>0&&--i,o&&(o===s?o=s=void 0:(o=o.next)&&(o.pre=void 0)))},this.merge=function(t){var e=this,r=o;t.forEach((function(t){for(;r&&void 0!==r.value&&r.value<=t;)r=r.next;if(void 0===r)e.pushBack(t),r=s;else if(r===o)e.pushFront(t),r=o;else{++i;var a=r.pre;a&&(a.next=new n(t),a.next.pre=a,a.next.next=r,r&&(r.pre=a.next))}}))},this[Symbol.iterator]=function(){return function(){var t;return r(this,(function(e){switch(e.label){case 0:t=o,e.label=1;case 1:if(void 0===t)return[3,3];if(!t.value)throw new Error("unknown error");return[4,t.value];case 2:return e.sent(),t=t.next,[3,1];case 3:return[2]}}))}()},t.forEach((function(t){return e.pushBack(t)})),Object.freeze(this)}Object.freeze(o),i.default=o},{}],30:[function(t,e,i){"use strict";var r=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../Base/TreeNode");function s(t,e){var i=this;void 0===t&&(t=[]),e=e||function(t,e){return t<e?-1:t>e?1:0};var s=0,a=new o.default;a.color=o.default.TreeNodeColorType.black,this.size=function(){return s},this.empty=function(){return 0===s},this.clear=function(){s=0,a.key=a.value=void 0,a.leftChild=a.rightChild=a.brother=void 0};var l=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.leftChild?l(t.leftChild):t},h=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.rightChild?h(t.rightChild):t};this.front=function(){if(!this.empty()){var t=l(a);if(void 0===t.key||void 0===t.value)throw new Error("unknown error");return{key:t.key,value:t.value}}},this.back=function(){if(!this.empty()){var t=h(a);if(void 0===t.key||void 0===t.value)throw new Error("unknown error");return{key:t.key,value:t.value}}},this.forEach=function(t){var e,i,r=0;try{for(var o=n(this),s=o.next();!s.done;s=o.next())t(s.value,r++)}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},this.getElementByPos=function(t){var e,i;if(t<0||t>=this.size())throw new Error("pos must more than 0 and less than set's size");var r=0;try{for(var o=n(this),s=o.next();!s.done;s=o.next()){var a=s.value;if(r===t)return a;++r}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}throw new Error("unknown Error")};var c=function(t,i){if(t&&void 0!==t.key&&void 0!==t.value){var r=e(t.key,i);return 0===r?{key:t.key,value:t.value}:r<0?c(t.rightChild,i):c(t.leftChild,i)||{key:t.key,value:t.value}}};this.lowerBound=function(t){return c(a,t)};var u=function(t,i){if(t&&void 0!==t.key&&void 0!==t.value)return e(t.key,i)<=0?u(t.rightChild,i):u(t.leftChild,i)||{key:t.key,value:t.value}};this.upperBound=function(t){return u(a,t)};var f=function(t,i){if(t&&void 0!==t.key&&void 0!==t.value){var r=e(t.key,i);return 0===r?{key:t.key,value:t.value}:r>0?f(t.leftChild,i):f(t.rightChild,i)||{key:t.key,value:t.value}}};this.reverseLowerBound=function(t){return f(a,t)};var d=function(t,i){if(t&&void 0!==t.key&&void 0!==t.value)return e(t.key,i)>=0?d(t.leftChild,i):d(t.rightChild,i)||{key:t.key,value:t.value}};this.reverseUpperBound=function(t){return d(a,t)};var p=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(t.color!==o.default.TreeNodeColorType.red){var i=t.brother;if(!i)throw new Error("unknown error");if(t===e.leftChild)if(i.color===o.default.TreeNodeColorType.red){i.color=o.default.TreeNodeColorType.black,e.color=o.default.TreeNodeColorType.red;var r=e.rotateLeft();a===e&&(a=r),p(t)}else i.color===o.default.TreeNodeColorType.black&&(i.rightChild&&i.rightChild.color===o.default.TreeNodeColorType.red?(i.color=e.color,e.color=o.default.TreeNodeColorType.black,i.rightChild&&(i.rightChild.color=o.default.TreeNodeColorType.black),r=e.rotateLeft(),a===e&&(a=r),t.color=o.default.TreeNodeColorType.black):i.rightChild&&i.rightChild.color!==o.default.TreeNodeColorType.black||!i.leftChild||i.leftChild.color!==o.default.TreeNodeColorType.red?i.leftChild&&i.leftChild.color!==o.default.TreeNodeColorType.black||i.rightChild&&i.rightChild.color!==o.default.TreeNodeColorType.black||(i.color=o.default.TreeNodeColorType.red,p(e)):(i.color=o.default.TreeNodeColorType.red,i.leftChild&&(i.leftChild.color=o.default.TreeNodeColorType.black),r=i.rotateRight(),a===i&&(a=r),p(t)));else t===e.rightChild&&(i.color===o.default.TreeNodeColorType.red?(i.color=o.default.TreeNodeColorType.black,e.color=o.default.TreeNodeColorType.red,r=e.rotateRight(),a===e&&(a=r),p(t)):i.color===o.default.TreeNodeColorType.black&&(i.leftChild&&i.leftChild.color===o.default.TreeNodeColorType.red?(i.color=e.color,e.color=o.default.TreeNodeColorType.black,i.leftChild&&(i.leftChild.color=o.default.TreeNodeColorType.black),r=e.rotateRight(),a===e&&(a=r),t.color=o.default.TreeNodeColorType.black):i.leftChild&&i.leftChild.color!==o.default.TreeNodeColorType.black||!i.rightChild||i.rightChild.color!==o.default.TreeNodeColorType.red?i.leftChild&&i.leftChild.color!==o.default.TreeNodeColorType.black||i.rightChild&&i.rightChild.color!==o.default.TreeNodeColorType.black||(i.color=o.default.TreeNodeColorType.red,p(e)):(i.color=o.default.TreeNodeColorType.red,i.rightChild&&(i.rightChild.color=o.default.TreeNodeColorType.black),r=i.rotateLeft(),a===i&&(a=r),p(t))))}else t.color=o.default.TreeNodeColorType.black},g=function(t){for(var e=t;e.leftChild||e.rightChild;){if(e.rightChild){e=l(e.rightChild);var i=t.key;t.key=e.key,e.key=i;var r=t.value;t.value=e.value,e.value=r,t=e}e.leftChild&&(e=h(e.leftChild),i=t.key,t.key=e.key,e.key=i,r=t.value,t.value=e.value,e.value=r,t=e)}p(e),e&&e.remove(),--s,a.color=o.default.TreeNodeColorType.black},m=function(t,e){return!(!t||void 0===t.key)&&(!!m(t.leftChild,e)||!!e(t)||m(t.rightChild,e))};this.eraseElementByPos=function(t){if(t<0||t>=s)throw new Error("pos must more than 0 and less than set's size");var e=0;m(a,(function(i){return t===e?(g(i),!0):(++e,!1)}))},this.eraseElementByKey=function(t){if(!this.empty()){var i=v(a,t);void 0!==i&&void 0!==i.key&&0===e(i.key,t)&&g(i)}};var b=function(t,i){if(!t||void 0===t.key)throw new Error("unknown error");var r=e(i,t.key);return r<0?t.leftChild?b(t.leftChild,i):(t.leftChild=new o.default,t.leftChild.parent=t,t.leftChild.brother=t.rightChild,t.rightChild&&(t.rightChild.brother=t.leftChild),t.leftChild):r>0?t.rightChild?b(t.rightChild,i):(t.rightChild=new o.default,t.rightChild.parent=t,t.rightChild.brother=t.leftChild,t.leftChild&&(t.leftChild.brother=t.rightChild),t.rightChild):t},y=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(e.color!==o.default.TreeNodeColorType.black&&e.color===o.default.TreeNodeColorType.red){var i=e.brother,r=e.parent;if(!r)throw new Error("unknown error");if(i&&i.color===o.default.TreeNodeColorType.red)i.color=e.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,y(r);else if(!i||i.color===o.default.TreeNodeColorType.black)if(e===r.leftChild)if(t===e.leftChild){e.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red;var n=r.rotateRight();r===a&&(a=n)}else t===e.rightChild&&(n=e.rotateLeft(),r===a&&(a=n),y(e));else e===r.rightChild&&(t===e.leftChild?(n=e.rotateRight(),r===a&&(a=n),y(e)):t===e.rightChild&&(e.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,n=r.rotateLeft(),r===a&&(a=n)))}};this.setElement=function(t,i){if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=i){if(this.empty())return++s,a.key=t,a.value=i,void(a.color=o.default.TreeNodeColorType.black);var r=b(a,t);void 0===r.key||0!==e(r.key,t)?(++s,r.key=t,r.value=i,y(r),a.color=o.default.TreeNodeColorType.black):r.value=i}else this.eraseElementByKey(t)};var v=function(t,i){if(t&&void 0!==t.key){var r=e(i,t.key);return r<0?v(t.leftChild,i):r>0?v(t.rightChild,i):t}};this.find=function(t){return!!v(a,t)},this.getElementByKey=function(t){var e=v(a,t);if(void 0===(null==e?void 0:e.key)||void 0===(null==e?void 0:e.value))throw new Error("unknown error");return e.value},this.union=function(t){var e=this;t.forEach((function(t){var i=t.key,r=t.value;return e.setElement(i,r)}))},this.getHeight=function(){if(this.empty())return 0;var t=function(e){return e?Math.max(t(e.leftChild),t(e.rightChild))+1:1};return t(a)};var _=function(t){return r(this,(function(e){switch(e.label){case 0:return t&&void 0!==t.key&&void 0!==t.value?[5,n(_(t.leftChild))]:[2];case 1:return e.sent(),[4,{key:t.key,value:t.value}];case 2:return e.sent(),[5,n(_(t.rightChild))];case 3:return e.sent(),[2]}}))};this[Symbol.iterator]=function(){return _(a)},t.forEach((function(t){var e=t.key,r=t.value;return i.setElement(e,r)})),Object.freeze(this)}Object.freeze(s),i.default=s},{"../Base/TreeNode":25}],31:[function(t,e,i){"use strict";function r(t,e){void 0===t&&(t=[]),e=e||function(t,e){return t>e?-1:t<e?1:0};var i=[];t.forEach((function(t){return i.push(t)}));var r=i.length,n=function(t,e){if(t<0||t>=r)throw new Error("unknown error");if(e<0||e>=r)throw new Error("unknown error");var n=i[t];i[t]=i[e],i[e]=n},o=function(t){if(t<0||t>=r)throw new Error("unknown error");var o=2*t+1,s=2*t+2;o<r&&e(i[t],i[o])>0&&n(t,o),s<r&&e(i[t],i[s])>0&&n(t,s)};!function(){for(var t=Math.floor((r-1)/2);t>=0;--t)for(var o=t,s=2*o+1;s<r;){var a=s+1,l=s;if(a<r&&e(i[s],i[a])>0&&(l=a),e(i[o],i[l])<=0)break;n(o,l),s=2*(o=l)+1}}(),this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,i.length=0},this.push=function(t){if(i.push(t),1!=++r)for(var n=r-1;n>0;){var s=Math.floor((n-1)/2);if(e(i[s],t)<=0)break;o(s),n=s}},this.pop=function(){if(!this.empty())if(1!==this.size()){var t=i[r-1];--r;for(var n=0;n<this.size();){var o=2*n+1,s=2*n+2;if(o>=this.size())break;var a=o;if(s<this.size()&&e(i[o],i[s])>0&&(a=s),e(i[a],t)>=0)break;i[n]=i[a],n=a}i[n]=t}else--r},this.top=function(){return i[0]},Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),Object.freeze(r),i.default=r},{}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("../LinkList/LinkList");function n(t){void 0===t&&(t=[]);var e=new r.default(t);this.size=function(){return e.size()},this.empty=function(){return e.empty()},this.clear=function(){e.clear()},this.push=function(t){e.pushBack(t)},this.pop=function(){e.popFront()},this.front=function(){return e.front()},Object.freeze(this)}Object.freeze(n),i.default=n},{"../LinkList/LinkList":29}],33:[function(t,e,i){"use strict";var r=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../Base/TreeNode");function s(t,e){var i=this;void 0===t&&(t=[]),e=e||function(t,e){return t<e?-1:t>e?1:0};var s=0,a=new o.default;a.color=o.default.TreeNodeColorType.black,this.size=function(){return s},this.empty=function(){return 0===s},this.clear=function(){s=0,a.key=void 0,a.leftChild=a.rightChild=a.brother=a.parent=void 0,a.color=o.default.TreeNodeColorType.black};var l=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.leftChild?l(t.leftChild):t},h=function(t){if(!t||void 0===t.key)throw new Error("unknown error");return t.rightChild?h(t.rightChild):t};this.front=function(){if(!this.empty())return l(a).key},this.back=function(){if(!this.empty())return h(a).key},this.forEach=function(t){var e,i,r=0;try{for(var o=n(this),s=o.next();!s.done;s=o.next())t(s.value,r++)}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},this.getElementByPos=function(t){var e,i;if(t<0||t>=this.size())throw new Error("pos must more than 0 and less than set's size");var r=0;try{for(var o=n(this),s=o.next();!s.done;s=o.next()){var a=s.value;if(r===t)return a;++r}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}throw new Error("unknown error")};var c=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(t.color!==o.default.TreeNodeColorType.red){var i=t.brother;if(!i)throw new Error("unknown error");if(t===e.leftChild)if(i.color===o.default.TreeNodeColorType.red){i.color=o.default.TreeNodeColorType.black,e.color=o.default.TreeNodeColorType.red;var r=e.rotateLeft();a===e&&(a=r),c(t)}else i.color===o.default.TreeNodeColorType.black&&(i.rightChild&&i.rightChild.color===o.default.TreeNodeColorType.red?(i.color=e.color,e.color=o.default.TreeNodeColorType.black,i.rightChild&&(i.rightChild.color=o.default.TreeNodeColorType.black),r=e.rotateLeft(),a===e&&(a=r),t.color=o.default.TreeNodeColorType.black):i.rightChild&&i.rightChild.color!==o.default.TreeNodeColorType.black||!i.leftChild||i.leftChild.color!==o.default.TreeNodeColorType.red?i.leftChild&&i.leftChild.color!==o.default.TreeNodeColorType.black||i.rightChild&&i.rightChild.color!==o.default.TreeNodeColorType.black||(i.color=o.default.TreeNodeColorType.red,c(e)):(i.color=o.default.TreeNodeColorType.red,i.leftChild&&(i.leftChild.color=o.default.TreeNodeColorType.black),r=i.rotateRight(),a===i&&(a=r),c(t)));else t===e.rightChild&&(i.color===o.default.TreeNodeColorType.red?(i.color=o.default.TreeNodeColorType.black,e.color=o.default.TreeNodeColorType.red,r=e.rotateRight(),a===e&&(a=r),c(t)):i.color===o.default.TreeNodeColorType.black&&(i.leftChild&&i.leftChild.color===o.default.TreeNodeColorType.red?(i.color=e.color,e.color=o.default.TreeNodeColorType.black,i.leftChild&&(i.leftChild.color=o.default.TreeNodeColorType.black),r=e.rotateRight(),a===e&&(a=r),t.color=o.default.TreeNodeColorType.black):i.leftChild&&i.leftChild.color!==o.default.TreeNodeColorType.black||!i.rightChild||i.rightChild.color!==o.default.TreeNodeColorType.red?i.leftChild&&i.leftChild.color!==o.default.TreeNodeColorType.black||i.rightChild&&i.rightChild.color!==o.default.TreeNodeColorType.black||(i.color=o.default.TreeNodeColorType.red,c(e)):(i.color=o.default.TreeNodeColorType.red,i.rightChild&&(i.rightChild.color=o.default.TreeNodeColorType.black),r=i.rotateLeft(),a===i&&(a=r),c(t))))}else t.color=o.default.TreeNodeColorType.black},u=function(t){for(var e=t;e.leftChild||e.rightChild;){if(e.rightChild){e=l(e.rightChild);var i=t.key;t.key=e.key,e.key=i,t=e}e.leftChild&&(e=h(e.leftChild),i=t.key,t.key=e.key,e.key=i,t=e)}c(e),e&&e.remove(),--s,a.color=o.default.TreeNodeColorType.black},f=function(t,e){return!(!t||void 0===t.key)&&(!!f(t.leftChild,e)||!!e(t)||f(t.rightChild,e))};this.eraseElementByPos=function(t){if(t<0||t>=s)throw new Error("pos must more than 0 and less than set's size");var e=0;f(a,(function(i){return t===e?(u(i),!0):(++e,!1)}))},this.eraseElementByValue=function(t){if(!this.empty()){var i=g(a,t);void 0!==i&&void 0!==i.key&&0===e(i.key,t)&&u(i)}};var d=function(t,i){if(!t||void 0===t.key)throw new Error("unknown error");var r=e(i,t.key);return r<0?t.leftChild?d(t.leftChild,i):(t.leftChild=new o.default,t.leftChild.parent=t,t.leftChild.brother=t.rightChild,t.rightChild&&(t.rightChild.brother=t.leftChild),t.leftChild):r>0?t.rightChild?d(t.rightChild,i):(t.rightChild=new o.default,t.rightChild.parent=t,t.rightChild.brother=t.leftChild,t.leftChild&&(t.leftChild.brother=t.rightChild),t.rightChild):t},p=function(t){var e=t.parent;if(!e){if(t===a)return;throw new Error("unknown error")}if(e.color!==o.default.TreeNodeColorType.black&&e.color===o.default.TreeNodeColorType.red){var i=e.brother,r=e.parent;if(!r)throw new Error("unknown error");if(i&&i.color===o.default.TreeNodeColorType.red)i.color=e.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,p(r);else if(!i||i.color===o.default.TreeNodeColorType.black)if(e===r.leftChild)if(t===e.leftChild){e.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red;var n=r.rotateRight();r===a&&(a=n)}else t===e.rightChild&&(n=e.rotateLeft(),r===a&&(a=n),p(e));else e===r.rightChild&&(t===e.leftChild?(n=e.rotateRight(),r===a&&(a=n),p(e)):t===e.rightChild&&(e.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,n=r.rotateLeft(),r===a&&(a=n)))}};this.insert=function(t){if(null==t)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++s,a.key=t,void(a.color=o.default.TreeNodeColorType.black);var i=d(a,t);void 0!==i.key&&0===e(i.key,t)||(++s,i.key=t,p(i),a.color=o.default.TreeNodeColorType.black)};var g=function(t,i){if(t&&void 0!==t.key){var r=e(i,t.key);return r<0?g(t.leftChild,i):r>0?g(t.rightChild,i):t}};this.find=function(t){var i=g(a,t);return void 0!==i&&void 0!==i.key&&0===e(i.key,t)};var m=function(t,i){if(t&&void 0!==t.key){var r=e(t.key,i);if(0===r)return t.key;if(r<0)return m(t.rightChild,i);var n=m(t.leftChild,i);return void 0!==n?n:t.key}};this.lowerBound=function(t){return m(a,t)};var b=function(t,i){if(t&&void 0!==t.key){if(e(t.key,i)<=0)return b(t.rightChild,i);var r=b(t.leftChild,i);return void 0!==r?r:t.key}};this.upperBound=function(t){return b(a,t)};var y=function(t,i){if(t&&void 0!==t.key){var r=e(t.key,i);if(0===r)return t.key;if(r>0)return y(t.leftChild,i);var n=y(t.rightChild,i);return void 0!==n?n:t.key}};this.reverseLowerBound=function(t){return y(a,t)};var v=function(t,i){if(t&&void 0!==t.key){if(e(t.key,i)>=0)return v(t.leftChild,i);var r=v(t.rightChild,i);return void 0!==r?r:t.key}};this.reverseUpperBound=function(t){return v(a,t)},this.union=function(t){var e=this;t.forEach((function(t){return e.insert(t)}))},this.getHeight=function(){if(this.empty())return 0;var t=function(e){return e?Math.max(t(e.leftChild),t(e.rightChild))+1:1};return t(a)};var _=function(t){return r(this,(function(e){switch(e.label){case 0:return t&&void 0!==t.key?[5,n(_(t.leftChild))]:[2];case 1:return e.sent(),[4,t.key];case 2:return e.sent(),[5,n(_(t.rightChild))];case 3:return e.sent(),[2]}}))};this[Symbol.iterator]=function(){return _(a)},t.forEach((function(t){return i.insert(t)})),Object.freeze(this)}Object.freeze(s),i.default=s},{"../Base/TreeNode":25}],34:[function(t,e,i){"use strict";function r(t){var e=this;void 0===t&&(t=[]);var i=0,r=[];this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){i=0,r.length=0},this.push=function(t){r.push(t),++i},this.pop=function(){r.pop(),i>0&&--i},this.top=function(){return r[i-1]},t.forEach((function(t){return e.push(t)})),Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),Object.freeze(r),i.default=r},{}],35:[function(t,e,i){"use strict";var r=this&&this.__generator||function(t,e){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},n=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s},o=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var r,n=0,o=e.length;n<o;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function a(t){var e=this;void 0===t&&(t=[]);var i=0,a=[];this.size=function(){return i},this.empty=function(){return 0===i},this.clear=function(){i=0,a.length=0},this.front=function(){if(!this.empty())return a[0]},this.back=function(){if(!this.empty())return a[i-1]},this.forEach=function(t){a.forEach(t)},this.getElementByPos=function(t){if(t<0||t>=i)throw new Error("pos must more than 0 and less than vector's size");return a[t]},this.eraseElementByPos=function(t){if(t<0||t>=i)throw new Error("pos must more than 0 and less than vector's size");for(var e=t;e<i-1;++e)a[e]=a[e+1];this.popBack()},this.eraseElementByValue=function(t){var e=[];this.forEach((function(i){i!==t&&e.push(i)})),e.forEach((function(t,e){a[e]=t}));for(var r=e.length;i>r;)this.popBack()},this.pushBack=function(t){a.push(t),++i},this.popBack=function(){a.pop(),i>0&&--i},this.setElementByPos=function(t,e){if(t<0||t>=i)throw new Error("pos must more than 0 and less than vector's size");a[t]=e},this.insert=function(t,e,r){if(void 0===r&&(r=1),t<0||t>i)throw new Error("pos must more than 0 and less than or equal to vector's size");a.splice.apply(a,o([t,0],n(new Array(r).fill(e)),!1)),i+=r},this.find=function(t){return a.includes(t)},this.reverse=function(){a.reverse()},this.unique=function(){var t,e=[];this.forEach((function(i,r){0!==r&&i===t||(e.push(i),t=i)})),e.forEach((function(t,e){a[e]=t}));for(var r=e.length;i>r;)this.popBack()},this.sort=function(t){a.sort(t)},this[Symbol.iterator]=function(){return function(){return r(this,(function(t){switch(t.label){case 0:return[5,s(a)];case 1:return[2,t.sent()]}}))}()},t.forEach((function(t){return e.pushBack(t)})),Object.freeze(this)}Object.defineProperty(i,"__esModule",{value:!0}),Object.freeze(a),i.default=a},{}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HashMap=i.HashSet=i.Map=i.Set=i.PriorityQueue=i.Deque=i.LinkList=i.Queue=i.Stack=i.Vector=void 0;var r=t("./Vector/Vector");i.Vector=r.default;var n=t("./Stack/Stack");i.Stack=n.default;var o=t("./Queue/Queue");i.Queue=o.default;var s=t("./LinkList/LinkList");i.LinkList=s.default;var a=t("./Deque/Deque");i.Deque=a.default;var l=t("./PriorityQueue/PriorityQueue");i.PriorityQueue=l.default;var h=t("./Set/Set");i.Set=h.default;var c=t("./Map/Map");i.Map=c.default;var u=t("./HashSet/HashSet");i.HashSet=u.default;var f=t("./HashMap/HashMap");i.HashMap=f.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(t,e,i){"use strict";const r=t("yallist"),n=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),h=Symbol("dispose"),c=Symbol("noDisposeOnSet"),u=Symbol("lruList"),f=Symbol("cache"),d=Symbol("updateAgeOnGet"),p=()=>1;const g=(t,e,i)=>{const r=t[f].get(e);if(r){const e=r.value;if(m(t,e)){if(y(t,r),!t[a])return}else i&&(t[d]&&(r.value.now=Date.now()),t[u].unshiftNode(r));return e.value}},m=(t,e)=>{if(!e||!e.maxAge&&!t[l])return!1;const i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[l]&&i>t[l]},b=t=>{if(t[o]>t[n])for(let e=t[u].tail;t[o]>t[n]&&null!==e;){const i=e.prev;y(t,e),e=i}},y=(t,e)=>{if(e){const i=e.value;t[h]&&t[h](i.key,i.value),t[o]-=i.length,t[f].delete(i.key),t[u].removeNode(e)}};class v{constructor(t,e,i,r,n){this.key=t,this.value=e,this.length=i,this.now=r,this.maxAge=n||0}}const _=(t,e,i,r)=>{let n=i.value;m(t,n)&&(y(t,i),t[a]||(n=void 0)),n&&e.call(r,n.value,n.key,t)};e.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[n]=t.max||1/0;const e=t.length||p;if(this[s]="function"!=typeof e?p:e,this[a]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[h]=t.dispose,this[c]=t.noDisposeOnSet||!1,this[d]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[n]=t||1/0,b(this)}get max(){return this[n]}set allowStale(t){this[a]=!!t}get allowStale(){return this[a]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[l]=t,b(this)}get maxAge(){return this[l]}set lengthCalculator(t){"function"!=typeof t&&(t=p),t!==this[s]&&(this[s]=t,this[o]=0,this[u].forEach((t=>{t.length=this[s](t.value,t.key),this[o]+=t.length}))),b(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[u].length}rforEach(t,e){e=e||this;for(let i=this[u].tail;null!==i;){const r=i.prev;_(this,t,i,e),i=r}}forEach(t,e){e=e||this;for(let i=this[u].head;null!==i;){const r=i.next;_(this,t,i,e),i=r}}keys(){return this[u].toArray().map((t=>t.key))}values(){return this[u].toArray().map((t=>t.value))}reset(){this[h]&&this[u]&&this[u].length&&this[u].forEach((t=>this[h](t.key,t.value))),this[f]=new Map,this[u]=new r,this[o]=0}dump(){return this[u].map((t=>!m(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[u]}set(t,e,i){if((i=i||this[l])&&"number"!=typeof i)throw new TypeError("maxAge must be a number");const r=i?Date.now():0,a=this[s](e,t);if(this[f].has(t)){if(a>this[n])return y(this,this[f].get(t)),!1;const s=this[f].get(t).value;return this[h]&&(this[c]||this[h](t,s.value)),s.now=r,s.maxAge=i,s.value=e,this[o]+=a-s.length,s.length=a,this.get(t),b(this),!0}const d=new v(t,e,a,r,i);return d.length>this[n]?(this[h]&&this[h](t,e),!1):(this[o]+=d.length,this[u].unshift(d),this[f].set(t,this[u].head),b(this),!0)}has(t){if(!this[f].has(t))return!1;const e=this[f].get(t).value;return!m(this,e)}get(t){return g(this,t,!0)}peek(t){return g(this,t,!1)}pop(){const t=this[u].tail;return t?(y(this,t),t.value):null}del(t){y(this,this[f].get(t))}load(t){this.reset();const e=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],n=r.e||0;if(0===n)this.set(r.k,r.v);else{const t=n-e;t>0&&this.set(r.k,r.v,t)}}}prune(){this[f].forEach(((t,e)=>g(this,e,!1)))}}},{yallist:83}],38:[function(t,e,i){(function(t){(function(){const i=e.exports;i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},i.codes={};for(const t in i.types){const e=i.types[t];i.codes[e]=t}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.VARBYTEINT_MASK=127,i.VARBYTEINT_FIN_MASK=128,i.VARBYTEINT_MAX=268435455,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=t.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=t.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=t.from([i.codes.connect<<i.CMD_SHIFT]),i.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},i.propertiesCodes={};for(const t in i.properties){const e=i.properties[t];i.propertiesCodes[e]=t}function r(e){return[0,1,2].map((r=>[0,1].map((n=>[0,1].map((o=>{const s=t.alloc(1);return s.writeUInt8(i.codes[e]<<i.CMD_SHIFT|(n?i.DUP_MASK:0)|r<<i.QOS_SHIFT|o,0,!0),s}))))))}i.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},i.PUBLISH_HEADER=r("publish"),i.SUBSCRIBE_HEADER=r("subscribe"),i.SUBSCRIBE_OPTIONS_QOS_MASK=3,i.SUBSCRIBE_OPTIONS_NL_MASK=1,i.SUBSCRIBE_OPTIONS_NL_SHIFT=2,i.SUBSCRIBE_OPTIONS_RAP_MASK=1,i.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,i.SUBSCRIBE_OPTIONS_RH_MASK=3,i.SUBSCRIBE_OPTIONS_RH_SHIFT=4,i.SUBSCRIBE_OPTIONS_RH=[0,16,32],i.SUBSCRIBE_OPTIONS_NL=4,i.SUBSCRIBE_OPTIONS_RAP=8,i.SUBSCRIBE_OPTIONS_QOS=[0,1,2],i.UNSUBSCRIBE_HEADER=r("unsubscribe"),i.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},i.SUBACK_HEADER=t.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=t.from([3]),i.VERSION4=t.from([4]),i.VERSION5=t.from([5]),i.VERSION131=t.from([131]),i.VERSION132=t.from([132]),i.QOS=[0,1,2].map((e=>t.from([e]))),i.EMPTY={pingreq:t.from([i.codes.pingreq<<4,0]),pingresp:t.from([i.codes.pingresp<<4,0]),disconnect:t.from([i.codes.disconnect<<4,0])}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17}],39:[function(t,e,i){(function(i){(function(){const r=t("./writeToStream"),n=t("events");class o extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(t){return this._array[this._i++]=t,!0}concat(){let t=0;const e=new Array(this._array.length),r=this._array;let n,o=0;for(n=0;n<r.length&&void 0!==r[n];n++)"string"!=typeof r[n]?e[n]=r[n].length:e[n]=i.byteLength(r[n]),t+=e[n];const s=i.allocUnsafe(t);for(n=0;n<r.length&&void 0!==r[n];n++)"string"!=typeof r[n]?(r[n].copy(s,o),o+=e[n]):(s.write(r[n],o),o+=e[n]);return s}}e.exports=function(t,e){const i=new o;return r(t,i,e),i.concat()}}).call(this)}).call(this,t("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(t,e,i){i.parser=t("./parser").parser,i.generate=t("./generate"),i.writeToStream=t("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(t,e,i){(function(t){(function(){const i={},r=t.isBuffer(t.from([1,2]).subarray(0,1));function n(e){const i=t.allocUnsafe(2);return i.writeUInt8(e>>8,0),i.writeUInt8(255&e,1),i}e.exports={cache:i,generateCache:function(){for(let t=0;t<65536;t++)i[t]=n(t)},generateNumber:n,genBufVariableByteInt:function(e){let i=0,n=0;const o=t.allocUnsafe(4);do{i=e%128|0,(e=e/128|0)>0&&(i|=128),o.writeUInt8(i,n++)}while(e>0&&n<4);return e>0&&(n=0),r?o.subarray(0,n):o.slice(0,n)},generate4ByteBuffer:function(e){const i=t.allocUnsafe(4);return i.writeUInt32BE(e,0),i}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17}],42:[function(t,e,i){e.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(t,e,i){const r=t("bl"),n=t("events"),o=t("./packet"),s=t("./constants"),a=t("debug")("mqtt-packet:parser");class l extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof l?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new l).parser(t)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=r(),this._stateCounter=0}parse(t){for(this.error&&this._resetState(),this._list.append(t),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const t=this._list.readUInt8(0);return this.packet.cmd=s.types[t>>s.CMD_SHIFT],this.packet.retain=0!=(t&s.RETAIN_MASK),this.packet.qos=t>>s.QOS_SHIFT&s.QOS_MASK,this.packet.dup=0!=(t&s.DUP_MASK),a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const t=this._parseVarByteNum(!0);return t&&(this.packet.length=t.value,this._list.consume(t.bytes)),a("_parseLength %d",t.value),!!t}_parsePayload(){a("_parsePayload: payload %O",this._list);let t=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}t=!0}return a("_parsePayload complete result: %s",t),t}_parseConnect(){let t,e,i,r;a("_parseConnect");const n={},o=this.packet,l=this._parseString();if(null===l)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(new Error("Invalid protocolId"));if(o.protocolId=l,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(o.protocolVersion=this._list.readUInt8(this._pos),o.protocolVersion>=128&&(o.bridgeMode=!0,o.protocolVersion=o.protocolVersion-128),3!==o.protocolVersion&&4!==o.protocolVersion&&5!==o.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(n.username=this._list.readUInt8(this._pos)&s.USERNAME_MASK,n.password=this._list.readUInt8(this._pos)&s.PASSWORD_MASK,n.will=this._list.readUInt8(this._pos)&s.WILL_FLAG_MASK,n.will&&(o.will={},o.will.retain=0!=(this._list.readUInt8(this._pos)&s.WILL_RETAIN_MASK),o.will.qos=(this._list.readUInt8(this._pos)&s.WILL_QOS_MASK)>>s.WILL_QOS_SHIFT),o.clean=0!=(this._list.readUInt8(this._pos)&s.CLEAN_SESSION_MASK),this._pos++,o.keepalive=this._parseNum(),-1===o.keepalive)return this._emitError(new Error("Packet too short"));if(5===o.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(o.properties=t)}const h=this._parseString();if(null===h)return this._emitError(new Error("Packet too short"));if(o.clientId=h,a("_parseConnect: packet.clientId: %s",o.clientId),n.will){if(5===o.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(o.will.properties=t)}if(t=this._parseString(),null===t)return this._emitError(new Error("Cannot parse will topic"));if(o.will.topic=t,a("_parseConnect: packet.will.topic: %s",o.will.topic),e=this._parseBuffer(),null===e)return this._emitError(new Error("Cannot parse will payload"));o.will.payload=e,a("_parseConnect: packet.will.paylaod: %s",o.will.payload)}if(n.username){if(r=this._parseString(),null===r)return this._emitError(new Error("Cannot parse username"));o.username=r,a("_parseConnect: packet.username: %s",o.username)}if(n.password){if(i=this._parseBuffer(),null===i)return this._emitError(new Error("Cannot parse password"));o.password=i}return this.settings=o,a("_parseConnect: complete"),o}_parseConnack(){a("_parseConnack");const t=this.packet;if(this._list.length<1)return null;if(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&s.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?t.reasonCode=this._list.readUInt8(this._pos++):t.reasonCode=0;else{if(this._list.length<2)return null;t.returnCode=this._list.readUInt8(this._pos++)}if(-1===t.returnCode||-1===t.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");const t=this.packet;if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));if(!(t.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}t.payload=this._list.slice(this._pos,t.length),a("_parsePublish: payload from buffer list: %o",t.payload)}}_parseSubscribe(){a("_parseSubscribe");const t=this.packet;let e,i,r,n,o,l,h;if(1!==t.qos)return this._emitError(new Error("Wrong subscribe header"));if(t.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<t.length;){if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=t.length)return this._emitError(new Error("Malformed Subscribe Payload"));i=this._parseByte(),r=i&s.SUBSCRIBE_OPTIONS_QOS_MASK,l=0!=(i>>s.SUBSCRIBE_OPTIONS_NL_SHIFT&s.SUBSCRIBE_OPTIONS_NL_MASK),o=0!=(i>>s.SUBSCRIBE_OPTIONS_RAP_SHIFT&s.SUBSCRIBE_OPTIONS_RAP_MASK),n=i>>s.SUBSCRIBE_OPTIONS_RH_SHIFT&s.SUBSCRIBE_OPTIONS_RH_MASK,h={topic:e,qos:r},5===this.settings.protocolVersion?(h.nl=l,h.rap=o,h.rh=n):this.settings.bridgeMode&&(h.rh=0,h.rap=!0,h.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",h),t.subscriptions.push(h)}}}_parseSuback(){a("_parseSuback");const t=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){a("_parseUnsubscribe");const t=this.packet;if(t.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}for(;this._pos<t.length;){const e=this._parseString();if(null===e)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",e),t.unsubscriptions.push(e)}}}_parseUnsuback(){a("_parseUnsuback");const t=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const e=this._parseProperties();for(Object.getOwnPropertyNames(e).length&&(t.properties=e),t.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const t=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(t.length>2?(t.reasonCode=this._parseByte(),a("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)):t.reasonCode=0,t.length>3)){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return!0}_parseDisconnect(){const t=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?t.reasonCode=this._parseByte():t.reasonCode=0;const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(t.properties=e)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");const t=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));t.reasonCode=this._parseByte();const e=this._parseProperties();return Object.getOwnPropertyNames(e).length&&(t.properties=e),a("_parseAuth: result: true"),!0}_parseMessageId(){const t=this.packet;return t.messageId=this._parseNum(),null===t.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",t.messageId),!0)}_parseString(t){const e=this._parseNum(),i=e+this._pos;if(-1===e||i>this._list.length||i>this.packet.length)return null;const r=this._list.toString("utf8",this._pos,i);return this._pos+=e,a("_parseString: result: %s",r),r}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const t=this._parseNum(),e=t+this._pos;if(-1===t||e>this._list.length||e>this.packet.length)return null;const i=this._list.slice(this._pos,e);return this._pos+=t,a("_parseBuffer: result: %o",i),i}_parseNum(){if(this._list.length-this._pos<2)return-1;const t=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",t),t}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const t=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",t),t}_parseVarByteNum(t){a("_parseVarByteNum");let e,i=0,r=1,n=0,o=!1;const l=this._pos?this._pos:0;for(;i<4&&l+i<this._list.length;){if(e=this._list.readUInt8(l+i++),n+=r*(e&s.VARBYTEINT_MASK),r*=128,0==(e&s.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=i)break}return!o&&4===i&&this._list.length>=i&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=i),o=!!o&&(t?{bytes:i,value:n}:n),a("_parseVarByteNum: result: %o",o),o}_parseByte(){let t;return this._pos<this._list.length&&(t=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",t),t}_parseByType(t){switch(a("_parseByType: type: %s",t),t){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");const t=this._parseVarByteNum(),e=this._pos+t,i={};for(;this._pos<e;){const t=this._parseByte();if(!t)return this._emitError(new Error("Cannot parse property code type")),!1;const e=s.propertiesCodes[t];if(!e)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==e)i[e]?(Array.isArray(i[e])||(i[e]=[i[e]]),i[e].push(this._parseByType(s.propertiesTypes[e]))):i[e]=this._parseByType(s.propertiesTypes[e]);else{i[e]||(i[e]=Object.create(null));const t=this._parseByType(s.propertiesTypes[e]);if(i[e][t.name])if(Array.isArray(i[e][t.name]))i[e][t.name].push(t.value);else{const r=i[e][t.name];i[e][t.name]=[r],i[e][t.name].push(t.value)}else i[e][t.name]=t.value}}return i}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new o,this._pos=0,!0}_emitError(t){a("_emitError"),this.error=t,this.emit("error",t)}}e.exports=l},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(t,e,i){(function(i){(function(){const r=t("./constants"),n=i.allocUnsafe(0),o=i.from([0]),s=t("./numbers"),a=t("process-nextick-args").nextTick,l=t("debug")("mqtt-packet:writeToStream"),h=s.cache,c=s.generateNumber,u=s.generateCache,f=s.genBufVariableByteInt,d=s.generate4ByteBuffer;let p=x,g=!0;function m(t,e,s){switch(l("generate called"),e.cork&&(e.cork(),a(b,e)),g&&(g=!1,u()),l("generate: packet.cmd: %s",t.cmd),t.cmd){case"connect":return function(t,e,n){const o=t||{},s=o.protocolId||"MQTT";let a=o.protocolVersion||4;const l=o.will;let h=o.clean;const c=o.keepalive||0,u=o.clientId||"",f=o.username,d=o.password,g=o.properties;void 0===h&&(h=!0);let m=0;if(!s||"string"!=typeof s&&!i.isBuffer(s))return e.emit("error",new Error("Invalid protocolId")),!1;if(m+=s.length+2,3!==a&&4!==a&&5!==a)return e.emit("error",new Error("Invalid protocol version")),!1;if(m+=1,("string"==typeof u||i.isBuffer(u))&&(u||a>=4)&&(u||h))m+=i.byteLength(u)+2;else{if(a<4)return e.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*h==0)return e.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof c||c<0||c>65535||c%1!=0)return e.emit("error",new Error("Invalid keepalive")),!1;if(m+=2,m+=1,5===a){var b=C(e,g);if(!b)return!1;m+=b.length}if(l){if("object"!=typeof l)return e.emit("error",new Error("Invalid will")),!1;if(!l.topic||"string"!=typeof l.topic)return e.emit("error",new Error("Invalid will topic")),!1;if(m+=i.byteLength(l.topic)+2,m+=2,l.payload){if(!(l.payload.length>=0))return e.emit("error",new Error("Invalid will payload")),!1;"string"==typeof l.payload?m+=i.byteLength(l.payload):m+=l.payload.length}var y={};if(5===a){if(!(y=C(e,l.properties)))return!1;m+=y.length}}let w=!1;if(null!=f){if(!P(f))return e.emit("error",new Error("Invalid username")),!1;w=!0,m+=i.byteLength(f)+2}if(null!=d){if(!w)return e.emit("error",new Error("Username is required to use password")),!1;if(!P(d))return e.emit("error",new Error("Invalid password")),!1;m+=A(d)+2}e.write(r.CONNECT_HEADER),v(e,m),S(e,s),o.bridgeMode&&(a+=128),e.write(131===a?r.VERSION131:132===a?r.VERSION132:4===a?r.VERSION4:5===a?r.VERSION5:r.VERSION3);let x=0;return x|=null!=f?r.USERNAME_MASK:0,x|=null!=d?r.PASSWORD_MASK:0,x|=l&&l.retain?r.WILL_RETAIN_MASK:0,x|=l&&l.qos?l.qos<<r.WILL_QOS_SHIFT:0,x|=l?r.WILL_FLAG_MASK:0,x|=h?r.CLEAN_SESSION_MASK:0,e.write(i.from([x])),p(e,c),5===a&&b.write(),S(e,u),l&&(5===a&&y.write(),_(e,l.topic),S(e,l.payload)),null!=f&&S(e,f),null!=d&&S(e,d),!0}(t,e);case"connack":return function(t,e,n){const s=n?n.protocolVersion:4,a=t||{},l=5===s?a.reasonCode:a.returnCode,h=a.properties;let c=2;if("number"!=typeof l)return e.emit("error",new Error("Invalid return code")),!1;let u=null;if(5===s){if(u=C(e,h),!u)return!1;c+=u.length}return e.write(r.CONNACK_HEADER),v(e,c),e.write(a.sessionPresent?r.SESSIONPRESENT_HEADER:o),e.write(i.from([l])),null!=u&&u.write(),!0}(t,e,s);case"publish":return function(t,e,o){l("publish: packet: %o",t);const s=o?o.protocolVersion:4,a=t||{},h=a.qos||0,c=a.retain?r.RETAIN_MASK:0,u=a.topic,f=a.payload||n,d=a.messageId,g=a.properties;let m=0;if("string"==typeof u)m+=i.byteLength(u)+2;else{if(!i.isBuffer(u))return e.emit("error",new Error("Invalid topic")),!1;m+=u.length+2}if(i.isBuffer(f)?m+=f.length:m+=i.byteLength(f),h&&"number"!=typeof d)return e.emit("error",new Error("Invalid messageId")),!1;h&&(m+=2);let b=null;if(5===s){if(b=C(e,g),!b)return!1;m+=b.length}return e.write(r.PUBLISH_HEADER[h][a.dup?1:0][c?1:0]),v(e,m),p(e,A(u)),e.write(u),h>0&&p(e,d),null!=b&&b.write(),l("publish: payload: %o",f),e.write(f)}(t,e,s);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(t,e,n){const o=n?n.protocolVersion:4,s=t||{},a=s.cmd||"puback",l=s.messageId,h=s.dup&&"pubrel"===a?r.DUP_MASK:0;let c=0;const u=s.reasonCode,f=s.properties;let d=5===o?3:2;if("pubrel"===a&&(c=1),"number"!=typeof l)return e.emit("error",new Error("Invalid messageId")),!1;let g=null;if(5===o&&"object"==typeof f){if(g=E(e,f,n,d),!g)return!1;d+=g.length}return e.write(r.ACKS[a][c][h][0]),v(e,d),p(e,l),5===o&&e.write(i.from([u])),null!==g&&g.write(),!0}(t,e,s);case"subscribe":return function(t,e,n){l("subscribe: packet: ");const o=n?n.protocolVersion:4,s=t||{},a=s.dup?r.DUP_MASK:0,h=s.messageId,c=s.subscriptions,u=s.properties;let f=0;if("number"!=typeof h)return e.emit("error",new Error("Invalid messageId")),!1;f+=2;let d=null;if(5===o){if(d=C(e,u),!d)return!1;f+=d.length}if("object"!=typeof c||!c.length)return e.emit("error",new Error("Invalid subscriptions")),!1;for(let t=0;t<c.length;t+=1){const r=c[t].topic,n=c[t].qos;if("string"!=typeof r)return e.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof n)return e.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===o){if("boolean"!=typeof(c[t].nl||!1))return e.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(c[t].rap||!1))return e.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const i=c[t].rh||0;if("number"!=typeof i||i>2)return e.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}f+=i.byteLength(r)+2+1}l("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),e.write(r.SUBSCRIBE_HEADER[1][a?1:0][0]),v(e,f),p(e,h),null!==d&&d.write();let g=!0;for(const t of c){const n=t.topic,s=t.qos,a=+t.nl,l=+t.rap,h=t.rh;let c;_(e,n),c=r.SUBSCRIBE_OPTIONS_QOS[s],5===o&&(c|=a?r.SUBSCRIBE_OPTIONS_NL:0,c|=l?r.SUBSCRIBE_OPTIONS_RAP:0,c|=h?r.SUBSCRIBE_OPTIONS_RH[h]:0),g=e.write(i.from([c]))}return g}(t,e,s);case"suback":return function(t,e,n){const o=n?n.protocolVersion:4,s=t||{},a=s.messageId,l=s.granted,h=s.properties;let c=0;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(c+=2,"object"!=typeof l||!l.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<l.length;t+=1){if("number"!=typeof l[t])return e.emit("error",new Error("Invalid qos vector")),!1;c+=1}let u=null;if(5===o){if(u=E(e,h,n,c),!u)return!1;c+=u.length}return e.write(r.SUBACK_HEADER),v(e,c),p(e,a),null!==u&&u.write(),e.write(i.from(l))}(t,e,s);case"unsubscribe":return function(t,e,n){const o=n?n.protocolVersion:4,s=t||{},a=s.messageId,l=s.dup?r.DUP_MASK:0,h=s.unsubscriptions,c=s.properties;let u=0;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof h||!h.length)return e.emit("error",new Error("Invalid unsubscriptions")),!1;for(let t=0;t<h.length;t+=1){if("string"!=typeof h[t])return e.emit("error",new Error("Invalid unsubscriptions")),!1;u+=i.byteLength(h[t])+2}let f=null;if(5===o){if(f=C(e,c),!f)return!1;u+=f.length}e.write(r.UNSUBSCRIBE_HEADER[1][l?1:0][0]),v(e,u),p(e,a),null!==f&&f.write();let d=!0;for(let t=0;t<h.length;t++)d=_(e,h[t]);return d}(t,e,s);case"unsuback":return function(t,e,n){const o=n?n.protocolVersion:4,s=t||{},a=s.messageId,l=s.dup?r.DUP_MASK:0,h=s.granted,c=s.properties,u=s.cmd,f=0;let d=2;if("number"!=typeof a)return e.emit("error",new Error("Invalid messageId")),!1;if(5===o){if("object"!=typeof h||!h.length)return e.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<h.length;t+=1){if("number"!=typeof h[t])return e.emit("error",new Error("Invalid qos vector")),!1;d+=1}}let g=null;if(5===o){if(g=E(e,c,n,d),!g)return!1;d+=g.length}return e.write(r.ACKS[u][f][l][0]),v(e,d),p(e,a),null!==g&&g.write(),5===o&&e.write(i.from(h)),!0}(t,e,s);case"pingreq":case"pingresp":return function(t,e,i){return e.write(r.EMPTY[t.cmd])}(t,e);case"disconnect":return function(t,e,n){const o=n?n.protocolVersion:4,s=t||{},a=s.reasonCode,l=s.properties;let h=5===o?1:0,c=null;if(5===o){if(c=E(e,l,n,h),!c)return!1;h+=c.length}return e.write(i.from([r.codes.disconnect<<4])),v(e,h),5===o&&e.write(i.from([a])),null!==c&&c.write(),!0}(t,e,s);case"auth":return function(t,e,n){const o=n?n.protocolVersion:4,s=t||{},a=s.reasonCode,l=s.properties;let h=5===o?1:0;5!==o&&e.emit("error",new Error("Invalid mqtt version for auth packet"));const c=E(e,l,n,h);return!!c&&(h+=c.length,e.write(i.from([r.codes.auth<<4])),v(e,h),e.write(i.from([a])),null!==c&&c.write(),!0)}(t,e,s);default:return e.emit("error",new Error("Unknown command")),!1}}function b(t){t.uncork()}Object.defineProperty(m,"cacheNumbers",{get:()=>p===x,set(t){t?(h&&0!==Object.keys(h).length||(g=!0),p=x):(g=!1,p=k)}});const y={};function v(t,e){if(e>r.VARBYTEINT_MAX)return t.emit("error",new Error(`Invalid variable byte integer: ${e}`)),!1;let i=y[e];return i||(i=f(e),e<16384&&(y[e]=i)),l("writeVarByteInt: writing to stream: %o",i),t.write(i)}function _(t,e){const r=i.byteLength(e);return p(t,r),l("writeString: %s",e),t.write(e,"utf8")}function w(t,e,i){_(t,e),_(t,i)}function x(t,e){return l("writeNumberCached: number: %d",e),l("writeNumberCached: %o",h[e]),t.write(h[e])}function k(t,e){const i=c(e);return l("writeNumberGenerated: %o",i),t.write(i)}function S(t,e){"string"==typeof e?_(t,e):e?(p(t,e.length),t.write(e)):p(t,0)}function C(t,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){T(t,{},0)}};let n=0;function o(e,n){let o=0;switch(r.propertiesTypes[e]){case"byte":if("boolean"!=typeof n)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=2;break;case"int8":if("number"!=typeof n||n<0||n>255)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=2;break;case"binary":if(n&&null===n)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=1+i.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||n>65535)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=3;break;case"int32":if("number"!=typeof n||n<0||n>4294967295)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=5;break;case"var":if("number"!=typeof n||n<0||n>268435455)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=1+i.byteLength(f(n));break;case"string":if("string"!=typeof n)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=3+i.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return t.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;o+=Object.getOwnPropertyNames(n).reduce(((t,e)=>{const r=n[e];return Array.isArray(r)?t+=r.reduce(((t,r)=>t+(3+i.byteLength(e.toString())+2+i.byteLength(r.toString()))),0):t+=3+i.byteLength(e.toString())+2+i.byteLength(n[e].toString()),t}),0);break;default:return t.emit("error",new Error(`Invalid property ${e}: ${n}`)),!1}return o}if(e)for(const t in e){let i=0,r=0;const s=e[t];if(Array.isArray(s))for(let e=0;e<s.length;e++){if(r=o(t,s[e]),!r)return!1;i+=r}else{if(r=o(t,s),!r)return!1;i=r}if(!i)return!1;n+=i}return{length:i.byteLength(f(n))+n,write(){T(t,e,n)}}}function E(t,e,i,r){const n=["reasonString","userProperties"],o=i&&i.properties&&i.properties.maximumPacketSize?i.properties.maximumPacketSize:0;let s=C(t,e);if(o)for(;r+s.length>o;){const i=n.shift();if(!i||!e[i])return!1;delete e[i],s=C(t,e)}return s}function M(t,e,n){switch(r.propertiesTypes[e]){case"byte":t.write(i.from([r.properties[e]])),t.write(i.from([+n]));break;case"int8":t.write(i.from([r.properties[e]])),t.write(i.from([n]));break;case"binary":t.write(i.from([r.properties[e]])),S(t,n);break;case"int16":t.write(i.from([r.properties[e]])),p(t,n);break;case"int32":t.write(i.from([r.properties[e]])),function(t,e){const i=d(e);l("write4ByteNumber: %o",i),t.write(i)}(t,n);break;case"var":t.write(i.from([r.properties[e]])),v(t,n);break;case"string":t.write(i.from([r.properties[e]])),_(t,n);break;case"pair":Object.getOwnPropertyNames(n).forEach((o=>{const s=n[o];Array.isArray(s)?s.forEach((n=>{t.write(i.from([r.properties[e]])),w(t,o.toString(),n.toString())})):(t.write(i.from([r.properties[e]])),w(t,o.toString(),s.toString()))}));break;default:return t.emit("error",new Error(`Invalid property ${e} value: ${n}`)),!1}}function T(t,e,i){v(t,i);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&null!==e[i]){const r=e[i];if(Array.isArray(r))for(let e=0;e<r.length;e++)M(t,i,r[e]);else M(t,i,r)}}function A(t){return t?t instanceof i?t.length:i.byteLength(t):0}function P(t){return"string"==typeof t||t instanceof i}e.exports=m}).call(this)}).call(this,t("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(t,e,i){var r=1e3,n=60*r,o=60*n,s=24*o;function a(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}e.exports=function(t,e){e=e||{};var i,l,h=typeof t;if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*s;case"hours":case"hour":case"hrs":case"hr":case"h":return i*o;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(t);if("number"===h&&isFinite(t))return e.long?(i=t,(l=Math.abs(i))>=s?a(i,l,s,"day"):l>=o?a(i,l,o,"hour"):l>=n?a(i,l,n,"minute"):l>=r?a(i,l,r,"second"):i+" ms"):function(t){var e=Math.abs(t);return e>=s?Math.round(t/s)+"d":e>=o?Math.round(t/o)+"h":e>=n?Math.round(t/n)+"m":e>=r?Math.round(t/r)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],46:[function(t,e,i){const r=t("./lib/number-allocator.js");e.exports.NumberAllocator=r},{"./lib/number-allocator.js":47}],47:[function(t,e,i){"use strict";const r=t("js-sdsl").Set,n=t("debug")("number-allocator:trace"),o=t("debug")("number-allocator:error");function s(t,e){this.low=t,this.high=e}function a(t,e){if(!(this instanceof a))return new a(t,e);this.min=t,this.max=e,this.ss=new r([],((t,e)=>t.compare(e))),n("Create"),this.clear()}s.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},s.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0},a.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},a.prototype.alloc=function(){if(0===this.ss.size())return n("alloc():empty"),null;const t=this.ss.front(),e=t.low;return e+1<=t.high?++t.low:this.ss.eraseElementByPos(0),n("alloc():"+e),e},a.prototype.use=function(t){const e=new s(t,t),i=this.ss.lowerBound(e);if(i){if(i.equals(e))return this.ss.eraseElementByValue(i),n("use():"+t),!0;if(i.low>t)return!1;if(i.low===t)return++i.low,n("use():"+t),!0;if(i.high===t)return--i.high,n("use():"+t),!0;const r=i.low;return i.low=t+1,this.ss.insert(new s(r,t-1)),n("use():"+t),!0}return n("use():failed"),!1},a.prototype.free=function(t){if(t<this.min||t>this.max)return void o("free():"+t+" is out of range");const e=new s(t,t),i=this.ss.lowerBound(e);if(i){if(i.low<=t&&t<=i.high)return void o("free():"+t+" has already been vacant");if(i===this.ss.front())t+1===i.low?--i.low:this.ss.insert(e);else{const r=this.ss.reverseLowerBound(e);r.high+1===t?t+1===i.low?(this.ss.eraseElementByValue(r),i.low=r.low):r.high=t:t+1===i.low?i.low=t:this.ss.insert(e)}}else{if(i===this.ss.front())return void this.ss.insert(e);const r=this.ss.reverseLowerBound(e);r.high+1===t?r.high=t:this.ss.insert(e)}n("free():"+t)},a.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new s(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)},e.exports=a},{debug:18,"js-sdsl":36}],48:[function(t,e,i){var r=t("wrappy");function n(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},i=t.name||"Function wrapped with `once`";return e.onceError=i+" shouldn't be called more than once",e.called=!1,e}e.exports=r(n),e.exports.strict=r(o),n.proto=n((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},{wrappy:79}],49:[function(t,e,i){(function(t){(function(){"use strict";void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,i,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,i)}));case 3:return t.nextTick((function(){e.call(null,i,r)}));case 4:return t.nextTick((function(){e.call(null,i,r,n)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this)}).call(this,t("_process"))},{_process:50}],50:[function(t,e,i){var r,n,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var h,c=[],u=!1,f=-1;function d(){u&&h&&(u=!1,h.length?c=h.concat(c):f=-1,c.length&&p())}function p(){if(!u){var t=l(d);u=!0;for(var e=c.length;e;){for(h=c,c=[];++f<e;)h&&h[f].run();f=-1,e=c.length}h=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new g(t,e)),1!==c.length||u||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],51:[function(t,e,r){(function(t){(function(){!function(i){var n="object"==typeof r&&r&&!r.nodeType&&r,o="object"==typeof e&&e&&!e.nodeType&&e,s="object"==typeof t&&t;s.global!==s&&s.window!==s&&s.self!==s||(i=s);var a,l,h=2147483647,c=36,u=1,f=26,d=38,p=700,g=72,m=128,b="-",y=/^xn--/,v=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=c-u,k=Math.floor,S=String.fromCharCode;function C(t){throw new RangeError(w[t])}function E(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function M(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+E((t=t.replace(_,".")).split("."),e).join(".")}function T(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function A(t){return E(t,(function(t){var e="";return t>65535&&(e+=S((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+S(t)})).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function O(t,e,i){var r=0;for(t=i?k(t/p):t>>1,t+=k(t/e);t>x*f>>1;r+=c)t=k(t/x);return k(r+(x+1)*t/(t+d))}function I(t){var e,i,r,n,o,s,a,l,d,p,y,v=[],_=t.length,w=0,x=m,S=g;for((i=t.lastIndexOf(b))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&C("not-basic"),v.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<_;){for(o=w,s=1,a=c;n>=_&&C("invalid-input"),((l=(y=t.charCodeAt(n++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||l>k((h-w)/s))&&C("overflow"),w+=l*s,!(l<(d=a<=S?u:a>=S+f?f:a-S));a+=c)s>k(h/(p=c-d))&&C("overflow"),s*=p;S=O(w-o,e=v.length+1,0==o),k(w/e)>h-x&&C("overflow"),x+=k(w/e),w%=e,v.splice(w++,0,x)}return A(v)}function R(t){var e,i,r,n,o,s,a,l,d,p,y,v,_,w,x,E=[];for(v=(t=T(t)).length,e=m,i=0,o=g,s=0;s<v;++s)(y=t[s])<128&&E.push(S(y));for(r=n=E.length,n&&E.push(b);r<v;){for(a=h,s=0;s<v;++s)(y=t[s])>=e&&y<a&&(a=y);for(a-e>k((h-i)/(_=r+1))&&C("overflow"),i+=(a-e)*_,e=a,s=0;s<v;++s)if((y=t[s])<e&&++i>h&&C("overflow"),y==e){for(l=i,d=c;!(l<(p=d<=o?u:d>=o+f?f:d-o));d+=c)x=l-p,w=c-p,E.push(S(P(p+x%w,0))),l=k(x/w);E.push(S(P(l,0))),o=O(i,_,r==n),i=0,++r}++i,++e}return E.join("")}if(a={version:"1.4.1",ucs2:{decode:T,encode:A},decode:I,encode:R,toASCII:function(t){return M(t,(function(t){return v.test(t)?"xn--"+R(t):t}))},toUnicode:function(t){return M(t,(function(t){return y.test(t)?I(t.slice(4).toLowerCase()):t}))}},n&&o)if(e.exports==n)o.exports=a;else for(l in a)a.hasOwnProperty(l)&&(n[l]=a[l]);else i.punycode=a}(this)}).call(this)}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(t,e,i){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=t.length;l>0&&h>l&&(h=l);for(var c=0;c<h;++c){var u,f,d,p,g=t[c].replace(a,"%20"),m=g.indexOf(i);m>=0?(u=g.substr(0,m),f=g.substr(m+1)):(u=g,f=""),d=decodeURIComponent(u),p=decodeURIComponent(f),r(s,d)?n(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],53:[function(t,e,i){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(r(s))+i;return n(t[s])?o(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],54:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":52,"./encode":53}],55:[function(t,e,i){"use strict";var r={};function n(t,e,i){i||(i=Error);var n=function(t){function i(i,r,n){return t.call(this,function(t,i,r){return"string"==typeof e?e:e(t,i,r)}(i,r,n))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i;var r,n}(i);n.prototype.name=i.name,n.prototype.code=t,r[t]=n}function o(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,n,s,a;if("string"==typeof e&&(s="not ",e.substr(!a||a<0?0:+a,s.length)===s)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}(t," argument"))n="The ".concat(t," ").concat(r," ").concat(o(e,"type"));else{var l=function(t,e,i){return"number"!=typeof i&&(i=0),!(i+e.length>t.length)&&-1!==t.indexOf(e,i)}(t,".")?"property":"argument";n='The "'.concat(t,'" ').concat(l," ").concat(r," ").concat(o(e,"type"))}return n+". Received type ".concat(typeof i)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},{}],56:[function(t,e,i){(function(i){(function(){"use strict";var r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};e.exports=h;var n=t("./_stream_readable"),o=t("./_stream_writable");t("inherits")(h,n);for(var s=r(o.prototype),a=0;a<s.length;a++){var l=s[a];h.prototype[l]||(h.prototype[l]=o.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);n.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||i.nextTick(u,this)}function u(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(t,e,i){"use strict";e.exports=n;var r=t("./_stream_transform");function n(t){if(!(this instanceof n))return new n(t);r.call(this,t)}t("inherits")(n,r),n.prototype._transform=function(t,e,i){i(null,t)}},{"./_stream_transform":59,inherits:24}],58:[function(t,e,r){(function(i,r){(function(){"use strict";var n;e.exports=C,C.ReadableState=S,t("events").EventEmitter;var o=function(t,e){return t.listeners(e).length},s=t("./internal/streams/stream"),a=t("buffer").Buffer,l=r.Uint8Array||function(){};var h,c=t("util");h=c&&c.debuglog?c.debuglog("stream"):function(){};var u,f,d,p=t("./internal/streams/buffer_list"),g=t("./internal/streams/destroy"),m=t("./internal/streams/state").getHighWaterMark,b=t("../errors").codes,y=b.ERR_INVALID_ARG_TYPE,v=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(C,s);var x=g.errorOrDestroy,k=["error","close","destroy","pause","resume"];function S(e,i,r){n=n||t("./_stream_duplex"),e=e||{},"boolean"!=typeof r&&(r=i instanceof n),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=t("string_decoder/").StringDecoder),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function C(e){if(n=n||t("./_stream_duplex"),!(this instanceof C))return new C(e);var i=this instanceof n;this._readableState=new S(e,this,i),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function E(t,e,i,r,n){h("readableAddChunk",e);var o,s=t._readableState;if(null===e)s.reading=!1,function(t,e){if(h("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?P(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,O(t)))}}(t,s);else if(n||(o=function(t,e){var i;return r=e,a.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(i=new y("chunk",["string","Buffer","Uint8Array"],e)),i;var r}(s,e)),o)x(t,o);else if(s.objectMode||e&&e.length>0)if("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),r)s.endEmitted?x(t,new w):M(t,s,e,!0);else if(s.ended)x(t,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!i?(e=s.decoder.write(e),s.objectMode||0!==e.length?M(t,s,e,!1):I(t,s)):M(t,s,e,!1)}else r||(s.reading=!1,I(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function M(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&P(t)),I(t,e)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),C.prototype.destroy=g.destroy,C.prototype._undestroy=g.undestroy,C.prototype._destroy=function(t,e){e(t)},C.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=a.from(t,e),e=""),i=!0),E(this,t,e,!1,i)},C.prototype.unshift=function(t){return E(this,t,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){u||(u=t("string_decoder/").StringDecoder);var i=new u(e);this._readableState.decoder=i,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=i.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var T=1073741824;function A(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function P(t){var e=t._readableState;h("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,i.nextTick(O,t))}function O(t){var e=t._readableState;h("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function I(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(R,t,e))}function R(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(h("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function L(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function D(t){h("readable nexttick read 0"),t.read(0)}function B(t,e){h("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function j(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function z(t){var e=t._readableState;h("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,i.nextTick(F,e,t))}function F(t,e){if(h("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function V(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}C.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?z(this):P(this),null;if(0===(t=A(t,e))&&e.ended)return 0===e.length&&z(this),null;var r,n=e.needReadable;return h("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",n=!0),e.ended||e.reading?h("reading or ended",n=!1):n&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=A(i,e))),null===(r=t>0?j(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&z(this)),null!==r&&this.emit("data",r),r},C.prototype._read=function(t){x(this,new _("_read()"))},C.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,h("pipe count=%d opts=%j",n.pipesCount,e);var s=e&&!1===e.end||t===i.stdout||t===i.stderr?m:l;function a(e,i){h("onunpipe"),e===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",c),t.removeListener("error",d),t.removeListener("unpipe",a),r.removeListener("end",l),r.removeListener("end",m),r.removeListener("data",f),u=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}function l(){h("onend"),t.end()}n.endEmitted?i.nextTick(s):r.once("end",s),t.on("unpipe",a);var c=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(r);t.on("drain",c);var u=!1;function f(e){h("ondata");var i=t.write(e);h("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==V(n.pipes,t))&&!u&&(h("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(e){h("onerror",e),m(),t.removeListener("error",d),0===o(t,"error")&&x(t,e)}function p(){t.removeListener("finish",g),m()}function g(){h("onfinish"),t.removeListener("close",p),m()}function m(){h("unpipe"),r.unpipe(t)}return r.on("data",f),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",d),t.once("close",p),t.once("finish",g),t.emit("pipe",r),n.flowing||(h("pipe resume"),r.resume()),t},C.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<n;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=V(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},C.prototype.on=function(t,e){var r=s.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,h("on readable",n.length,n.reading),n.length?P(this):n.reading||i.nextTick(D,this))),r},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(t,e){var r=s.prototype.removeListener.call(this,t,e);return"readable"===t&&i.nextTick(L,this),r},C.prototype.removeAllListeners=function(t){var e=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick(L,this),e},C.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(B,t,e))}(this,t)),t.paused=!1,this},C.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",(function(){if(h("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(n){h("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n||(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))})),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<k.length;o++)t.on(k[o],this.emit.bind(this,k[o]));return this._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=t("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),C._fromList=j,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(e,i){return void 0===d&&(d=t("./internal/streams/from")),d(C,e,i)})}).call(this)}).call(this,t("_process"),void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(t,e,i){"use strict";e.exports=c;var r=t("../errors").codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=t("./_stream_duplex");function h(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new o);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function c(t){if(!(this instanceof c))return new c(t);l.call(this,t),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",u)}function u(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,i){f(t,e,i)}))}function f(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}t("inherits")(c,l),c.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},c.prototype._transform=function(t,e,i){i(new n("_transform()"))},c.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},c.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,(function(t){e(t)}))}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(t,e,r){(function(i,r){(function(){"use strict";function n(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var o;e.exports=C,C.WritableState=S;var s={deprecate:t("util-deprecate")},a=t("./internal/streams/stream"),l=t("buffer").Buffer,h=r.Uint8Array||function(){};var c,u=t("./internal/streams/destroy"),f=t("./internal/streams/state").getHighWaterMark,d=t("../errors").codes,p=d.ERR_INVALID_ARG_TYPE,g=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,b=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,_=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,x=u.errorOrDestroy;function k(){}function S(e,r,s){o=o||t("./_stream_duplex"),e=e||{},"boolean"!=typeof s&&(s=r instanceof o),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new m;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,o){--e.pendingcb,r?(i.nextTick(o,n),i.nextTick(I,t,e),t._writableState.errorEmitted=!0,x(t,n)):(o(n),t._writableState.errorEmitted=!0,x(t,n),I(t,e))}(t,r,n,e,o);else{var s=P(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||A(t,r),n?i.nextTick(T,t,r,s,o):T(t,r,s,o)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function C(e){var i=this instanceof(o=o||t("./_stream_duplex"));if(!i&&!c.call(C,this))return new C(e);this._writableState=new S(e,this,i),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function E(t,e,i,r,n,o){if(!i){var s=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,i)),e}(e,r,n);r!==s&&(i=!0,n="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var h=e.length<e.highWaterMark;if(h||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else M(t,e,!1,a,r,n,o);return h}function M(t,e,i,r,n,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):i?t._writev(n,e.onwrite):t._write(n,o,e.onwrite),e.sync=!1}function T(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),I(t,e)}function A(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,o=new Array(r),s=e.corkedRequestsFree;s.entry=i;for(var a=0,l=!0;i;)o[a]=i,i.isBuf||(l=!1),i=i.next,a+=1;o.allBuffers=l,M(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new n(e),e.bufferedRequestCount=0}else{for(;i;){var h=i.chunk,c=i.encoding,u=i.callback;if(M(t,e,!1,e.objectMode?1:h.length,h,c,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function P(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final((function(i){e.pendingcb--,i&&x(t,i),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var r=P(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,i.nextTick(O,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}t("inherits")(C,a),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(t){return!!c.call(this,t)||this===C&&t&&t._writableState instanceof S}})):c=function(t){return t instanceof this},C.prototype.pipe=function(){x(this,new b)},C.prototype.write=function(t,e,r){var n,o=this._writableState,s=!1,a=!o.objectMode&&(n=t,l.isBuffer(n)||n instanceof h);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=k),o.ending?function(t,e){var r=new _;x(t,r),i.nextTick(e,r)}(this,r):(a||function(t,e,r,n){var o;return null===r?o=new v:"string"==typeof r||e.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(x(t,o),i.nextTick(n,o),!1)}(this,o,t,r))&&(o.pendingcb++,s=E(this,o,a,t,e,r)),s},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||A(this,t))},C.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(t,e,i){i(new g("_write()"))},C.prototype._writev=null,C.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,r){e.ending=!0,I(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),C.prototype.destroy=u.destroy,C.prototype._undestroy=u.undestroy,C.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,t("_process"),void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(t,e,i){(function(i){(function(){"use strict";var r;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=t("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),h=Symbol("ended"),c=Symbol("lastPromise"),u=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[s];if(null!==e){var i=t[f].read();null!==i&&(t[c]=null,t[s]=null,t[a]=null,e(d(i,!1)))}}function g(t){i.nextTick(p,t)}var m=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((n(r={get stream(){return this[f]},next:function(){var t=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[h])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(e,r){i.nextTick((function(){t[l]?r(t[l]):e(d(void 0,!0))}))}));var r,n=this[c];if(n)r=new Promise(function(t,e){return function(i,r){t.then((function(){e[h]?i(d(void 0,!0)):e[u](i,r)}),r)}}(n,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[u])}return this[c]=r,r}},Symbol.asyncIterator,(function(){return this})),n(r,"return",(function(){var t=this;return new Promise((function(e,i){t[f].destroy(null,(function(t){t?i(t):e(d(void 0,!0))}))}))})),r),m);e.exports=function(t){var e,i=Object.create(b,(n(e={},f,{value:t,writable:!0}),n(e,s,{value:null,writable:!0}),n(e,a,{value:null,writable:!0}),n(e,l,{value:null,writable:!0}),n(e,h,{value:t._readableState.endEmitted,writable:!0}),n(e,u,{value:function(t,e){var r=i[f].read();r?(i[c]=null,i[s]=null,i[a]=null,t(d(r,!1))):(i[s]=t,i[a]=e)},writable:!0}),e));return i[c]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=i[a];return null!==e&&(i[c]=null,i[s]=null,i[a]=null,e(t)),void(i[l]=t)}var r=i[s];null!==r&&(i[c]=null,i[s]=null,i[a]=null,r(d(void 0,!0))),i[h]=!0})),t.on("readable",g.bind(null,i)),i}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":64,_process:50}],62:[function(t,e,i){"use strict";function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=t("buffer").Buffer,a=t("util").inspect,l=a&&a.custom||"inspect";e.exports=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return e=t,i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return s.alloc(0);for(var e=s.allocUnsafe(t>>>0),i=this.head,r=0;i;)n=i.data,o=e,a=r,s.prototype.copy.call(n,o,a),r+=i.data.length,i=i.next;var n,o,a;return e}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var n=e.data,o=t>n.length?n.length:t;if(o===n.length?r+=n:r+=n.slice(0,t),0==(t-=o)){o===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(o));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=s.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var n=i.data,o=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,o),0==(t-=o)){o===n.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(o));break}++r}return this.length-=r,e}},{key:l,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}],i&&o(e.prototype,i),h&&o(e,h),t;var e,i,h}()},{buffer:17,util:16}],63:[function(t,e,i){(function(t){(function(){"use strict";function i(t,e){n(t,e),r(t)}function r(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function n(t,e){t.emit("error",e)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(n,this,e)):t.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(i,s,e)):t.nextTick(i,s,e):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,t("_process"))},{_process:50}],64:[function(t,e,i){"use strict";var r=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function n(){}e.exports=function t(e,i,o){if("function"==typeof i)return t(e,null,i);i||(i={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}(o||n);var s=i.readable||!1!==i.readable&&e.readable,a=i.writable||!1!==i.writable&&e.writable,l=function(){e.writable||c()},h=e._writableState&&e._writableState.finished,c=function(){a=!1,h=!0,s||o.call(e)},u=e._readableState&&e._readableState.endEmitted,f=function(){s=!1,u=!0,a||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return s&&!u?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):a&&!h?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},g=function(){e.req.on("finish",c)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",c),e.on("abort",p),e.req?g():e.on("request",g)):a&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",f),e.on("finish",c),!1!==i.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",c),e.removeListener("abort",p),e.removeListener("request",g),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},{"../../../errors":55}],65:[function(t,e,i){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(t,e,i){"use strict";var r;var n=t("../../../errors").codes,o=n.ERR_MISSING_ARGS,s=n.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function l(t){t()}function h(t,e){return t.pipe(e)}e.exports=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var c,u=function(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new o("streams");var f=i.map((function(e,n){var o=n<i.length-1;return function(e,i,n,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=t("./end-of-stream")),r(e,{readable:i,writable:n},(function(t){if(t)return o(t);a=!0,o()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}(e,o,n>0,(function(t){c||(c=t),t&&f.forEach(l),o||(f.forEach(l),u(c))}))}));return i.reduce(h)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(t,e,i){"use strict";var r=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(t,e,i,n){var o=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,n,i);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(n?i:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},{"../../../errors":55}],68:[function(t,e,i){e.exports=t("events").EventEmitter},{events:22}],69:[function(t,e,i){(i=e.exports=t("./lib/_stream_readable.js")).Stream=i,i.Readable=i,i.Writable=t("./lib/_stream_writable.js"),i.Duplex=t("./lib/_stream_duplex.js"),i.Transform=t("./lib/_stream_transform.js"),i.PassThrough=t("./lib/_stream_passthrough.js"),i.finished=t("./lib/internal/streams/end-of-stream.js"),i.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(t,e,i){"use strict";function r(t,e,i){var r=this;this._callback=t,this._args=i,this._interval=setInterval(t,e,this._args),this.reschedule=function(t){t||(t=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,t,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}e.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new r(arguments[0],arguments[1],t)}},{}],71:[function(t,e,i){"use strict";e.exports=t("./index.js")()},{"./index.js":72}],72:[function(t,e,i){(function(t){(function(){"use strict";function i(e){return e instanceof t?t.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}e.exports=function(t){return(t=t||{}).circles?function(t){var e=[],r=[];return t.proto?s:o;function n(t,n){for(var o=Object.keys(t),s=new Array(o.length),a=0;a<o.length;a++){var l=o[a],h=t[l];if("object"!=typeof h||null===h)s[l]=h;else if(h instanceof Date)s[l]=new Date(h);else if(ArrayBuffer.isView(h))s[l]=i(h);else{var c=e.indexOf(h);s[l]=-1!==c?r[c]:n(h)}}return s}function o(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return n(t,o);if(t instanceof Map)return new Map(n(Array.from(t),o));if(t instanceof Set)return new Set(n(Array.from(t),o));var s={};for(var a in e.push(t),r.push(s),t)if(!1!==Object.hasOwnProperty.call(t,a)){var l=t[a];if("object"!=typeof l||null===l)s[a]=l;else if(l instanceof Date)s[a]=new Date(l);else if(l instanceof Map)s[a]=new Map(n(Array.from(l),o));else if(l instanceof Set)s[a]=new Set(n(Array.from(l),o));else if(ArrayBuffer.isView(l))s[a]=i(l);else{var h=e.indexOf(l);s[a]=-1!==h?r[h]:o(l)}}return e.pop(),r.pop(),s}function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return n(t,s);if(t instanceof Map)return new Map(n(Array.from(t),s));if(t instanceof Set)return new Set(n(Array.from(t),s));var o={};for(var a in e.push(t),r.push(o),t){var l=t[a];if("object"!=typeof l||null===l)o[a]=l;else if(l instanceof Date)o[a]=new Date(l);else if(l instanceof Map)o[a]=new Map(n(Array.from(l),s));else if(l instanceof Set)o[a]=new Set(n(Array.from(l),s));else if(ArrayBuffer.isView(l))o[a]=i(l);else{var h=e.indexOf(l);o[a]=-1!==h?r[h]:s(l)}}return e.pop(),r.pop(),o}}(t):t.proto?function t(r){if("object"!=typeof r||null===r)return r;if(r instanceof Date)return new Date(r);if(Array.isArray(r))return e(r,t);if(r instanceof Map)return new Map(e(Array.from(r),t));if(r instanceof Set)return new Set(e(Array.from(r),t));var n={};for(var o in r){var s=r[o];"object"!=typeof s||null===s?n[o]=s:s instanceof Date?n[o]=new Date(s):s instanceof Map?n[o]=new Map(e(Array.from(s),t)):s instanceof Set?n[o]=new Set(e(Array.from(s),t)):ArrayBuffer.isView(s)?n[o]=i(s):n[o]=t(s)}return n}:function t(r){if("object"!=typeof r||null===r)return r;if(r instanceof Date)return new Date(r);if(Array.isArray(r))return e(r,t);if(r instanceof Map)return new Map(e(Array.from(r),t));if(r instanceof Set)return new Set(e(Array.from(r),t));var n={};for(var o in r)if(!1!==Object.hasOwnProperty.call(r,o)){var s=r[o];"object"!=typeof s||null===s?n[o]=s:s instanceof Date?n[o]=new Date(s):s instanceof Map?n[o]=new Map(e(Array.from(s),t)):s instanceof Set?n[o]=new Set(e(Array.from(s),t)):ArrayBuffer.isView(s)?n[o]=i(s):n[o]=t(s)}return n};function e(t,e){for(var r=Object.keys(t),n=new Array(r.length),o=0;o<r.length;o++){var s=r[o],a=t[s];"object"!=typeof a||null===a?n[s]=a:a instanceof Date?n[s]=new Date(a):ArrayBuffer.isView(a)?n[s]=i(a):n[s]=e(a)}return n}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:17}],73:[function(t,e,i){var r=t("buffer"),n=r.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function s(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,i),i.Buffer=s),s.prototype=Object.create(n.prototype),o(n,s),s.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},{buffer:17}],74:[function(t,e,i){e.exports=function(t){var e,i=t._readableState;return i?i.objectMode||"number"==typeof t._duplexState?t.read():t.read((e=i).buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length):null}},{}],75:[function(t,e,i){"use strict";var r=t("safe-buffer").Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=h,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=u,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function c(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}i.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=s(e[r]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--r<i||-2===n?0:(n=s(e[r]))>=0?(n>0&&(t.lastNeed=n-2),n):--r<i||-2===n?0:(n=s(e[r]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":73}],76:[function(t,e,i){"use strict";var r=t("punycode"),n=t("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=v,i.resolve=function(t,e){return v(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},i.format=function(t){return n.isString(t)&&(t=v(t)),t instanceof o?t.format():o.prototype.format.call(t)},i.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(h),u=["%","/","?",";","#"].concat(c),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=t("querystring");function v(t,e,i){if(t&&n.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,i),r}o.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var v=t=h.join(a);if(v=v.trim(),!i&&1===t.split("#").length){var _=l.exec(v);if(_)return this.path=v,this.href=v,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(v);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,v=v.substr(w.length)}if(i||w||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===v.substr(0,2);!k||w&&m[w]||(v=v.substr(2),this.slashes=!0)}if(!m[w]&&(k||w&&!b[w])){for(var S,C,E=-1,M=0;M<f.length;M++)-1!==(T=v.indexOf(f[M]))&&(-1===E||T<E)&&(E=T);for(-1!==(C=-1===E?v.lastIndexOf("@"):v.lastIndexOf("@",E))&&(S=v.slice(0,C),v=v.slice(C+1),this.auth=decodeURIComponent(S)),E=-1,M=0;M<u.length;M++){var T;-1!==(T=v.indexOf(u[M]))&&(-1===E||T<E)&&(E=T)}-1===E&&(E=v.length),this.host=v.slice(0,E),v=v.slice(E),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),O=(M=0,P.length);M<O;M++){var I=P[M];if(I&&!I.match(d)){for(var R="",L=0,D=I.length;L<D;L++)I.charCodeAt(L)>127?R+="x":R+=I[L];if(!R.match(d)){var B=P.slice(0,M),N=P.slice(M+1),j=I.match(p);j&&(B.push(j[1]),N.unshift(j[2])),N.length&&(v="/"+N.join(".")+v),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var z=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+z,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[x])for(M=0,O=c.length;M<O;M++){var V=c[M];if(-1!==v.indexOf(V)){var U=encodeURIComponent(V);U===V&&(U=escape(V)),v=v.split(V).join(U)}}var W=v.indexOf("#");-1!==W&&(this.hash=v.substr(W),v=v.slice(0,W));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),e&&(this.query=y.parse(this.query)),v=v.slice(0,H)):e&&(this.search="",this.query={}),v&&(this.pathname=v),b[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var q=this.search||"";this.path=z+q}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),h=0;h<l.length;h++){var c=l[h];"protocol"!==c&&(i[c]=t[c])}return b[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!b[t.protocol]){for(var u=Object.keys(t),f=0;f<u.length;f++){var d=u[f];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",y=i.search||"";i.path=g+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=_||v||i.host&&t.pathname,x=w,k=i.pathname&&i.pathname.split("/")||[],S=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!b[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===k[0]?k[0]=i.host:k.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),w=w&&(""===p[0]||""===k[0])),_)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search))return S&&(i.hostname=i.host=k.shift(),(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift())),i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!k.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var C=k.slice(-1)[0],E=(i.host||t.host||k.length>1)&&("."===C||".."===C)||""===C,M=0,T=k.length;T>=0;T--)"."===(C=k[T])?k.splice(T,1):".."===C?(k.splice(T,1),M++):M&&(k.splice(T,1),M--);if(!w&&!x)for(;M--;M)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),E&&"/"!==k.join("/").substr(-1)&&k.push("");var A,P=""===k[0]||k[0]&&"/"===k[0].charAt(0);return S&&(i.hostname=i.host=P?"":k.length?k.shift():"",(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift())),(w=w||i.host&&k.length)&&!P&&k.unshift(""),k.length?i.pathname=k.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":77,punycode:51,querystring:54}],77:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],78:[function(t,e,r){(function(t){(function(){function i(e){try{if(!t.localStorage)return!1}catch(t){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}e.exports=function(t,e){if(i("noDeprecation"))return t;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this)}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(t,e,i){e.exports=function t(e,i){if(e&&i)return t(e)(i);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach((function(t){r[t]=e[t]})),r;function r(){for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];var r=e.apply(this,t),n=t[t.length-1];return"function"==typeof r&&r!==n&&Object.keys(n).forEach((function(t){r[t]=n[t]})),r}}},{}],80:[function(t,e,i){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(t,e,i){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)r.call(i,n)&&(t[n]=i[n])}return t};var r=Object.prototype.hasOwnProperty},{}],82:[function(t,e,i){"use strict";e.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},{}],83:[function(t,e,i){"use strict";function r(t){var e=this;if(e instanceof r||(e=new r),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var i=0,n=arguments.length;i<n;i++)e.push(arguments[i]);return e}function n(t,e,i){var r=e===t.head?new a(i,null,e,t):new a(i,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function o(t,e){t.tail=new a(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function s(t,e){t.head=new a(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function a(t,e,i,r){if(!(this instanceof a))return new a(t,e,i,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}e.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;return e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,e},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},r.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)s(this,arguments[t]);return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,r=0;null!==i;r++)t.call(e,i.value,r,this),i=i.next},r.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,r=this.length-1;null!==i;r--)t.call(e,i.value,r,this),i=i.prev},r.prototype.get=function(t){for(var e=0,i=this.head;null!==i&&e<t;e++)i=i.next;if(e===t&&null!==i)return i.value},r.prototype.getReverse=function(t){for(var e=0,i=this.tail;null!==i&&e<t;e++)i=i.prev;if(e===t&&null!==i)return i.value},r.prototype.map=function(t,e){e=e||this;for(var i=new r,n=this.head;null!==n;)i.push(t.call(e,n.value,this)),n=n.next;return i},r.prototype.mapReverse=function(t,e){e=e||this;for(var i=new r,n=this.tail;null!==n;)i.push(t.call(e,n.value,this)),n=n.prev;return i},r.prototype.reduce=function(t,e){var i,r=this.head;if(arguments.length>1)i=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,i=this.head.value}for(var n=0;null!==r;n++)i=t(i,r.value,n),r=r.next;return i},r.prototype.reduceReverse=function(t,e){var i,r=this.tail;if(arguments.length>1)i=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,i=this.tail.value}for(var n=this.length-1;null!==r;n--)i=t(i,r.value,n),r=r.prev;return i},r.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;null!==i;e++)t[e]=i.value,i=i.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;null!==i;e++)t[e]=i.value,i=i.prev;return t},r.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new r;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,o=this.head;null!==o&&n<t;n++)o=o.next;for(;null!==o&&n<e;n++,o=o.next)i.push(o.value);return i},r.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var i=new r;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,o=this.tail;null!==o&&n>e;n--)o=o.prev;for(;null!==o&&n>t;n--,o=o.prev)i.push(o.value);return i},r.prototype.splice=function(t,e,...i){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;null!==o&&r<t;r++)o=o.next;var s=[];for(r=0;o&&r<e;r++)s.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),r=0;r<i.length;r++)o=n(this,o,i[r]);return s},r.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;null!==i;i=i.prev){var r=i.prev;i.prev=i.next,i.next=r}return this.head=e,this.tail=t,this};try{t("./iterator.js")(r)}catch(t){}},{"./iterator.js":82}]},{},[12])(12)},575:function(){document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector("#range-slider"),e=document.querySelector("#range-value");t&&e&&t.addEventListener("input",(()=>{e.textContent=t.value}))}));const t=document.getElementById("mqttForm");t&&t.addEventListener("submit",this.handleFormSubmit)},463:()=>{"use strict";function t(t){return t+.5|0}const e=(t,e,i)=>Math.max(Math.min(t,i),e);function i(i){return e(t(2.55*i),0,255)}function r(i){return e(t(255*i),0,255)}function n(i){return e(t(i/2.55)/100,0,1)}function o(i){return e(t(100*i),0,100)}const s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},a=[..."0123456789ABCDEF"],l=t=>a[15&t],h=t=>a[(240&t)>>4]+a[15&t],c=t=>(240&t)>>4==(15&t);const u=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function f(t,e,i){const r=e*Math.min(i,1-i),n=(e,n=(e+t/30)%12)=>i-r*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function d(t,e,i){const r=(r,n=(r+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function p(t,e,i){const r=f(t,1,.5);let n;for(e+i>1&&(n=1/(e+i),e*=n,i*=n),n=0;n<3;n++)r[n]*=1-e-i,r[n]+=e;return r}function g(t){const e=t.r/255,i=t.g/255,r=t.b/255,n=Math.max(e,i,r),o=Math.min(e,i,r),s=(n+o)/2;let a,l,h;return n!==o&&(h=n-o,l=s>.5?h/(2-n-o):h/(n+o),a=function(t,e,i,r,n){return t===n?(e-i)/r+(e<i?6:0):e===n?(i-t)/r+2:(t-e)/r+4}(e,i,r,h,n),a=60*a+.5),[0|a,l||0,s]}function m(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(r)}function b(t,e,i){return m(f,t,e,i)}function y(t){return(t%360+360)%360}const v={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let w;const x=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,k=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,S=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function C(t,e,i){if(t){let r=g(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*i,0===e?360:1)),r=b(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function E(t,e){return t?Object.assign(e||{},t):t}function M(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=r(t[3]))):(e=E(t,{r:0,g:0,b:0,a:1})).a=r(e.a),e}function T(t){return"r"===t.charAt(0)?function(t){const r=x.exec(t);let n,o,s,a=255;if(r){if(r[7]!==n){const t=+r[7];a=r[8]?i(t):e(255*t,0,255)}return n=+r[1],o=+r[3],s=+r[5],n=255&(r[2]?i(n):e(n,0,255)),o=255&(r[4]?i(o):e(o,0,255)),s=255&(r[6]?i(s):e(s,0,255)),{r:n,g:o,b:s,a}}}(t):function(t){const e=u.exec(t);let n,o=255;if(!e)return;e[5]!==n&&(o=e[6]?i(+e[5]):r(+e[5]));const s=y(+e[2]),a=+e[3]/100,l=+e[4]/100;return n="hwb"===e[1]?function(t,e,i){return m(p,t,e,i)}(s,a,l):"hsv"===e[1]?function(t,e,i){return m(d,t,e,i)}(s,a,l):b(s,a,l),{r:n[0],g:n[1],b:n[2],a:o}}(t)}class A{constructor(t){if(t instanceof A)return t;const e=typeof t;let i;var r,n,o;"object"===e?i=M(t):"string"===e&&(o=(r=t).length,"#"===r[0]&&(4===o||5===o?n={r:255&17*s[r[1]],g:255&17*s[r[2]],b:255&17*s[r[3]],a:5===o?17*s[r[4]]:255}:7!==o&&9!==o||(n={r:s[r[1]]<<4|s[r[2]],g:s[r[3]]<<4|s[r[4]],b:s[r[5]]<<4|s[r[6]],a:9===o?s[r[7]]<<4|s[r[8]]:255})),i=n||function(t){w||(w=function(){const t={},e=Object.keys(_),i=Object.keys(v);let r,n,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],n=0;n<i.length;n++)o=i[n],a=a.replace(o,v[o]);o=parseInt(_[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),w.transparent=[0,0,0,0]);const e=w[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||T(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=E(this._rgb);return t&&(t.a=n(t.a)),t}set rgb(t){this._rgb=M(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${n(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?(t=this._rgb,e=(t=>c(t.r)&&c(t.g)&&c(t.b)&&c(t.a))(t)?l:h,t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0):void 0;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=g(t),i=e[0],r=o(e[1]),s=o(e[2]);return t.a<255?`hsla(${i}, ${r}%, ${s}%, ${n(t.a)})`:`hsl(${i}, ${r}%, ${s}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let n;const o=e===n?.5:e,s=2*o-1,a=i.a-r.a,l=((s*a==-1?s:(s+a)/(1+s*a))+1)/2;n=1-l,i.r=255&l*i.r+n*r.r+.5,i.g=255&l*i.g+n*r.g+.5,i.b=255&l*i.b+n*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const o=S(n(t.r)),s=S(n(t.g)),a=S(n(t.b));return{r:r(k(o+i*(S(n(e.r))-o))),g:r(k(s+i*(S(n(e.g))-s))),b:r(k(a+i*(S(n(e.b))-a))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new A(this.rgb)}alpha(t){return this._rgb.a=r(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const e=this._rgb,i=t(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=i,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return C(this._rgb,2,t),this}darken(t){return C(this._rgb,2,-t),this}saturate(t){return C(this._rgb,1,t),this}desaturate(t){return C(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=g(t);i[0]=y(i[0]+e),i=b(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function P(){}const O=(()=>{let t=0;return()=>t++})();function I(t){return null==t}function R(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function L(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function D(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function B(t,e){return D(t)?t:e}function N(t,e){return void 0===t?e:t}const j=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function z(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function F(t,e,i,r){let n,o,s;if(R(t))if(o=t.length,r)for(n=o-1;n>=0;n--)e.call(i,t[n],n);else for(n=0;n<o;n++)e.call(i,t[n],n);else if(L(t))for(s=Object.keys(t),o=s.length,n=0;n<o;n++)e.call(i,t[s[n]],s[n])}function V(t,e){let i,r,n,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,r=t.length;i<r;++i)if(n=t[i],o=e[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function U(t){if(R(t))return t.map(U);if(L(t)){const e=Object.create(null),i=Object.keys(t),r=i.length;let n=0;for(;n<r;++n)e[i[n]]=U(t[i[n]]);return e}return t}function W(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function H(t,e,i,r){if(!W(t))return;const n=e[t],o=i[t];L(n)&&L(o)?q(n,o,r):e[t]=U(o)}function q(t,e,i){const r=R(e)?e:[e],n=r.length;if(!L(t))return t;const o=(i=i||{}).merger||H;let s;for(let e=0;e<n;++e){if(s=r[e],!L(s))continue;const n=Object.keys(s);for(let e=0,r=n.length;e<r;++e)o(n[e],t,s,i)}return t}function $(t,e){return q(t,e,{merger:K})}function K(t,e,i){if(!W(t))return;const r=e[t],n=i[t];L(r)&&L(n)?$(r,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=U(n))}const Y={"":t=>t,x:t=>t.x,y:t=>t.y};function Q(t,e){const i=Y[e]||(Y[e]=function(t){const e=function(t){const e=t.split("."),i=[];let r="";for(const t of e)r+=t,r.endsWith("\\")?r=r.slice(0,-1)+".":(i.push(r),r="");return i}(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e));return i(t)}function X(t){return t.charAt(0).toUpperCase()+t.slice(1)}const G=t=>void 0!==t,Z=t=>"function"==typeof t,J=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0},tt=Math.PI,et=2*tt,it=et+tt,rt=Number.POSITIVE_INFINITY,nt=tt/180,ot=tt/2,st=tt/4,at=2*tt/3,lt=Math.log10,ht=Math.sign;function ct(t,e,i){return Math.abs(t-e)<i}function ut(t){const e=Math.round(t);t=ct(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(lt(t))),r=t/i;return(r<=1?1:r<=2?2:r<=5?5:10)*i}function ft(t){return!isNaN(parseFloat(t))&&isFinite(t)}function dt(t,e,i){let r,n,o;for(r=0,n=t.length;r<n;r++)o=t[r][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function pt(t){return t*(tt/180)}function gt(t){return t*(180/tt)}function mt(t){if(!D(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function bt(t,e){const i=e.x-t.x,r=e.y-t.y,n=Math.sqrt(i*i+r*r);let o=Math.atan2(r,i);return o<-.5*tt&&(o+=et),{angle:o,distance:n}}function yt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function vt(t,e){return(t-e+it)%et-tt}function _t(t){return(t%et+et)%et}function wt(t,e,i,r){const n=_t(t),o=_t(e),s=_t(i),a=_t(o-n),l=_t(s-n),h=_t(n-o),c=_t(n-s);return n===o||n===s||r&&o===s||a>l&&h<c}function xt(t,e,i){return Math.max(e,Math.min(i,t))}function kt(t,e,i,r=1e-6){return t>=Math.min(e,i)-r&&t<=Math.max(e,i)+r}function St(t,e,i){i=i||(i=>t[i]<e);let r,n=t.length-1,o=0;for(;n-o>1;)r=o+n>>1,i(r)?o=r:n=r;return{lo:o,hi:n}}const Ct=(t,e,i,r)=>St(t,i,r?r=>{const n=t[r][e];return n<i||n===i&&t[r+1][e]===i}:r=>t[r][e]<i),Et=(t,e,i)=>St(t,i,(r=>t[r][e]>=i)),Mt=["push","pop","shift","splice","unshift"];function Tt(t,e){const i=t._chartjs;if(!i)return;const r=i.listeners,n=r.indexOf(e);-1!==n&&r.splice(n,1),r.length>0||(Mt.forEach((e=>{delete t[e]})),delete t._chartjs)}function At(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Pt="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Ot(t,e){let i=[],r=!1;return function(...n){i=n,r||(r=!0,Pt.call(window,(()=>{r=!1,t.apply(e,i)})))}}const It=t=>"start"===t?"left":"end"===t?"right":"center",Rt=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;function Lt(t,e,i){const r=e.length;let n=0,o=r;if(t._sorted){const{iScale:s,_parsed:a}=t,l=s.axis,{min:h,max:c,minDefined:u,maxDefined:f}=s.getUserBounds();u&&(n=xt(Math.min(Ct(a,s.axis,h).lo,i?r:Ct(e,l,s.getPixelForValue(h)).lo),0,r-1)),o=f?xt(Math.max(Ct(a,s.axis,c,!0).hi+1,i?0:Ct(e,l,s.getPixelForValue(c),!0).hi+1),n,r)-n:r-n}return{start:n,count:o}}function Dt(t){const{xScale:e,yScale:i,_scaleRanges:r}=t,n={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!r)return t._scaleRanges=n,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==i.min||r.ymax!==i.max;return Object.assign(r,n),o}const Bt=t=>0===t||1===t,Nt=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*et/i),jt=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*et/i)+1,zt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*ot),easeOutSine:t=>Math.sin(t*ot),easeInOutSine:t=>-.5*(Math.cos(tt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Bt(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bt(t)?t:Nt(t,.075,.3),easeOutElastic:t=>Bt(t)?t:jt(t,.075,.3),easeInOutElastic(t){const e=.1125;return Bt(t)?t:t<.5?.5*Nt(2*t,e,.45):.5+.5*jt(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-zt.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*zt.easeInBounce(2*t):.5*zt.easeOutBounce(2*t-1)+.5};function Ft(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Vt(t){return Ft(t)?t:new A(t)}function Ut(t){return Ft(t)?t:new A(t).saturate(.5).darken(.1).hexString()}const Wt=["x","y","borderWidth","radius","tension"],Ht=["color","borderColor","backgroundColor"],qt=new Map;function $t(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let r=qt.get(i);return r||(r=new Intl.NumberFormat(t,e),qt.set(i,r)),r}(e,i).format(t)}const Kt={values:t=>R(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const r=this.chart.options.locale;let n,o=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(n="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}(t,i)}const s=lt(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),$t(t,r,l)},logarithmic(t,e,i){if(0===t)return"0";const r=i[e].significand||t/Math.pow(10,Math.floor(lt(t)));return[1,2,3,5,10,15].includes(r)||e>.8*i.length?Kt.numeric.call(this,t,e,i):""}};var Yt={formatters:Kt};const Qt=Object.create(null),Xt=Object.create(null);function Gt(t,e){if(!e)return t;const i=e.split(".");for(let e=0,r=i.length;e<r;++e){const r=i[e];t=t[r]||(t[r]=Object.create(null))}return t}function Zt(t,e,i){return"string"==typeof e?q(Gt(t,e),i):q(Gt(t,""),e)}class Jt{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Ut(e.backgroundColor),this.hoverBorderColor=(t,e)=>Ut(e.borderColor),this.hoverColor=(t,e)=>Ut(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Zt(this,t,e)}get(t){return Gt(this,t)}describe(t,e){return Zt(Xt,t,e)}override(t,e){return Zt(Qt,t,e)}route(t,e,i,r){const n=Gt(this,t),o=Gt(this,i),s="_"+e;Object.defineProperties(n,{[s]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[r];return L(t)?Object.assign({},e,t):N(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach((t=>t(this)))}}var te=new Jt({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Ht},numbers:{type:"number",properties:Wt}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Yt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ee(t,e,i,r,n){let o=e[n];return o||(o=e[n]=t.measureText(n).width,i.push(n)),o>r&&(r=o),r}function ie(t,e,i,r){let n=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(n=r.data={},o=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let s=0;const a=i.length;let l,h,c,u,f;for(l=0;l<a;l++)if(u=i[l],null==u||R(u)){if(R(u))for(h=0,c=u.length;h<c;h++)f=u[h],null==f||R(f)||(s=ee(t,n,o,s,f))}else s=ee(t,n,o,s,u);t.restore();const d=o.length/2;if(d>i.length){for(l=0;l<d;l++)delete n[o[l]];o.splice(0,d)}return s}function re(t,e,i){const r=t.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((e-n)*r)/r+n}function ne(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function oe(t,e,i,r){se(t,e,i,r,null)}function se(t,e,i,r,n){let o,s,a,l,h,c,u,f;const d=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*nt;if(d&&"object"==typeof d&&(o=d.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,r),t.rotate(m),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),d){default:n?t.ellipse(i,r,n/2,g,0,0,et):t.arc(i,r,g,0,et),t.closePath();break;case"triangle":c=n?n/2:g,t.moveTo(i+Math.sin(m)*c,r-Math.cos(m)*g),m+=at,t.lineTo(i+Math.sin(m)*c,r-Math.cos(m)*g),m+=at,t.lineTo(i+Math.sin(m)*c,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":h=.516*g,l=g-h,s=Math.cos(m+st)*l,u=Math.cos(m+st)*(n?n/2-h:l),a=Math.sin(m+st)*l,f=Math.sin(m+st)*(n?n/2-h:l),t.arc(i-u,r-a,h,m-tt,m-ot),t.arc(i+f,r-s,h,m-ot,m),t.arc(i+u,r+a,h,m,m+ot),t.arc(i-f,r+s,h,m+ot,m+tt),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,c=n?n/2:l,t.rect(i-c,r-l,2*c,2*l);break}m+=st;case"rectRot":u=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(n?n/2:g),t.moveTo(i-u,r-a),t.lineTo(i+f,r-s),t.lineTo(i+u,r+a),t.lineTo(i-f,r+s),t.closePath();break;case"crossRot":m+=st;case"cross":u=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(n?n/2:g),t.moveTo(i-u,r-a),t.lineTo(i+u,r+a),t.moveTo(i+f,r-s),t.lineTo(i-f,r+s);break;case"star":u=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(n?n/2:g),t.moveTo(i-u,r-a),t.lineTo(i+u,r+a),t.moveTo(i+f,r-s),t.lineTo(i-f,r+s),m+=st,u=Math.cos(m)*(n?n/2:g),s=Math.cos(m)*g,a=Math.sin(m)*g,f=Math.sin(m)*(n?n/2:g),t.moveTo(i-u,r-a),t.lineTo(i+u,r+a),t.moveTo(i+f,r-s),t.lineTo(i-f,r+s);break;case"line":s=n?n/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(i-s,r-a),t.lineTo(i+s,r+a);break;case"dash":t.moveTo(i,r),t.lineTo(i+Math.cos(m)*(n?n/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function ae(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function le(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function he(t){t.restore()}function ce(t,e,i,r,n){if(!e)return t.lineTo(i.x,i.y);if("middle"===n){const r=(e.x+i.x)/2;t.lineTo(r,e.y),t.lineTo(r,i.y)}else"after"===n!=!!r?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function ue(t,e,i,r){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?i.cp2x:i.cp1x,r?i.cp2y:i.cp1y,i.x,i.y)}function fe(t,e,i,r,n){if(n.strikethrough||n.underline){const o=t.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,h=i+o.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(s,c),t.lineTo(a,c),t.stroke()}}function de(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function pe(t,e,i,r,n,o={}){const s=R(e)?e:[e],a=o.strokeWidth>0&&""!==o.strokeColor;let l,h;for(t.save(),t.font=n.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),I(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<s.length;++l)h=s[l],o.backdrop&&de(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),I(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(h,i,r,o.maxWidth)),t.fillText(h,i,r,o.maxWidth),fe(t,i,r,h,o),r+=Number(n.lineHeight);t.restore()}function ge(t,e){const{x:i,y:r,w:n,h:o,radius:s}=e;t.arc(i+s.topLeft,r+s.topLeft,s.topLeft,-ot,tt,!0),t.lineTo(i,r+o-s.bottomLeft),t.arc(i+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,tt,ot,!0),t.lineTo(i+n-s.bottomRight,r+o),t.arc(i+n-s.bottomRight,r+o-s.bottomRight,s.bottomRight,ot,0,!0),t.lineTo(i+n,r+s.topRight),t.arc(i+n-s.topRight,r+s.topRight,s.topRight,0,-ot,!0),t.lineTo(i+s.topLeft,r)}const me=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,be=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ye(t,e){const i=(""+t).match(me);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}const ve=t=>+t||0;function _e(t,e){const i={},r=L(e),n=r?Object.keys(e):e,o=L(t)?r?i=>N(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of n)i[t]=ve(o(t));return i}function we(t){return _e(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xe(t){return _e(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ke(t){const e=we(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Se(t,e){t=t||{},e=e||te.font;let i=N(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let r=N(t.style,e.style);r&&!(""+r).match(be)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const n={family:N(t.family,e.family),lineHeight:ye(N(t.lineHeight,e.lineHeight),i),size:i,style:r,weight:N(t.weight,e.weight),string:""};return n.string=function(t){return!t||I(t.size)||I(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n}function Ce(t,e,i,r){let n,o,s,a=!0;for(n=0,o=t.length;n<o;++n)if(s=t[n],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),a=!1),void 0!==i&&R(s)&&(s=s[i%s.length],a=!1),void 0!==s))return r&&!a&&(r.cacheable=!1),s}function Ee(t,e){return Object.assign(Object.create(t),e)}function Me(t,e=[""],i,r,n=(()=>t[0])){const o=i||t;void 0===r&&(r=je("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:r,_getTarget:n,override:i=>Me([i,...t],e,o,r)};return new Proxy(s,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,r)=>Ie(i,r,(()=>function(t,e,i,r){let n;for(const o of e)if(n=je(Pe(o,t),i),void 0!==n)return Oe(t,n)?Be(i,r,t,n):n}(r,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>ze(t).includes(e),ownKeys:t=>ze(t),set(t,e,i){const r=t._storage||(t._storage=n());return t[e]=r[e]=i,delete t._keys,!0}})}function Te(t,e,i,r){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Ae(t,r),setContext:e=>Te(t,e,i,r),override:n=>Te(t.override(n),e,i,r)};return new Proxy(n,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>Ie(t,e,(()=>function(t,e,i){const{_proxy:r,_context:n,_subProxy:o,_descriptors:s}=t;let a=r[e];return Z(a)&&s.isScriptable(e)&&(a=function(t,e,i,r){const{_proxy:n,_context:o,_subProxy:s,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,s||r);return a.delete(t),Oe(t,l)&&(l=Be(n._scopes,n,t,l)),l}(e,a,t,i)),R(a)&&a.length&&(a=function(t,e,i,r){const{_proxy:n,_context:o,_subProxy:s,_descriptors:a}=i;if(void 0!==o.index&&r(t))return e[o.index%e.length];if(L(e[0])){const i=e,r=n._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=Be(r,n,t,l);e.push(Te(i,o,s&&s[t],a))}}return e}(e,a,t,s.isIndexable)),Oe(e,a)&&(a=Te(a,n,o&&o[e],s)),a}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,r)=>(t[i]=r,delete e[i],!0)})}function Ae(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:r=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:i,indexable:r,isScriptable:Z(i)?i:()=>i,isIndexable:Z(r)?r:()=>r}}const Pe=(t,e)=>t?t+X(e):e,Oe=(t,e)=>L(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ie(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=i();return t[e]=r,r}function Re(t,e,i){return Z(t)?t(e,i):t}const Le=(t,e)=>!0===t?e:"string"==typeof t?Q(e,t):void 0;function De(t,e,i,r,n){for(const o of e){const e=Le(i,o);if(e){t.add(e);const o=Re(e._fallback,i,n);if(void 0!==o&&o!==i&&o!==r)return o}else if(!1===e&&void 0!==r&&i!==r)return null}return!1}function Be(t,e,i,r){const n=e._rootScopes,o=Re(e._fallback,i,r),s=[...t,...n],a=new Set;a.add(r);let l=Ne(a,s,i,o||i,r);return null!==l&&(void 0===o||o===i||(l=Ne(a,s,o,l,r),null!==l))&&Me(Array.from(a),[""],n,o,(()=>function(t,e,i){const r=t._getTarget();e in r||(r[e]={});const n=r[e];return R(n)&&L(i)?i:n||{}}(e,i,r)))}function Ne(t,e,i,r,n){for(;i;)i=De(t,e,i,r,n);return i}function je(t,e){for(const i of e){if(!i)continue;const e=i[t];if(void 0!==e)return e}}function ze(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function Fe(t,e,i,r){const{iScale:n}=t,{key:o="r"}=this._parsing,s=new Array(r);let a,l,h,c;for(a=0,l=r;a<l;++a)h=a+i,c=e[h],s[a]={r:n.parse(Q(c,o),h)};return s}const Ve=Number.EPSILON||1e-14,Ue=(t,e)=>e<t.length&&!t[e].skip&&t[e],We=t=>"x"===t?"y":"x";function He(t,e,i,r){const n=t.skip?e:t,o=e,s=i.skip?e:i,a=yt(o,n),l=yt(s,o);let h=a/(a+l),c=l/(a+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const u=r*h,f=r*c;return{previous:{x:o.x-u*(s.x-n.x),y:o.y-u*(s.y-n.y)},next:{x:o.x+f*(s.x-n.x),y:o.y+f*(s.y-n.y)}}}function qe(t,e,i){return Math.max(Math.min(t,i),e)}function $e(t,e,i,r,n){let o,s,a,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){const i=We(e),r=t.length,n=Array(r).fill(0),o=Array(r);let s,a,l,h=Ue(t,0);for(s=0;s<r;++s)if(a=l,l=h,h=Ue(t,s+1),l){if(h){const t=h[e]-l[e];n[s]=0!==t?(h[i]-l[i])/t:0}o[s]=a?h?ht(n[s-1])!==ht(n[s])?0:(n[s-1]+n[s])/2:n[s-1]:n[s]}!function(t,e,i){const r=t.length;let n,o,s,a,l,h=Ue(t,0);for(let c=0;c<r-1;++c)l=h,h=Ue(t,c+1),l&&h&&(ct(e[c],0,Ve)?i[c]=i[c+1]=0:(n=i[c]/e[c],o=i[c+1]/e[c],a=Math.pow(n,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),i[c]=n*s*e[c],i[c+1]=o*s*e[c])))}(t,n,o),function(t,e,i="x"){const r=We(i),n=t.length;let o,s,a,l=Ue(t,0);for(let h=0;h<n;++h){if(s=a,a=l,l=Ue(t,h+1),!a)continue;const n=a[i],c=a[r];s&&(o=(n-s[i])/3,a[`cp1${i}`]=n-o,a[`cp1${r}`]=c-o*e[h]),l&&(o=(l[i]-n)/3,a[`cp2${i}`]=n+o,a[`cp2${r}`]=c+o*e[h])}}(t,o,e)}(t,n);else{let i=r?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],l=He(i,a,t[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}e.capBezierPoints&&function(t,e){let i,r,n,o,s,a=ae(t[0],e);for(i=0,r=t.length;i<r;++i)s=o,o=a,a=i<r-1&&ae(t[i+1],e),o&&(n=t[i],s&&(n.cp1x=qe(n.cp1x,e.left,e.right),n.cp1y=qe(n.cp1y,e.top,e.bottom)),a&&(n.cp2x=qe(n.cp2x,e.left,e.right),n.cp2y=qe(n.cp2y,e.top,e.bottom)))}(t,i)}function Ke(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Ye(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Qe(t,e,i){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[i])):r=t,r}const Xe=t=>t.ownerDocument.defaultView.getComputedStyle(t,null),Ge=["top","right","bottom","left"];function Ze(t,e,i){const r={};i=i?"-"+i:"";for(let n=0;n<4;n++){const o=Ge[n];r[o]=parseFloat(t[e+"-"+o+i])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Je=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function ti(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:r}=e,n=Xe(i),o="border-box"===n.boxSizing,s=Ze(n,"padding"),a=Ze(n,"border","width"),{x:l,y:h,box:c}=function(t,e){const i=t.touches,r=i&&i.length?i[0]:t,{offsetX:n,offsetY:o}=r;let s,a,l=!1;if(Je(n,o,t.target))s=n,a=o;else{const t=e.getBoundingClientRect();s=r.clientX-t.left,a=r.clientY-t.top,l=!0}return{x:s,y:a,box:l}}(t,i),u=s.left+(c&&a.left),f=s.top+(c&&a.top);let{width:d,height:p}=e;return o&&(d-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-u)/d*i.width/r),y:Math.round((h-f)/p*i.height/r)}}const ei=t=>Math.round(10*t)/10;function ii(t,e,i){const r=e||1,n=Math.floor(t.height*r),o=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||s.height!==n||s.width!==o)&&(t.currentDevicePixelRatio=r,s.height=n,s.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0)}const ri=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function ni(t,e){const i=function(t,e){return Xe(t).getPropertyValue(e)}(t,e),r=i&&i.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function oi(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function si(t,e,i,r){return{x:t.x+i*(e.x-t.x),y:"middle"===r?i<.5?t.y:e.y:"after"===r?i<1?t.y:e.y:i>0?e.y:t.y}}function ai(t,e,i,r){const n={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=oi(t,n,i),a=oi(n,o,i),l=oi(o,e,i),h=oi(s,a,i),c=oi(a,l,i);return oi(h,c,i)}function li(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function hi(t,e){let i,r;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,r=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=r)}function ci(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function ui(t){return"angle"===t?{between:wt,compare:vt,normalize:_t}:{between:kt,compare:(t,e)=>t-e,normalize:t=>t}}function fi({start:t,end:e,count:i,loop:r,style:n}){return{start:t%i,end:e%i,loop:r&&(e-t+1)%i==0,style:n}}function di(t,e,i){if(!i)return[t];const{property:r,start:n,end:o}=i,s=e.length,{compare:a,between:l,normalize:h}=ui(r),{start:c,end:u,loop:f,style:d}=function(t,e,i){const{property:r,start:n,end:o}=i,{between:s,normalize:a}=ui(r),l=e.length;let h,c,{start:u,end:f,loop:d}=t;if(d){for(u+=l,f+=l,h=0,c=l;h<c&&s(a(e[u%l][r]),n,o);++h)u--,f--;u%=l,f%=l}return f<u&&(f+=l),{start:u,end:f,loop:d,style:t.style}}(t,e,i),p=[];let g,m,b,y=!1,v=null;for(let t=c,i=c;t<=u;++t)m=e[t%s],m.skip||(g=h(m[r]),g!==b&&(y=l(g,n,o),null===v&&(y||l(n,b,g)&&0!==a(n,b))&&(v=0===a(g,n)?t:i),null!==v&&(!y||0===a(o,g)||l(o,b,g))&&(p.push(fi({start:v,end:t,loop:f,count:s,style:d})),v=null),i=t,b=g));return null!==v&&p.push(fi({start:v,end:u,loop:f,count:s,style:d})),p}function pi(t,e){const i=[],r=t.segments;for(let n=0;n<r.length;n++){const o=di(r[n],t.points,e);o.length&&i.push(...o)}return i}function gi(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function mi(t,e){if(!e)return!1;const i=[],r=function(t,e){return Ft(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}class bi{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const n=e.listeners[r],o=e.duration;n.forEach((r=>r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=Pt.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,r)=>{if(!i.running||!i.items.length)return;const n=i.items;let o,s=n.length-1,a=!1;for(;s>=0;--s)o=n[s],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),a=!0):(n[s]=n[n.length-1],n.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),n.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=n.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var yi=new bi;const vi="transparent",_i={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const r=Vt(t||vi),n=r.valid&&Vt(e||vi);return n&&n.valid?n.mix(r,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class wi{constructor(t,e,i,r){const n=e[i];r=Ce([t.to,r,n,t.from]);const o=Ce([t.from,n,r]);this._active=!0,this._fn=t.fn||_i[t.type||typeof o],this._easing=zt[t.easing]||zt.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],n=i-this._start,o=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=Ce([t.to,e,r,t.from]),this._from=Ce([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,n=this._from,o=this._loop,s=this._to;let a;if(this._active=n!==s&&(o||e<i),!this._active)return this._target[r]=s,void this._notify(!0);e<0?this._target[r]=n:(a=e/i%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(n,s,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class xi{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!L(t))return;const e=Object.keys(te.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach((r=>{const n=t[r];if(!L(n))return;const o={};for(const t of e)o[t]=n[t];(R(n.properties)&&n.properties||[r]).forEach((t=>{t!==r&&i.has(t)||i.set(t,o)}))}))}_animateOptions(t,e){const i=e.options,r=function(t,e){if(!e)return;let i=t.options;if(i)return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i;t.options=e}(t,i);if(!r)return[];const n=this._createAnimations(r,i);return i.$shared&&function(t,e){const i=[],r=Object.keys(e);for(let e=0;e<r.length;e++){const n=t[r[e]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),n}_createAnimations(t,e){const i=this._properties,r=[],n=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now();let a;for(a=o.length-1;a>=0;--a){const l=o[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}const h=e[l];let c=n[l];const u=i.get(l);if(c){if(u&&c.active()){c.update(u,h,s);continue}c.cancel()}u&&u.duration?(n[l]=c=new wi(u,t,l,h),r.push(c)):t[l]=h}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(yi.add(this._chart,i),!0):void 0}}function ki(t,e){const i=t&&t.options||{},r=i.reverse,n=void 0===i.min?e:0,o=void 0===i.max?e:0;return{start:r?o:n,end:r?n:o}}function Si(t,e){const i=[],r=t._getSortedDatasetMetas(e);let n,o;for(n=0,o=r.length;n<o;++n)i.push(r[n].index);return i}function Ci(t,e,i,r={}){const n=t.keys,o="single"===r.mode;let s,a,l,h;if(null!==e){for(s=0,a=n.length;s<a;++s){if(l=+n[s],l===i){if(r.all)continue;break}h=t.values[l],D(h)&&(o||0===e||ht(e)===ht(h))&&(e+=h)}return e}}function Ei(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function Mi(t,e,i){const r=t[e]||(t[e]={});return r[i]||(r[i]={})}function Ti(t,e,i,r){for(const n of e.getMatchingVisibleMetas(r).reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function Ai(t,e){const{chart:i,_cachedMeta:r}=t,n=i._stacks||(i._stacks={}),{iScale:o,vScale:s,index:a}=r,l=o.axis,h=s.axis,c=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(o,s,r),u=e.length;let f;for(let t=0;t<u;++t){const i=e[t],{[l]:o,[h]:u}=i;f=(i._stacks||(i._stacks={}))[h]=Mi(n,c,o),f[a]=u,f._top=Ti(f,s,!0,r.type),f._bottom=Ti(f,s,!1,r.type),(f._visualValues||(f._visualValues={}))[a]=u}}function Pi(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Oi(t,e){const i=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][i])return;delete e[r][i],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[i]&&delete e[r]._visualValues[i]}}}const Ii=t=>"reset"===t||"none"===t,Ri=(t,e)=>e?t:Object.assign({},t);class Li{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ei(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Oi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(t,e,i,r)=>"x"===t?e:"r"===t?r:i,n=e.xAxisID=N(i.xAxisID,Pi(t,"x")),o=e.yAxisID=N(i.yAxisID,Pi(t,"y")),s=e.rAxisID=N(i.rAxisID,Pi(t,"r")),a=e.indexAxis,l=e.iAxisID=r(a,n,o,s),h=e.vAxisID=r(a,o,n,s);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(s),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Tt(this._data,this),t._stacked&&Oi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(L(e))this._data=function(t){const e=Object.keys(t),i=new Array(e.length);let r,n,o;for(r=0,n=e.length;r<n;++r)o=e[r],i[r]={x:o,y:t[o]};return i}(e);else if(i!==e){if(i){Tt(i,this);const t=this._cachedMeta;Oi(t),t._parsed=[]}e&&Object.isExtensible(e)&&(this,(r=e)._chartjs?r._chartjs.listeners.push(this):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),Mt.forEach((t=>{const e="_onData"+X(t),i=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...t){const n=i.apply(this,t);return r._chartjs.listeners.forEach((i=>{"function"==typeof i[e]&&i[e](...t)})),n}})})))),this._syncList=[],this._data=e}var r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const n=e._stacked;e._stacked=Ei(e.vScale,e),e.stack!==i.stack&&(r=!0,Oi(e),e.stack=i.stack),this._resyncElements(t),(r||n!==e._stacked)&&Ai(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:n,_stacked:o}=i,s=n.axis;let a,l,h,c=0===t&&e===r.length||i._sorted,u=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=r,i._sorted=!0,h=r;else{h=R(r[t])?this.parseArrayData(i,r,t,e):L(r[t])?this.parseObjectData(i,r,t,e):this.parsePrimitiveData(i,r,t,e);const n=()=>null===l[s]||u&&l[s]<u[s];for(a=0;a<e;++a)i._parsed[a+t]=l=h[a],c&&(n()&&(c=!1),u=l);i._sorted=c}o&&Ai(this,h)}parsePrimitiveData(t,e,i,r){const{iScale:n,vScale:o}=t,s=n.axis,a=o.axis,l=n.getLabels(),h=n===o,c=new Array(r);let u,f,d;for(u=0,f=r;u<f;++u)d=u+i,c[u]={[s]:h||n.parse(l[d],d),[a]:o.parse(e[d],d)};return c}parseArrayData(t,e,i,r){const{xScale:n,yScale:o}=t,s=new Array(r);let a,l,h,c;for(a=0,l=r;a<l;++a)h=a+i,c=e[h],s[a]={x:n.parse(c[0],h),y:o.parse(c[1],h)};return s}parseObjectData(t,e,i,r){const{xScale:n,yScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let h,c,u,f;for(h=0,c=r;h<c;++h)u=h+i,f=e[u],l[h]={x:n.parse(Q(f,s),u),y:o.parse(Q(f,a),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,n=this._cachedMeta,o=e[t.axis];return Ci({keys:Si(r,!0),values:e._stacks[t.axis]._visualValues},o,n.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const n=i[e.axis];let o=null===n?NaN:n;const s=r&&i._stacks[e.axis];r&&s&&(r.values=s,o=Ci(r,n,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,n=i._sorted&&t===i.iScale,o=r.length,s=this._getOtherScale(t),a=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Si(i,!0),values:null})(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:c}=function(t){const{min:e,max:i,minDefined:r,maxDefined:n}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}(s);let u,f;function d(){f=r[u];const e=f[s.axis];return!D(f[t.axis])||h>e||c<e}for(u=0;u<o&&(d()||(this.updateRangeFromParsed(l,t,f,a),!n));++u);if(n)for(u=o-1;u>=0;--u)if(!d()){this.updateRangeFromParsed(l,t,f,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,n,o;for(r=0,n=e.length;r<n;++r)o=e[r][t.axis],D(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,n=this.getParsed(t);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:r?""+r.getLabelForValue(n[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,r,n;return L(t)?(e=t.top,i=t.right,r=t.bottom,n=t.left):e=i=r=n=t,{top:e,right:i,bottom:r,left:n,disabled:!1===t}}(N(this.options.clip,function(t,e,i){if(!1===i)return!1;const r=ki(t,i),n=ki(e,i);return{top:n.end,right:r.end,bottom:n.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],n=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,n,s,a),h=s;h<s+a;++h){const e=r[h];e.hidden||(e.active&&l?o.push(e):e.draw(t,n))}for(h=0;h<o.length;++h)o[h].draw(t,n)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];n=e.$context||(e.$context=function(t,e,i){return Ee(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),n.parsed=this.getParsed(t),n.raw=r.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=function(t,e){return Ee(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=r,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=i,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r="active"===e,n=this._cachedDataOpts,o=t+"-"+e,s=n[o],a=this.enableOptionSharing&&G(i);if(s)return Ri(s,a);const l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=r?[`${t}Hover`,"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),h),f=Object.keys(te.elements[t]),d=l.resolveNamedOptions(u,f,(()=>this.getContext(i,r,e)),c);return d.$shared&&(d.$shared=a,n[o]=Object.freeze(Ri(d,a))),d}_resolveAnimations(t,e,i){const r=this.chart,n=this._cachedDataOpts,o=`animation-${e}`,s=n[o];if(s)return s;let a;if(!1!==r.options.animation){const r=this.chart.config,n=r.datasetAnimationScopeKeys(this._type,e),o=r.getOptionScopes(this.getDataset(),n);a=r.createResolver(o,this.getContext(t,i,e))}const l=new xi(r,a&&a.animations);return a&&a._cacheable&&(n[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ii(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,n=this.getSharedOptions(i),o=this.includeOptions(e,n)||n!==r;return this.updateSharedOptions(n,e,i),{sharedOptions:n,includeOptions:o}}updateElement(t,e,i,r){Ii(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Ii(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const n=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(n)||n})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const r=i.length,n=e.length,o=Math.min(n,r);o&&this.parse(0,o),n>r?this._insertElements(r,n-r,t):n<r&&this._removeElements(n,r-n)}_insertElements(t,e,i=!0){const r=this._cachedMeta,n=r.data,o=t+e;let s;const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]};for(a(n),s=t;s<o;++s)n[s]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Oi(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Di(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,n=i.length;e<n;e++)r=r.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=At(r.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let r,n,o,s,a=e._length;const l=()=>{32767!==o&&-32768!==o&&(G(s)&&(a=Math.min(a,Math.abs(o-s)||a)),s=o)};for(r=0,n=i.length;r<n;++r)o=e.getPixelForValue(i[r]),l();for(s=void 0,r=0,n=e.ticks.length;r<n;++r)o=e.getPixelForTick(r),l();return a}function Bi(t,e,i,r){return R(t)?function(t,e,i,r){const n=i.parse(t[0],r),o=i.parse(t[1],r),s=Math.min(n,o),a=Math.max(n,o);let l=s,h=a;Math.abs(s)>Math.abs(a)&&(l=a,h=s),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:n,end:o,min:s,max:a}}(t,e,i,r):e[i.axis]=i.parse(t,r),e}function Ni(t,e,i,r){const n=t.iScale,o=t.vScale,s=n.getLabels(),a=n===o,l=[];let h,c,u,f;for(h=i,c=i+r;h<c;++h)f=e[h],u={},u[n.axis]=a||n.parse(s[h],h),l.push(Bi(f,u,o,h));return l}function ji(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function zi(t,e,i,r){let n=e.borderSkipped;const o={};if(!n)return void(t.borderSkipped=o);if(!0===n)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:a,reverse:l,top:h,bottom:c}=function(t){let e,i,r,n,o;return t.horizontal?(e=t.base>t.x,i="left",r="right"):(e=t.base<t.y,i="bottom",r="top"),e?(n="end",o="start"):(n="start",o="end"),{start:i,end:r,reverse:e,top:n,bottom:o}}(t);"middle"===n&&i&&(t.enableBorderRadius=!0,(i._top||0)===r?n=h:(i._bottom||0)===r?n=c:(o[Fi(c,s,a,l)]=!0,n=h)),o[Fi(n,s,a,l)]=!0,t.borderSkipped=o}function Fi(t,e,i,r){var n,o,s;return r?(s=i,t=Vi(t=(n=t)===(o=e)?s:n===s?o:n,i,e)):t=Vi(t,e,i),t}function Vi(t,e,i){return"start"===t?e:"end"===t?i:t}function Ui(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class Wi extends Li{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=i;else{let n,o,s=t=>+i[t];if(L(i[t])){const{key:t="value"}=this._parsing;s=e=>+Q(i[e],t)}for(n=t,o=t+e;n<o;++n)r._parsed[n]=s(n)}}_getRotation(){return pt(this.options.rotation-90)}_getCircumference(){return pt(this.options.circumference)}_getRotationExtents(){let t=et,e=-et;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,n=r._getRotation(),o=r._getCircumference();t=Math.min(t,n),e=Math.max(e,n+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,n=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,s=Math.max((Math.min(i.width,i.height)-o)/2,0),a=Math.min((h=s,"string"==typeof(l=this.options.cutout)&&l.endsWith("%")?parseFloat(l)/100:+l/h),1);var l,h;const c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:d,ratioY:p,offsetX:g,offsetY:m}=function(t,e,i){let r=1,n=1,o=0,s=0;if(e<et){const a=t,l=a+e,h=Math.cos(a),c=Math.sin(a),u=Math.cos(l),f=Math.sin(l),d=(t,e,r)=>wt(t,a,l,!0)?1:Math.max(e,e*i,r,r*i),p=(t,e,r)=>wt(t,a,l,!0)?-1:Math.min(e,e*i,r,r*i),g=d(0,h,u),m=d(ot,c,f),b=p(tt,h,u),y=p(tt+ot,c,f);r=(g-b)/2,n=(m-y)/2,o=-(g+b)/2,s=-(m+y)/2}return{ratioX:r,ratioY:n,offsetX:o,offsetY:s}}(f,u,a),b=(i.width-o)/d,y=(i.height-o)/p,v=Math.max(Math.min(b,y)/2,0),_=j(this.options.radius,v),w=(_-Math.max(_*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=m*_,r.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(n,0,n.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,n=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*n/et)}updateElements(t,e,i,r){const n="reset"===r,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,h=(s.top+s.bottom)/2,c=n&&a.animateScale,u=c?0:this.innerRadius,f=c?0:this.outerRadius,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(e,r);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,n);for(g=e;g<e+i;++g){const e=this._circumference(g,n),i=t[g],o={x:l+this.offsetX,y:h+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:f,innerRadius:u};p&&(o.options=d||this.resolveDataElementOptions(g,i.active?"active":r)),m+=e,this.updateElement(i,g,o,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,r=0;for(i=0;i<e.length;i++){const n=t._parsed[i];null===n||isNaN(n)||!this.chart.getDataVisibility(i)||e[i].hidden||(r+=Math.abs(n))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?et*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],n=$t(e._parsed[t],i.options.locale);return{label:r[t]||"",value:n}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,n,o,s,a;if(!t)for(r=0,n=i.data.datasets.length;r<n;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),t=o.data,s=o.controller;break}if(!t)return 0;for(r=0,n=t.length;r<n;++r)a=s.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(N(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Hi extends Li{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],n=$t(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:n}}parseObjectData(t,e,i,r){return Fe.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),n=Math.max(r/2,0),o=(n-Math.max(i.cutoutPercentage?n/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,i,r){const n="reset"===r,o=this.chart,s=o.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,h=a.yCenter,c=a.getIndexAngle(0)-.5*tt;let u,f=c;const d=360/this.countVisibleElements();for(u=0;u<e;++u)f+=this._computeAngle(u,r,d);for(u=e;u<e+i;u++){const e=t[u];let i=f,p=f+this._computeAngle(u,r,d),g=o.getDataVisibility(u)?a.getDistanceFromCenterForValue(this.getParsed(u).r):0;f=p,n&&(s.animateScale&&(g=0),s.animateRotate&&(i=p=c));const m={x:l,y:h,innerRadius:0,outerRadius:g,startAngle:i,endAngle:p,options:this.resolveDataElementOptions(u,e.active?"active":r)};this.updateElement(e,u,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++})),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?pt(this.resolveDataElementOptions(t,e).angle||i):0}}var qi=Object.freeze({__proto__:null,BarController:class extends Li{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,r){return Ni(t,e,i,r)}parseArrayData(t,e,i,r){return Ni(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:n,vScale:o}=t,{xAxisKey:s="x",yAxisKey:a="y"}=this._parsing,l="x"===n.axis?s:a,h="x"===o.axis?s:a,c=[];let u,f,d,p;for(u=i,f=i+r;u<f;++u)p=e[u],d={},d[n.axis]=n.parse(Q(p,l),u),c.push(Bi(Q(p,h),d,o,u));return c}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const n=i._custom;n&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,n=this.getParsed(t),o=n._custom,s=ji(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(n[r.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const n="reset"===r,{index:o,_cachedMeta:{vScale:s}}=this,a=s.getBasePixel(),l=s.isHorizontal(),h=this._getRuler(),{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,r);for(let f=e;f<e+i;f++){const e=this.getParsed(f),i=n||I(e[s.axis])?{base:a,head:a}:this._calculateBarValuePixels(f),d=this._calculateBarIndexPixels(f,h),p=(e._stacks||{})[s.axis],g={horizontal:l,base:i.base,enableBorderRadius:!p||ji(e._custom)||o===p._top||o===p._bottom,x:l?i.head:d.center,y:l?d.center:i.head,height:l?d.size:Math.abs(i.size),width:l?Math.abs(i.size):d.size};u&&(g.options=c||this.resolveDataElementOptions(f,t[f].active?"active":r));const m=g.options||t[f].options;zi(g,m,p,o),Ui(g,m,h.ratio),this.updateElement(t[f],f,g,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),n=i.options.stacked,o=[],s=t=>{const i=t.controller.getParsed(e),r=i&&i[t.vScale.axis];if(I(r)||isNaN(r))return!0};for(const i of r)if((void 0===e||!s(i))&&((!1===n||-1===o.indexOf(i.stack)||void 0===n&&void 0===i.stack)&&o.push(i.stack),i.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const r=this._getStacks(t,i),n=void 0!==e?r.indexOf(e):-1;return-1===n?r.length-1:n}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let n,o;for(n=0,o=e.data.length;n<o;++n)r.push(i.getPixelForValue(this.getParsed(n)[i.axis],n));const s=t.barThickness;return{min:s||Di(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:n,minBarLength:o}}=this,s=n||0,a=this.getParsed(t),l=a._custom,h=ji(l);let c,u,f=a[e.axis],d=0,p=i?this.applyStack(e,a,i):f;p!==f&&(d=p-f,p=f),h&&(f=l.barStart,p=l.barEnd-l.barStart,0!==f&&ht(f)!==ht(l.barEnd)&&(d=0),d+=f);const g=I(n)||h?d:n;let m=e.getPixelForValue(g);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(d+p):m,u=c-m,Math.abs(u)<o){u=function(t,e,i){return 0!==t?ht(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(u,e,s)*o,f===s&&(m-=u/2);const t=e.getPixelForDecimal(0),n=e.getPixelForDecimal(1),l=Math.min(t,n),d=Math.max(t,n);m=Math.max(Math.min(m,d),l),c=m+u,i&&!h&&(a._stacks[e.axis]._visualValues[r]=e.getValueForPixel(c)-e.getValueForPixel(m))}if(m===e.getPixelForValue(s)){const t=ht(u)*e.getLineWidthForValue(s)/2;m+=t,u-=t}return{size:u,base:m,head:c,center:c+u/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,n=r.skipNull,o=N(r.maxBarThickness,1/0);let s,a;if(e.grouped){const i=n?this._getStackCount(t):e.stackCount,l="flex"===r.barThickness?function(t,e,i,r){const n=e.pixels,o=n[t];let s=t>0?n[t-1]:null,a=t<n.length-1?n[t+1]:null;const l=i.categoryPercentage;null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s);const h=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/r,ratio:i.barPercentage,start:h}}(t,e,r,i):function(t,e,i,r){const n=i.barThickness;let o,s;return I(n)?(o=e.min*i.categoryPercentage,s=i.barPercentage):(o=n*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[t]-o/2}}(t,e,r,i),h=this._getStackIndex(this.index,this._cachedMeta.stack,n?t:void 0);s=l.start+l.chunk*h+l.chunk/2,a=Math.min(o,l.chunk*l.ratio)}else s=i.getPixelForValue(this.getParsed(t)[i.axis],t),a=Math.min(o,e.min*e.ratio);return{base:s-a/2,head:s+a/2,center:s,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let n=0;for(;n<r;++n)null!==this.getParsed(n)[e.axis]&&i[n].draw(this._ctx)}},BubbleController:class extends Li{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){const n=super.parsePrimitiveData(t,e,i,r);for(let t=0;t<n.length;t++)n[t]._custom=this.resolveDataElementOptions(t+i).radius;return n}parseArrayData(t,e,i,r){const n=super.parseArrayData(t,e,i,r);for(let t=0;t<n.length;t++){const r=e[i+t];n[t]._custom=N(r[2],this.resolveDataElementOptions(t+i).radius)}return n}parseObjectData(t,e,i,r){const n=super.parseObjectData(t,e,i,r);for(let t=0;t<n.length;t++){const r=e[i+t];n[t]._custom=N(r&&r.r&&+r.r,this.resolveDataElementOptions(t+i).radius)}return n}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:n}=e,o=this.getParsed(t),s=r.getLabelForValue(o.x),a=n.getLabelForValue(o.y),l=o._custom;return{label:i[t]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){const n="reset"===r,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,r),h=o.axis,c=s.axis;for(let u=e;u<e+i;u++){const e=t[u],i=!n&&this.getParsed(u),f={},d=f[h]=n?o.getPixelForDecimal(.5):o.getPixelForValue(i[h]),p=f[c]=n?s.getBasePixel():s.getPixelForValue(i[c]);f.skip=isNaN(d)||isNaN(p),l&&(f.options=a||this.resolveDataElementOptions(u,e.active?"active":r),n&&(f.options.radius=0)),this.updateElement(e,u,f,r)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const n=r.radius;return"active"!==e&&(r.radius=0),r.radius+=N(i&&i._custom,n),r}},DoughnutController:Wi,LineController:class extends Li{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:n}=e,o=this.chart._animationsDisabled;let{start:s,count:a}=Lt(e,r,o);this._drawStart=s,this._drawCount=a,Dt(e)&&(s=0,a=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!n._decimated,i.points=r;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},t),this.updateElements(r,s,a,t)}updateElements(t,e,i,r){const n="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:h,includeOptions:c}=this._getSharedOptions(e,r),u=o.axis,f=s.axis,{spanGaps:d,segment:p}=this.options,g=ft(d)?d:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||n||"none"===r,b=e+i,y=t.length;let v=e>0&&this.getParsed(e-1);for(let i=0;i<y;++i){const d=t[i],y=m?d:{};if(i<e||i>=b){y.skip=!0;continue}const _=this.getParsed(i),w=I(_[f]),x=y[u]=o.getPixelForValue(_[u],i),k=y[f]=n||w?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,_,a):_[f],i);y.skip=isNaN(x)||isNaN(k)||w,y.stop=i>0&&Math.abs(_[u]-v[u])>g,p&&(y.parsed=_,y.raw=l.data[i]),c&&(y.options=h||this.resolveDataElementOptions(i,d.active?"active":r)),m||this.updateElement(d,i,y,r),v=_}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const n=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,n,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends Wi{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Hi,RadarController:class extends Li{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return Fe.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],n=e.iScale.getLabels();if(i.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:n.length===r.length,options:e};this.updateElement(i,void 0,o,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const n=this._cachedMeta.rScale,o="reset"===r;for(let s=e;s<e+i;s++){const e=t[s],i=this.resolveDataElementOptions(s,e.active?"active":r),a=n.getPointPositionForValue(s,this.getParsed(s).r),l=o?n.xCenter:a.x,h=o?n.yCenter:a.y,c={x:l,y:h,angle:a.angle,skip:isNaN(l)||isNaN(h),options:i};this.updateElement(e,s,c,r)}}},ScatterController:class extends Li{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:n}=e,o=this.getParsed(t),s=r.getLabelForValue(o.x),a=n.getLabelForValue(o.y);return{label:i[t]||"",value:"("+s+", "+a+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled;let{start:n,count:o}=Lt(e,i,r);if(this._drawStart=n,this._drawCount=o,Dt(e)&&(n=0,o=i.length),this.options.showLine){const{dataset:n,_dataset:o}=e;n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const s=this.resolveDatasetElementOptions(t);s.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:s},t)}this.updateElements(i,n,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const n="reset"===r,{iScale:o,vScale:s,_stacked:a,_dataset:l}=this._cachedMeta,h=this.resolveDataElementOptions(e,r),c=this.getSharedOptions(h),u=this.includeOptions(r,c),f=o.axis,d=s.axis,{spanGaps:p,segment:g}=this.options,m=ft(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||n||"none"===r;let y=e>0&&this.getParsed(e-1);for(let h=e;h<e+i;++h){const e=t[h],i=this.getParsed(h),p=b?e:{},v=I(i[d]),_=p[f]=o.getPixelForValue(i[f],h),w=p[d]=n||v?s.getBasePixel():s.getPixelForValue(a?this.applyStack(s,i,a):i[d],h);p.skip=isNaN(_)||isNaN(w)||v,p.stop=h>0&&Math.abs(i[f]-y[f])>m,g&&(p.parsed=i,p.raw=l.data[h]),u&&(p.options=c||this.resolveDataElementOptions(h,e.active?"active":r)),b||this.updateElement(e,h,p,r),y=i}this.updateSharedOptions(c,r,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;const n=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,n,o)/2}}});function $i(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ki{static override(t){Object.assign(Ki.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return $i()}parse(){return $i()}format(){return $i()}add(){return $i()}diff(){return $i()}startOf(){return $i()}endOf(){return $i()}}var Yi=Ki;function Qi(t,e,i,r){const{controller:n,data:o,_sorted:s}=t,a=n._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&s&&o.length){const t=a._reversePixels?Et:Ct;if(!r)return t(o,e,i);if(n._sharedOptions){const r=o[0],n="function"==typeof r.getRange&&r.getRange(e);if(n){const r=t(o,e,i-n),s=t(o,e,i+n);return{lo:r.lo,hi:s.hi}}}}return{lo:0,hi:o.length-1}}function Xi(t,e,i,r,n){const o=t.getSortedVisibleDatasetMetas(),s=i[e];for(let t=0,i=o.length;t<i;++t){const{index:i,data:a}=o[t],{lo:l,hi:h}=Qi(o[t],e,s,n);for(let t=l;t<=h;++t){const e=a[t];e.skip||r(e,i,t)}}}function Gi(t,e,i,r,n){const o=[];return n||t.isPointInArea(e)?(Xi(t,i,e,(function(i,s,a){(n||ae(i,t.chartArea,0))&&i.inRange(e.x,e.y,r)&&o.push({element:i,datasetIndex:s,index:a})}),!0),o):o}function Zi(t,e,i,r,n,o){return o||t.isPointInArea(e)?"r"!==i||r?function(t,e,i,r,n,o){let s=[];const a=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,r){const n=e?Math.abs(t.x-r.x):0,o=i?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(i);let l=Number.POSITIVE_INFINITY;return Xi(t,i,e,(function(i,h,c){const u=i.inRange(e.x,e.y,n);if(r&&!u)return;const f=i.getCenterPoint(n);if(!o&&!t.isPointInArea(f)&&!u)return;const d=a(e,f);d<l?(s=[{element:i,datasetIndex:h,index:c}],l=d):d===l&&s.push({element:i,datasetIndex:h,index:c})})),s}(t,e,i,r,n,o):function(t,e,i,r){let n=[];return Xi(t,i,e,(function(t,i,o){const{startAngle:s,endAngle:a}=t.getProps(["startAngle","endAngle"],r),{angle:l}=bt(t,{x:e.x,y:e.y});wt(l,s,a)&&n.push({element:t,datasetIndex:i,index:o})})),n}(t,e,i,n):[]}function Ji(t,e,i,r,n){const o=[],s="x"===i?"inXRange":"inYRange";let a=!1;return Xi(t,i,e,((t,r,l)=>{t[s](e[i],n)&&(o.push({element:t,datasetIndex:r,index:l}),a=a||t.inRange(e.x,e.y,n))})),r&&!a?[]:o}var tr={evaluateInteractionItems:Xi,modes:{index(t,e,i,r){const n=ti(e,t),o=i.axis||"x",s=i.includeInvisible||!1,a=i.intersect?Gi(t,n,o,r,s):Zi(t,n,o,!1,r,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,i,r){const n=ti(e,t),o=i.axis||"xy",s=i.includeInvisible||!1;let a=i.intersect?Gi(t,n,o,r,s):Zi(t,n,o,!1,r,s);if(a.length>0){const e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point:(t,e,i,r)=>Gi(t,ti(e,t),i.axis||"xy",r,i.includeInvisible||!1),nearest(t,e,i,r){const n=ti(e,t),o=i.axis||"xy",s=i.includeInvisible||!1;return Zi(t,n,o,i.intersect,r,s)},x:(t,e,i,r)=>Ji(t,ti(e,t),"x",i.intersect,r),y:(t,e,i,r)=>Ji(t,ti(e,t),"y",i.intersect,r)}};const er=["left","top","right","bottom"];function ir(t,e){return t.filter((t=>t.pos===e))}function rr(t,e){return t.filter((t=>-1===er.indexOf(t.pos)&&t.box.axis===e))}function nr(t,e){return t.sort(((t,i)=>{const r=e?i:t,n=e?t:i;return r.weight===n.weight?r.index-n.index:r.weight-n.weight}))}function or(t,e,i,r){return Math.max(t[i],e[i])+Math.max(t[r],e[r])}function sr(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ar(t,e,i,r){const{pos:n,box:o}=i,s=t.maxPadding;if(!L(n)){i.size&&(t[n]-=i.size);const e=r[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?o.height:o.width),i.size=e.size/e.count,t[n]+=i.size}o.getPadding&&sr(s,o.getPadding());const a=Math.max(0,e.outerWidth-or(s,t,"left","right")),l=Math.max(0,e.outerHeight-or(s,t,"top","bottom")),h=a!==t.w,c=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function lr(t,e){const i=e.maxPadding;return function(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{r[t]=Math.max(e[t],i[t])})),r}(t?["left","right"]:["top","bottom"])}function hr(t,e,i,r){const n=[];let o,s,a,l,h,c;for(o=0,s=t.length,h=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,lr(a.horizontal,e));const{same:s,other:u}=ar(e,i,a,r);h|=s&&n.length,c=c||u,l.fullSize||n.push(a)}return h&&hr(n,e,i,r)||c}function cr(t,e,i,r,n){t.top=i,t.left=e,t.right=e+r,t.bottom=i+n,t.width=r,t.height=n}function ur(t,e,i,r){const n=i.padding;let{x:o,y:s}=e;for(const a of t){const t=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/l.weight||1;if(a.horizontal){const r=e.w*h,o=l.size||t.height;G(l.start)&&(s=l.start),t.fullSize?cr(t,n.left,s,i.outerWidth-n.right-n.left,o):cr(t,e.left+l.placed,s,r,o),l.start=s,l.placed+=r,s=t.bottom}else{const r=e.h*h,s=l.size||t.width;G(l.start)&&(o=l.start),t.fullSize?cr(t,o,n.top,s,i.outerHeight-n.bottom-n.top):cr(t,o,e.top+l.placed,s,r),l.start=o,l.placed+=r,o=t.right}}e.x=o,e.y=s}var fr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,r){if(!t)return;const n=ke(t.options.layout.padding),o=Math.max(e-n.width,0),s=Math.max(i-n.height,0),a=function(t){const e=function(t){const e=[];let i,r,n,o,s,a;for(i=0,r=(t||[]).length;i<r;++i)n=t[i],({position:o,options:{stack:s,stackWeight:a=1}}=n),e.push({index:i,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:s&&o+s,stackWeight:a});return e}(t),i=nr(e.filter((t=>t.box.fullSize)),!0),r=nr(ir(e,"left"),!0),n=nr(ir(e,"right")),o=nr(ir(e,"top"),!0),s=nr(ir(e,"bottom")),a=rr(e,"x"),l=rr(e,"y");return{fullSize:i,leftAndTop:r.concat(o),rightAndBottom:n.concat(l).concat(s).concat(a),chartArea:ir(e,"chartArea"),vertical:r.concat(n).concat(l),horizontal:o.concat(s).concat(a)}}(t.boxes),l=a.vertical,h=a.horizontal;F(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/c,hBoxMaxHeight:s/2}),f=Object.assign({},n);sr(f,ke(r));const d=Object.assign({maxPadding:f,w:o,h:s,x:n.left,y:n.top},n),p=function(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:r,stackWeight:n}=i;if(!t||!er.includes(r))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:n}=e;let o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];const{fullSize:s}=a.box,l=i[a.stack],h=l&&a.stackWeight/l.weight;a.horizontal?(a.width=h?h*r:s&&e.availableWidth,a.height=n):(a.width=r,a.height=h?h*n:s&&e.availableHeight)}return i}(l.concat(h),u);hr(a.fullSize,d,u,p),hr(l,d,u,p),hr(h,d,u,p)&&hr(l,d,u,p),function(t){const e=t.maxPadding;function i(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(d),ur(a.leftAndTop,d,u,p),d.x+=d.w,d.y+=d.h,ur(a.rightAndBottom,d,u,p),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},F(a.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})}))}};class dr{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class pr extends dr{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const gr="$chartjs",mr={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},br=t=>null===t||""===t,yr=!!ri&&{passive:!0};function vr(t,e,i){t.canvas.removeEventListener(e,i,yr)}function _r(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function wr(t,e,i){const r=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||_r(i.addedNodes,r),e=e&&!_r(i.removedNodes,r);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}function xr(t,e,i){const r=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||_r(i.removedNodes,r),e=e&&!_r(i.addedNodes,r);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}const kr=new Map;let Sr=0;function Cr(){const t=window.devicePixelRatio;t!==Sr&&(Sr=t,kr.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function Er(t,e,i){const r=t.canvas,n=r&&Ye(r);if(!n)return;const o=Ot(((t,e)=>{const r=n.clientWidth;i(t,e),r<n.clientWidth&&i()}),window),s=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,r=e.contentRect.height;0===i&&0===r||o(i,r)}));return s.observe(n),function(t,e){kr.size||window.addEventListener("resize",Cr),kr.set(t,e)}(t,o),s}function Mr(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){kr.delete(t),kr.size||window.removeEventListener("resize",Cr)}(t)}function Tr(t,e,i){const r=t.canvas,n=Ot((e=>{null!==t.ctx&&i(function(t,e){const i=mr[t.type]||t.type,{x:r,y:n}=ti(t,e);return{type:i,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==n?n:null}}(e,t))}),t);return function(t,e,i){t.addEventListener(e,i,yr)}(r,e,n),n}class Ar extends dr{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,r=t.getAttribute("height"),n=t.getAttribute("width");if(t[gr]={initial:{height:r,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",br(n)){const e=ni(t,"width");void 0!==e&&(t.width=e)}if(br(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=ni(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[gr])return!1;const i=e[gr].initial;["height","width"].forEach((t=>{const r=i[t];I(r)?e.removeAttribute(t):e.setAttribute(t,r)}));const r=i.style||{};return Object.keys(r).forEach((t=>{e.style[t]=r[t]})),e.width=e.width,delete e[gr],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),n={attach:wr,detach:xr,resize:Er}[e]||Tr;r[e]=n(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];r&&(({attach:Mr,detach:Mr,resize:Mr}[e]||vr)(t,e,r),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return function(t,e,i,r){const n=Xe(t),o=Ze(n,"margin"),s=Qe(n.maxWidth,t,"clientWidth")||rt,a=Qe(n.maxHeight,t,"clientHeight")||rt,l=function(t,e,i){let r,n;if(void 0===e||void 0===i){const o=Ye(t);if(o){const t=o.getBoundingClientRect(),s=Xe(o),a=Ze(s,"border","width"),l=Ze(s,"padding");e=t.width-l.width-a.width,i=t.height-l.height-a.height,r=Qe(s.maxWidth,o,"clientWidth"),n=Qe(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:r||rt,maxHeight:n||rt}}(t,e,i);let{width:h,height:c}=l;if("content-box"===n.boxSizing){const t=Ze(n,"border","width"),e=Ze(n,"padding");h-=e.width+t.width,c-=e.height+t.height}return h=Math.max(0,h-o.width),c=Math.max(0,r?h/r:c-o.height),h=ei(Math.min(h,s,l.maxWidth)),c=ei(Math.min(c,a,l.maxHeight)),h&&!c&&(c=ei(h/2)),(void 0!==e||void 0!==i)&&r&&l.height&&c>l.height&&(c=l.height,h=ei(Math.floor(c*r))),{width:h,height:c}}(t,e,i,r)}isAttached(t){const e=Ye(t);return!(!e||!e.isConnected)}}class Pr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ft(this.x)&&ft(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach((t=>{r[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),r}}function Or(t,e,i,r,n){const o=N(r,0),s=Math.min(N(n,t.length),t.length);let a,l,h,c=0;for(i=Math.ceil(i),n&&(a=n-r,i=a/Math.floor(a/i)),h=o;h<0;)c++,h=Math.round(o+c*i);for(l=Math.max(o,0);l<s;l++)l===h&&(e.push(t[l]),c++,h=Math.round(o+c*i))}const Ir=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,Rr=(t,e)=>Math.min(e||t,t);function Lr(t,e){const i=[],r=t.length/e,n=t.length;let o=0;for(;o<n;o+=r)i.push(t[Math.floor(o)]);return i}function Dr(t,e,i){const r=t.ticks.length,n=Math.min(e,r-1),o=t._startPixel,s=t._endPixel,a=1e-6;let l,h=t.getPixelForTick(n);if(!(i&&(l=1===r?Math.max(h-o,s-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(n-1))/2,h+=n<e?l:-l,h<o-a||h>s+a)))return h}function Br(t){return t.drawTicks?t.tickLength:0}function Nr(t,e){if(!t.display)return 0;const i=Se(t.font,e),r=ke(t.padding);return(R(t.text)?t.text.length:1)*i.lineHeight+r.height}function jr(t,e,i){let r=It(t);return(i&&"right"!==e||!i&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class zr extends Pr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=B(t,Number.POSITIVE_INFINITY),e=B(e,Number.NEGATIVE_INFINITY),i=B(i,Number.POSITIVE_INFINITY),r=B(r,Number.NEGATIVE_INFINITY),{min:B(t,i),max:B(e,r),minDefined:D(t),maxDefined:D(e)}}getMinMax(t){let e,{min:i,max:r,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:i,max:r};const s=this.getMatchingVisibleMetas();for(let a=0,l=s.length;a<l;++a)e=s[a].controller.getMinMax(this,t),n||(i=Math.min(i,e.min)),o||(r=Math.max(r,e.max));return i=o&&i>r?r:i,r=n&&i>r?i:r,{min:B(i,B(r,i)),max:B(r,B(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){z(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:n,ticks:o}=this.options,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){const{min:r,max:n}=t,o=j(e,(n-r)/2),s=(t,e)=>i&&0===t?0:t+e;return{min:s(r,-Math.abs(o)),max:s(n,o)}}(this,n,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=s<this.ticks.length;this._convertTicksToLabels(a?Lr(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function(t,e){const i=t.options.ticks,r=function(t){const e=t.options.offset,i=t._tickSize(),r=t._length/i+(e?0:1),n=t._maxLength/i;return Math.floor(Math.min(r,n))}(t),n=Math.min(i.maxTicksLimit||r,r),o=i.major.enabled?function(t){const e=[];let i,r;for(i=0,r=t.length;i<r;i++)t[i].major&&e.push(i);return e}(e):[],s=o.length,a=o[0],l=o[s-1],h=[];if(s>n)return function(t,e,i,r){let n,o=0,s=i[0];for(r=Math.ceil(r),n=0;n<t.length;n++)n===s&&(e.push(t[n]),o++,s=i[o*r])}(e,h,o,s/n),h;const c=function(t,e,i){const r=function(t){const e=t.length;let i,r;if(e<2)return!1;for(r=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==r)return!1;return r}(t),n=e.length/i;if(!r)return Math.max(n,1);const o=function(t){const e=[],i=Math.sqrt(t);let r;for(r=1;r<i;r++)t%r==0&&(e.push(r),e.push(t/r));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}(r);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>n)return e}return Math.max(n,1)}(o,e,n);if(s>0){let t,i;const r=s>1?Math.round((l-a)/(s-1)):null;for(Or(e,h,c,I(r)?0:a-r,a),t=0,i=s-1;t<i;t++)Or(e,h,c,o[t],o[t+1]);return Or(e,h,c,l,I(r)?e.length:l+r),h}return Or(e,h,c),h}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){z(this.options.afterUpdate,[this])}beforeSetDimensions(){z(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){z(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),z(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){z(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,n;for(i=0,r=t.length;i<r;i++)n=t[i],n.label=z(e.callback,[n.value,i,t],this)}afterTickToLabelConversion(){z(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){z(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Rr(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,n=e.maxRotation;let o,s,a,l=r;if(!this._isVisible()||!e.display||r>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const h=this._getLabelSizes(),c=h.widest.width,u=h.highest.height,f=xt(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/i:f/(i-1),c+6>o&&(o=f/(i-(t.offset?.5:1)),s=this.maxHeight-Br(t.grid)-e.padding-Nr(t.title,this.chart.options.font),a=Math.sqrt(c*c+u*u),l=gt(Math.min(Math.asin(xt((h.highest.height+6)/o,-1,1)),Math.asin(xt(s/a,-1,1))-Math.asin(xt(u/a,-1,1)))),l=Math.max(r,Math.min(n,l))),this.labelRotation=l}afterCalculateLabelRotation(){z(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){z(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:n}}=this,o=this._isVisible(),s=this.isHorizontal();if(o){const o=Nr(r,e.options.font);if(s?(t.width=this.maxWidth,t.height=Br(n)+o):(t.height=this.maxHeight,t.width=Br(n)+o),i.display&&this.ticks.length){const{first:e,last:r,widest:n,highest:o}=this._getLabelSizes(),a=2*i.padding,l=pt(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(s){const e=i.mirror?0:c*n.width+h*o.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=i.mirror?0:h*n.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,c,h)}}this._handleMargins(),s?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:n,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,u=0;a?l?(c=r*t.width,u=i*e.height):(c=i*t.height,u=r*e.width):"start"===n?u=e.width:"end"===n?c=t.width:"inner"!==n&&(c=t.width/2,u=e.width/2),this.paddingLeft=Math.max((c-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-h+o)*this.width/(this.width-h),0)}else{let i=e.height/2,r=t.height/2;"start"===n?(i=0,r=t.height):"end"===n&&(i=e.height,r=0),this.paddingTop=i+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){z(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)I(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Lr(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:n}=this,o=[],s=[],a=Math.floor(e/Rr(e,i));let l,h,c,u,f,d,p,g,m,b,y,v=0,_=0;for(l=0;l<e;l+=a){if(u=t[l].label,f=this._resolveTickFontOptions(l),r.font=d=f.string,p=n[d]=n[d]||{data:{},gc:[]},g=f.lineHeight,m=b=0,I(u)||R(u)){if(R(u))for(h=0,c=u.length;h<c;++h)y=u[h],I(y)||R(y)||(m=ee(r,p.data,p.gc,m,y),b+=g)}else m=ee(r,p.data,p.gc,m,u),b=g;o.push(m),s.push(b),v=Math.max(m,v),_=Math.max(b,_)}!function(t,e){F(t,(t=>{const i=t.gc,r=i.length/2;let n;if(r>e){for(n=0;n<r;++n)delete t.data[i[n]];i.splice(0,r)}}))}(n,e);const w=o.indexOf(v),x=s.indexOf(_),k=t=>({width:o[t]||0,height:s[t]||0});return{first:k(0),last:k(e-1),widest:k(w),highest:k(x),widths:o,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return xt(this._alignToPixels?re(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return Ee(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=Ee(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=pt(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),n=this._getLabelSizes(),o=t.autoSkipPadding||0,s=n?n.widest.width+o:0,a=n?n.highest.height+o:0;return this.isHorizontal()?a*i>s*r?s/i:a/r:a*r<s*i?a/i:s/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:n,position:o,border:s}=r,a=n.offset,l=this.isHorizontal(),h=this.ticks.length+(a?1:0),c=Br(n),u=[],f=s.setContext(this.getContext()),d=f.display?f.width:0,p=d/2,g=function(t){return re(i,t,d)};let m,b,y,v,_,w,x,k,S,C,E,M;if("top"===o)m=g(this.bottom),w=this.bottom-c,k=m-p,C=g(t.top)+p,M=t.bottom;else if("bottom"===o)m=g(this.top),C=t.top,M=g(t.bottom)-p,w=m+p,k=this.top+c;else if("left"===o)m=g(this.right),_=this.right-c,x=m-p,S=g(t.left)+p,E=t.right;else if("right"===o)m=g(this.left),S=t.left,E=g(t.right)-p,_=m+p,x=this.left+c;else if("x"===e){if("center"===o)m=g((t.top+t.bottom)/2+.5);else if(L(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}C=t.top,M=t.bottom,w=m+p,k=w+c}else if("y"===e){if("center"===o)m=g((t.left+t.right)/2);else if(L(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}_=m-p,x=_-c,S=t.left,E=t.right}const T=N(r.ticks.maxTicksLimit,h),A=Math.max(1,Math.ceil(h/T));for(b=0;b<h;b+=A){const t=this.getContext(b),e=n.setContext(t),r=s.setContext(t),o=e.lineWidth,h=e.color,c=r.dash||[],f=r.dashOffset,d=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=Dr(this,b,a),void 0!==y&&(v=re(i,y,o),l?_=x=S=E=v:w=k=C=M=v,u.push({tx1:_,ty1:w,tx2:x,ty2:k,x1:S,y1:C,x2:E,y2:M,width:o,color:h,borderDash:c,borderDashOffset:f,tickWidth:d,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=h,this._borderValue=m,u}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:n}=i,o=this.isHorizontal(),s=this.ticks,{align:a,crossAlign:l,padding:h,mirror:c}=n,u=Br(i.grid),f=u+h,d=c?-h:f,p=-pt(this.labelRotation),g=[];let m,b,y,v,_,w,x,k,S,C,E,M,T="middle";if("top"===r)w=this.bottom-d,x=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+d,x=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(u);x=t.textAlign,_=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(u);x=t.textAlign,_=t.x}else if("x"===e){if("center"===r)w=(t.top+t.bottom)/2+f;else if(L(r)){const t=Object.keys(r)[0],e=r[t];w=this.chart.scales[t].getPixelForValue(e)+f}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)_=(t.left+t.right)/2-f;else if(L(r)){const t=Object.keys(r)[0],e=r[t];_=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===a?T="top":"end"===a&&(T="bottom"));const A=this._getLabelSizes();for(m=0,b=s.length;m<b;++m){y=s[m],v=y.label;const t=n.setContext(this.getContext(m));k=this.getPixelForTick(m)+n.labelOffset,S=this._resolveTickFontOptions(m),C=S.lineHeight,E=R(v)?v.length:1;const e=E/2,i=t.color,a=t.textStrokeColor,h=t.textStrokeWidth;let u,f=x;if(o?(_=k,"inner"===x&&(f=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),M="top"===r?"near"===l||0!==p?-E*C+C/2:"center"===l?-A.highest.height/2-e*C+C:-A.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?A.highest.height/2-e*C:A.highest.height-E*C,c&&(M*=-1),0===p||t.showLabelBackdrop||(_+=C/2*Math.sin(p))):(w=k,M=(1-E)*C/2),t.showLabelBackdrop){const e=ke(t.backdropPadding),i=A.heights[m],r=A.widths[m];let n=M-e.top,o=0-e.left;switch(T){case"middle":n-=i/2;break;case"bottom":n-=i}switch(x){case"center":o-=r/2;break;case"right":o-=r}u={left:o,top:n,width:r+e.width,height:i+e.height,color:t.backdropColor}}g.push({label:v,font:S,textOffset:M,options:{rotation:p,color:i,strokeColor:a,strokeWidth:h,textAlign:f,textBaseline:T,translation:[_,w],backdrop:u}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-pt(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:n}}=this.options,o=t+n,s=this._getLabelSizes().widest.width;let a,l;return"left"===e?r?(l=this.right+n,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l=this.left)):"right"===e?r?(l=this.left+n,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:n,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,n,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,o;const s=(t,e,r)=>{r.width&&r.color&&(i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.setLineDash(r.borderDash||[]),i.lineDashOffset=r.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(n=0,o=r.length;n<o;++n){const t=r[n];e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,n=i.setContext(this.getContext()),o=i.display?n.width:0;if(!o)return;const s=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,h,c,u;this.isHorizontal()?(l=re(t,this.left,o)-o/2,h=re(t,this.right,s)+s/2,c=u=a):(c=re(t,this.top,o)-o/2,u=re(t,this.bottom,s)+s/2,l=h=a),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(l,c),e.lineTo(h,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&le(e,i);const r=this.getLabelItems(t);for(const t of r){const i=t.options,r=t.font;pe(e,t.label,0,t.textOffset,r,i)}i&&he(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const n=Se(i.font),o=ke(i.padding),s=i.align;let a=n.lineHeight/2;"bottom"===e||"center"===e||L(e)?(a+=o.bottom,R(i.text)&&(a+=n.lineHeight*(i.text.length-1))):a+=o.top;const{titleX:l,titleY:h,maxWidth:c,rotation:u}=function(t,e,i,r){const{top:n,left:o,bottom:s,right:a,chart:l}=t,{chartArea:h,scales:c}=l;let u,f,d,p=0;const g=s-n,m=a-o;if(t.isHorizontal()){if(f=Rt(r,o,a),L(i)){const t=Object.keys(i)[0],r=i[t];d=c[t].getPixelForValue(r)+g-e}else d="center"===i?(h.bottom+h.top)/2+g-e:Ir(t,i,e);u=a-o}else{if(L(i)){const t=Object.keys(i)[0],r=i[t];f=c[t].getPixelForValue(r)-m+e}else f="center"===i?(h.left+h.right)/2-m+e:Ir(t,i,e);d=Rt(r,s,n),p="left"===i?-ot:ot}return{titleX:f,titleY:d,maxWidth:u,rotation:p}}(this,a,e,s);pe(t,i.text,0,0,n,{color:i.color,maxWidth:c,rotation:u,textAlign:jr(s,e,r),textBaseline:"middle",translation:[l,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=N(t.grid&&t.grid.z,-1),r=N(t.border&&t.border.z,0);return this._isVisible()&&this.draw===zr.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];o[i]!==this.id||t&&o.type!==t||r.push(o)}return r}_resolveTickFontOptions(t){return Se(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Fr{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const r=this.items,n=t.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in r||(r[n]=t,function(t,e,i){const r=q(Object.create(null),[i?te.get(i):{},te.get(e),t.defaults]);te.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const r=i.split("."),n=r.pop(),o=[t].concat(r).join("."),s=e[i].split("."),a=s.pop(),l=s.join(".");te.route(o,n,l,a)}))}(e,t.defaultRoutes),t.descriptors&&te.describe(e,t.descriptors)}(t,o,i),this.override&&te.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in te[r]&&(delete te[r][i],this.override&&delete Qt[i])}}class Vr{constructor(){this.controllers=new Fr(Li,"datasets",!0),this.elements=new Fr(Pr,"elements"),this.plugins=new Fr(Object,"plugins"),this.scales=new Fr(zr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const r=i||this._getRegistryForType(e);i||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):F(e,(e=>{const r=i||this._getRegistryForType(e);this._exec(t,r,e)}))}))}_exec(t,e,i){const r=X(t);z(i["before"+r],[],i),e[t](i),z(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Ur=new Vr;class Wr{constructor(){this._init=[]}notify(t,e,i,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const n=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(n,t,e,i);return"afterDestroy"===e&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(const n of t){const t=n.plugin;if(!1===z(t[i],[e,r,n.options],t)&&r.cancelable)return!1}return!0}invalidate(){I(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=N(i.options&&i.options.plugins,{}),n=function(t){const e={},i=[],r=Object.keys(Ur.plugins.items);for(let t=0;t<r.length;t++)i.push(Ur.getPlugin(r[t]));const n=t.plugins||[];for(let t=0;t<n.length;t++){const r=n[t];-1===i.indexOf(r)&&(i.push(r),e[r.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==r||e?function(t,{plugins:e,localIds:i},r,n){const o=[],s=t.getContext();for(const a of e){const e=a.id,l=Hr(r[e],n);null!==l&&o.push({plugin:a,options:qr(t.config,{plugin:a,local:i[e]},l,s)})}return o}(t,n,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function Hr(t,e){return e||!1!==t?!0===t?{}:t:null}function qr(t,{plugin:e,local:i},r,n){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(r,o);return i&&e.defaults&&s.push(e.defaults),t.createResolver(s,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $r(t,e){const i=te.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function Kr(t){if("x"===t||"y"===t||"r"===t)return t}function Yr(t,...e){if(Kr(t))return t;for(const r of e){const e=r.axis||("top"===(i=r.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&Kr(t[0].toLowerCase());if(e)return e}var i;throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Qr(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function Xr(t){const e=t.options||(t.options={});e.plugins=N(e.plugins,{}),e.scales=function(t,e){const i=Qt[t.type]||{scales:{}},r=e.scales||{},n=$r(t.type,e),o=Object.create(null);return Object.keys(r).forEach((e=>{const s=r[e];if(!L(s))return console.error(`Invalid scale configuration for scale: ${e}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const a=Yr(e,s,function(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(i.length)return Qr(t,"x",i[0])||Qr(t,"y",i[0])}return{}}(e,t),te.scales[s.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,n),h=i.scales||{};o[e]=$(Object.create(null),[{axis:a},s,h[a],h[l]])})),t.data.datasets.forEach((i=>{const n=i.type||t.type,s=i.indexAxis||$r(n,e),a=(Qt[n]||{}).scales||{};Object.keys(a).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,s),n=i[e+"AxisID"]||e;o[n]=o[n]||Object.create(null),$(o[n],[{axis:e},r[n],a[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];$(e,[te.scales[e.type],te.scale])})),o}(t,e)}function Gr(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Zr=new Map,Jr=new Set;function tn(t,e){let i=Zr.get(t);return i||(i=e(),Zr.set(t,i),Jr.add(i)),i}const en=(t,e,i)=>{const r=Q(e,i);void 0!==r&&t.add(r)};class rn{constructor(t){this._config=function(t){return(t=t||{}).data=Gr(t.data),Xr(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Gr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Xr(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return tn(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return tn(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return tn(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return tn(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return r&&!e||(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:n}=this,o=this._cachedScopes(t,i),s=o.get(e);if(s)return s;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>en(a,t,e)))),e.forEach((t=>en(a,r,t))),e.forEach((t=>en(a,Qt[n]||{},t))),e.forEach((t=>en(a,te,t))),e.forEach((t=>en(a,Xt,t)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),Jr.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,Qt[e]||{},te.datasets[e]||{},{type:e},te,Xt]}resolveNamedOptions(t,e,i,r=[""]){const n={$shared:!0},{resolver:o,subPrefixes:s}=nn(this._resolverCache,t,r);let a=o;(function(t,e){const{isScriptable:i,isIndexable:r}=Ae(t);for(const n of e){const e=i(n),o=r(n),s=(o||e)&&t[n];if(e&&(Z(s)||on(s))||o&&R(s))return!0}return!1})(o,e)&&(n.$shared=!1,a=Te(o,i=Z(i)?i():i,this.createResolver(t,i,s)));for(const t of e)n[t]=a[t];return n}createResolver(t,e,i=[""],r){const{resolver:n}=nn(this._resolverCache,t,i);return L(e)?Te(n,e,void 0,r):n}}function nn(t,e,i){let r=t.get(e);r||(r=new Map,t.set(e,r));const n=i.join();let o=r.get(n);return o||(o={resolver:Me(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},r.set(n,o)),o}const on=t=>L(t)&&Object.getOwnPropertyNames(t).reduce(((e,i)=>e||Z(t[i])),!1),sn=["top","bottom","left","right","chartArea"];function an(t,e){return"top"===t||"bottom"===t||-1===sn.indexOf(t)&&"x"===e}function ln(t,e){return function(i,r){return i[t]===r[t]?i[e]-r[e]:i[t]-r[t]}}function hn(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),z(i&&i.onComplete,[t],e)}function cn(t){const e=t.chart,i=e.options.animation;z(i&&i.onProgress,[t],e)}function un(t){return Ke()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const fn={},dn=t=>{const e=un(t);return Object.values(fn).filter((t=>t.canvas===e)).pop()};function pn(t,e,i){const r=Object.keys(t);for(const n of r){const r=+n;if(r>=e){const o=t[n];delete t[n],(i>0||r>e)&&(t[r+i]=o)}}}class gn{static defaults=te;static instances=fn;static overrides=Qt;static registry=Ur;static version="4.3.0";static getChart=dn;static register(...t){Ur.add(...t),mn()}static unregister(...t){Ur.remove(...t),mn()}constructor(t,e){const i=this.config=new rn(e),r=un(t),n=dn(r);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!Ke()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?pr:Ar}(r)),this.platform.updateConfig(i);const s=this.platform.acquireContext(r,o.aspectRatio),a=s&&s.canvas,l=a&&a.height,h=a&&a.width;this.id=O(),this.ctx=s,this.canvas=a,this.width=h,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wr,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let i;return function(...r){return e?(clearTimeout(i),i=setTimeout(t,e,r)):t.apply(this,r),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],fn[this.id]=this,s&&a?(yi.listen(this,"complete",hn),yi.listen(this,"progress",cn),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:n}=this;return I(t)?e&&n?n:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ur}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ii(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ne(this.canvas,this.ctx),this}stop(){return yi.stop(this),this}resize(t,e){yi.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,n),s=i.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ii(this,s,!0)&&(this.notifyPlugins("resize",{size:o}),z(i.onResize,[this,o],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){F(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let n=[];e&&(n=n.concat(Object.keys(e).map((t=>{const i=e[t],r=Yr(t,i),n="r"===r,o="x"===r;return{options:i,dposition:n?"chartArea":o?"bottom":"left",dtype:n?"radialLinear":o?"category":"linear"}})))),F(n,(e=>{const n=e.options,o=n.id,s=Yr(o,n),a=N(n.type,e.dtype);void 0!==n.position&&an(n.position,s)===an(e.dposition)||(n.position=e.dposition),r[o]=!0;let l=null;o in i&&i[o].type===a?l=i[o]:(l=new(Ur.getScale(a))({id:o,type:a,ctx:this.ctx,chart:this}),i[l.id]=l),l.init(n,t)})),F(r,((t,e)=>{t||delete i[e]})),F(i,(t=>{fr.configure(this,t,t.options),fr.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(ln("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const r=e[i];let n=this.getDatasetMeta(i);const o=r.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=o,n.indexAxis=r.indexAxis||$r(o,this.options),n.order=r.order||0,n.index=i,n.label=""+r.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const e=Ur.getController(o),{datasetElementType:r,dataElementType:s}=te.datasets[o];Object.assign(e,{dataElementType:Ur.getElement(s),datasetElementType:r&&Ur.getElement(r)}),n.controller=new e(this,i),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){F(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!r&&-1===n.indexOf(e);e.buildOrUpdateElements(i),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||F(n,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ln("z","_idx"));const{_active:s,_lastEvent:a}=this;a?this._eventHandler(a,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){F(this.scales,(t=>{fr.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);J(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:n}of e)pn(t,r,"_removeElements"===i?-n:n)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),r=i(0);for(let t=1;t<e;t++)if(!J(r,i(t)))return;return Array.from(r).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;fr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],F(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Z(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(yi.has(this)?this.attached&&!yi.running(this)&&yi.start(this):(this.draw(),hn({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,n;for(r=0,n=e.length;r<n;++r){const n=e[r];t&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,r=!i.disabled,n=function(t){const{xScale:e,yScale:i}=t;if(e&&i)return{left:e.left,right:e.right,top:i.top,bottom:i.bottom}}(t)||this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&le(e,{left:!1===i.left?0:n.left-i.left,right:!1===i.right?this.width:n.right+i.right,top:!1===i.top?0:n.top-i.top,bottom:!1===i.bottom?this.height:n.bottom+i.bottom}),t.controller.draw(),r&&he(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ae(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const n=tr.modes[e];return"function"==typeof n?n(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter((t=>t&&t._dataset===e)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Ee(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",n=this.getDatasetMeta(t),o=n.controller._resolveAnimations(void 0,r);G(e)?(n.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(n,{visible:i}),this.update((e=>e.datasetIndex===t?r:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),yi.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ne(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete fn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,r)=>{e.addEventListener(this,i,r),t[i]=r},r=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};F(this.options.events,(t=>i(t,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,r)=>{e.addEventListener(this,i,r),t[i]=r},r=(i,r)=>{t[i]&&(e.removeEventListener(this,i,r),delete t[i])},n=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const s=()=>{r("attach",s),this.attached=!0,this.resize(),i("resize",n),i("detach",o)};o=()=>{this.attached=!1,r("resize",n),this._stop(),this._resize(0,0),i("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){F(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},F(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let n,o,s,a;for("dataset"===e&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+r+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!V(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,i){const r=this.options.hover,n=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=n(e,t),s=i?t:n(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;const n=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(n||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:n}=this,o=e,s=this._getActiveElements(t,r,i,o),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,i,r){return i&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,i,a);i&&(this._lastEvent=null,z(n.onHover,[t,s,this],this),a&&z(n.onClick,[t,s,this],this));const h=!V(s,r);return(h||e)&&(this._active=s,this._updateHoverStyles(s,r,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,r){if("mouseout"===t.type)return[];if(!i)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,r)}}function mn(){return F(gn.instances,(t=>t._plugins.invalidate()))}function bn(t,e,i,r){return{x:i+t*Math.cos(e),y:r+t*Math.sin(e)}}function yn(t,e,i,r,n,o){const{x:s,y:a,startAngle:l,pixelMargin:h,innerRadius:c}=e,u=Math.max(e.outerRadius+r+i-h,0),f=c>0?c+r+i+h:0;let d=0;const p=n-l;if(r){const t=((c>0?c-r:0)+(u>0?u-r:0))/2;d=(p-(0!==t?p*t/(t+r):p))/2}const g=(p-Math.max(.001,p*u-i/tt)/u)/2,m=l+g+d,b=n-g-d,{outerStart:y,outerEnd:v,innerStart:_,innerEnd:w}=function(t,e,i,r){const n=_e(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),o=(i-e)/2,s=Math.min(o,r*e/2),a=t=>{const e=(i-Math.min(o,t))*r/2;return xt(t,0,Math.min(o,e))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:xt(n.innerStart,0,s),innerEnd:xt(n.innerEnd,0,s)}}(e,f,u,b-m),x=u-y,k=u-v,S=m+y/x,C=b-v/k,E=f+_,M=f+w,T=m+_/E,A=b-w/M;if(t.beginPath(),o){const e=(S+C)/2;if(t.arc(s,a,u,S,e),t.arc(s,a,u,e,C),v>0){const e=bn(k,C,s,a);t.arc(e.x,e.y,v,C,b+ot)}const i=bn(M,b,s,a);if(t.lineTo(i.x,i.y),w>0){const e=bn(M,A,s,a);t.arc(e.x,e.y,w,b+ot,A+Math.PI)}const r=(b-w/f+(m+_/f))/2;if(t.arc(s,a,f,b-w/f,r,!0),t.arc(s,a,f,r,m+_/f,!0),_>0){const e=bn(E,T,s,a);t.arc(e.x,e.y,_,T+Math.PI,m-ot)}const n=bn(x,m,s,a);if(t.lineTo(n.x,n.y),y>0){const e=bn(x,S,s,a);t.arc(e.x,e.y,y,m-ot,S)}}else{t.moveTo(s,a);const e=Math.cos(S)*u+s,i=Math.sin(S)*u+a;t.lineTo(e,i);const r=Math.cos(C)*u+s,n=Math.sin(C)*u+a;t.lineTo(r,n)}t.closePath()}function vn(t,e,i=e){t.lineCap=N(i.borderCapStyle,e.borderCapStyle),t.setLineDash(N(i.borderDash,e.borderDash)),t.lineDashOffset=N(i.borderDashOffset,e.borderDashOffset),t.lineJoin=N(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=N(i.borderWidth,e.borderWidth),t.strokeStyle=N(i.borderColor,e.borderColor)}function _n(t,e,i){t.lineTo(i.x,i.y)}function wn(t,e,i={}){const r=t.length,{start:n=0,end:o=r-1}=i,{start:s,end:a}=e,l=Math.max(n,s),h=Math.min(o,a),c=n<s&&o<s||n>a&&o>a;return{count:r,start:l,loop:e.loop,ilen:h<l&&!c?r+h-l:h-l}}function xn(t,e,i,r){const{points:n,options:o}=e,{count:s,start:a,loop:l,ilen:h}=wn(n,i,r),c=function(t){return t.stepped?ce:t.tension||"monotone"===t.cubicInterpolationMode?ue:_n}(o);let u,f,d,{move:p=!0,reverse:g}=r||{};for(u=0;u<=h;++u)f=n[(a+(g?h-u:u))%s],f.skip||(p?(t.moveTo(f.x,f.y),p=!1):c(t,d,f,g,o.stepped),d=f);return l&&(f=n[(a+(g?h:0))%s],c(t,d,f,g,o.stepped)),!!l}function kn(t,e,i,r){const n=e.points,{count:o,start:s,ilen:a}=wn(n,i,r),{move:l=!0,reverse:h}=r||{};let c,u,f,d,p,g,m=0,b=0;const y=t=>(s+(h?a-t:t))%o,v=()=>{d!==p&&(t.lineTo(m,p),t.lineTo(m,d),t.lineTo(m,g))};for(l&&(u=n[y(0)],t.moveTo(u.x,u.y)),c=0;c<=a;++c){if(u=n[y(c)],u.skip)continue;const e=u.x,i=u.y,r=0|e;r===f?(i<d?d=i:i>p&&(p=i),m=(b*m+e)/++b):(v(),t.lineTo(e,i),f=r,b=0,d=p=i),g=i}v()}function Sn(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i?xn:kn}const Cn="function"==typeof Path2D;class En extends Pr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;$e(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const i=t.points,r=t.options.spanGaps,n=i.length;if(!n)return[];const o=!!t._loop,{start:s,end:a}=function(t,e,i,r){let n=0,o=e-1;if(i&&!r)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,i&&(o+=n);o>n&&t[o%e].skip;)o--;return o%=e,{start:n,end:o}}(i,n,o,r);return function(t,e,i,r){return r&&r.setContext&&i?function(t,e,i,r){const n=t._chart.getContext(),o=gi(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=i.length,h=[];let c=o,u=e[0].start,f=u;function d(t,e,r,n){const o=a?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=o;for(;i[e%l].skip;)e+=o;t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:r,style:n}),c=n,u=e%l)}}for(const t of e){u=a?u:t.start;let e,o=i[u%l];for(f=u+1;f<=t.end;f++){const a=i[f%l];e=gi(r.setContext(Ee(n,{type:"segment",p0:o,p1:a,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:s}))),mi(e,c)&&d(u,f-1,t.loop,c),o=a,c=e}u<f-1&&d(u,f-1,t.loop,c)}return h}(t,e,i,r):e}(t,!0===r?[{start:s,end:a,loop:o}]:function(t,e,i,r){const n=t.length,o=[];let s,a=e,l=t[e];for(s=e+1;s<=i;++s){const i=t[s%n];i.skip||i.stop?l.skip||(r=!1,o.push({start:e%n,end:(s-1)%n,loop:r}),e=a=i.stop?s:null):(a=s,l.skip&&(e=s)),l=i}return null!==a&&o.push({start:e%n,end:a%n,loop:r}),o}(i,s,a<s?a+n:a,!!t._fullLoop&&0===s&&a===n-1),i,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],n=this.points,o=pi(this,{property:e,start:r,end:r});if(!o.length)return;const s=[],a=function(t){return t.stepped?si:t.tension||"monotone"===t.cubicInterpolationMode?ai:oi}(i);let l,h;for(l=0,h=o.length;l<h;++l){const{start:h,end:c}=o[l],u=n[h],f=n[c];if(u===f){s.push(u);continue}const d=a(u,f,Math.abs((r-u[e])/(f[e]-u[e])),i.stepped);d[e]=t[e],s.push(d)}return 1===s.length?s[0]:s}pathSegment(t,e,i){return Sn(this)(t,this,e,i)}path(t,e,i){const r=this.segments,n=Sn(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const s of r)o&=n(t,this,s,{start:e,end:e+i-1});return!!o}draw(t,e,i,r){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(t.save(),function(t,e,i,r){Cn&&!e.options.segment?function(t,e,i,r){let n=e._path;n||(n=e._path=new Path2D,e.path(n,i,r)&&n.closePath()),vn(t,e.options),t.stroke(n)}(t,e,i,r):function(t,e,i,r){const{segments:n,options:o}=e,s=Sn(e);for(const a of n)vn(t,o,a.style),t.beginPath(),s(t,e,a,{start:i,end:i+r-1})&&t.closePath(),t.stroke()}(t,e,i,r)}(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Mn(t,e,i,r){const n=t.options,{[i]:o}=t.getProps([i],r);return Math.abs(e-o)<n.radius+n.hitRadius}function Tn(t,e){const{x:i,y:r,base:n,width:o,height:s}=t.getProps(["x","y","base","width","height"],e);let a,l,h,c,u;return t.horizontal?(u=s/2,a=Math.min(i,n),l=Math.max(i,n),h=r-u,c=r+u):(u=o/2,a=i-u,l=i+u,h=Math.min(r,n),c=Math.max(r,n)),{left:a,top:h,right:l,bottom:c}}function An(t,e,i,r){return t?0:xt(e,i,r)}function Pn(t,e,i,r){const n=null===e,o=null===i,s=t&&!(n&&o)&&Tn(t,r);return s&&(n||kt(e,s.left,s.right))&&(o||kt(i,s.top,s.bottom))}function On(t,e){t.rect(e.x,e.y,e.w,e.h)}function In(t,e,i={}){const r=t.x!==i.x?-e:0,n=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-r,s=(t.y+t.h!==i.y+i.h?e:0)-n;return{x:t.x+r,y:t.y+n,w:t.w+o,h:t.h+s,radius:t.radius}}var Rn=Object.freeze({__proto__:null,ArcElement:class extends Pr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:n,distance:o}=bt(r,{x:t,y:e}),{startAngle:s,endAngle:a,innerRadius:l,outerRadius:h,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=(this.options.spacing+this.options.borderWidth)/2,f=N(c,a-s)>=et||wt(n,s,a),d=kt(o,l+u,h+u);return f&&d}getCenterPoint(t){const{x:e,y:i,startAngle:r,endAngle:n,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,h=(r+n)/2,c=(o+s+l+a)/2;return{x:e+Math.cos(h)*c,y:i+Math.sin(h)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,n=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>et?Math.floor(i/et):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const s=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(s)*r,Math.sin(s)*r);const a=r*(1-Math.sin(Math.min(tt,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,r,n){const{fullCircles:o,startAngle:s,circumference:a}=e;let l=e.endAngle;if(o){yn(t,e,i,r,l,n);for(let e=0;e<o;++e)t.fill();isNaN(a)||(l=s+(a%et||et))}yn(t,e,i,r,l,n),t.fill()}(t,this,a,n,o),function(t,e,i,r,n){const{fullCircles:o,startAngle:s,circumference:a,options:l}=e,{borderWidth:h,borderJoinStyle:c,borderDash:u,borderDashOffset:f}=l,d="inner"===l.borderAlign;if(!h)return;t.setLineDash(u||[]),t.lineDashOffset=f,d?(t.lineWidth=2*h,t.lineJoin=c||"round"):(t.lineWidth=h,t.lineJoin=c||"bevel");let p=e.endAngle;if(o){yn(t,e,i,r,p,n);for(let e=0;e<o;++e)t.stroke();isNaN(a)||(p=s+(a%et||et))}d&&function(t,e,i){const{startAngle:r,pixelMargin:n,x:o,y:s,outerRadius:a,innerRadius:l}=e;let h=n/a;t.beginPath(),t.arc(o,s,a,r-h,i+h),l>n?(h=n/l,t.arc(o,s,l,i+h,r-h,!0)):t.arc(o,s,n,i+ot,r-ot),t.closePath(),t.clip()}(t,e,p),o||(yn(t,e,i,r,p,n),t.stroke())}(t,this,a,n,o),t.restore()}},BarElement:class extends Pr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:n,outer:o}=function(t){const e=Tn(t),i=e.right-e.left,r=e.bottom-e.top,n=function(t,e,i){const r=t.options.borderWidth,n=t.borderSkipped,o=we(r);return{t:An(n.top,o.top,0,i),r:An(n.right,o.right,0,e),b:An(n.bottom,o.bottom,0,i),l:An(n.left,o.left,0,e)}}(t,i/2,r/2),o=function(t,e,i){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,o=xe(n),s=Math.min(e,i),a=t.borderSkipped,l=r||L(n);return{topLeft:An(!l||a.top||a.left,o.topLeft,0,s),topRight:An(!l||a.top||a.right,o.topRight,0,s),bottomLeft:An(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:An(!l||a.bottom||a.right,o.bottomRight,0,s)}}(t,i/2,r/2);return{outer:{x:e.left,y:e.top,w:i,h:r,radius:o},inner:{x:e.left+n.l,y:e.top+n.t,w:i-n.l-n.r,h:r-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}(this),s=(a=o.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?ge:On;var a;t.save(),o.w===n.w&&o.h===n.h||(t.beginPath(),s(t,In(o,e,n)),t.clip(),s(t,In(n,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),s(t,In(n,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Pn(this,t,e,i)}inXRange(t,e){return Pn(this,t,null,e)}inYRange(t,e){return Pn(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(e+r)/2:e,y:n?i:(i+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:En,PointElement:class extends Pr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.options,{x:n,y:o}=this.getProps(["x","y"],i);return Math.pow(t-n,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return Mn(this,t,"x",e)}inYRange(t,e){return Mn(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ae(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,oe(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const Ln=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Dn=Ln.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function Bn(t){return Ln[t%Ln.length]}function Nn(t){return Dn[t%Dn.length]}function jn(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var zn={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{data:{datasets:r},options:n}=t.config,{elements:o}=n;if(!i.forceOverride&&(jn(r)||(s=n)&&(s.borderColor||s.backgroundColor)||o&&jn(o)))return;var s;const a=function(t){let e=0;return(i,r)=>{const n=t.getDatasetMeta(r).controller;n instanceof Wi?e=function(t,e){return t.backgroundColor=t.data.map((()=>Bn(e++))),e}(i,e):n instanceof Hi?e=function(t,e){return t.backgroundColor=t.data.map((()=>Nn(e++))),e}(i,e):n&&(e=function(t,e){return t.borderColor=Bn(e),t.backgroundColor=Nn(e),++e}(i,e))}}(t);r.forEach(a)}};function Fn(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Vn(t){t.data.datasets.forEach((t=>{Fn(t)}))}var Un={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void Vn(t);const r=t.width;t.data.datasets.forEach(((e,n)=>{const{_data:o,indexAxis:s}=e,a=t.getDatasetMeta(n),l=o||e.data;if("y"===Ce([s,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const h=t.scales[a.xAxisID];if("linear"!==h.type&&"time"!==h.type)return;if(t.options.parsing)return;let c,{start:u,count:f}=function(t,e){const i=e.length;let r,n=0;const{iScale:o}=t,{min:s,max:a,minDefined:l,maxDefined:h}=o.getUserBounds();return l&&(n=xt(Ct(e,o.axis,s).lo,0,i-1)),r=h?xt(Ct(e,o.axis,a).hi+1,n,i)-n:i-n,{start:n,count:r}}(a,l);if(f<=(i.threshold||4*r))Fn(e);else{switch(I(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":c=function(t,e,i,r,n){const o=n.samples||r;if(o>=i)return t.slice(e,e+i);const s=[],a=(i-2)/(o-2);let l=0;const h=e+i-1;let c,u,f,d,p,g=e;for(s[l++]=t[g],c=0;c<o-2;c++){let r,n=0,o=0;const h=Math.floor((c+1)*a)+1+e,m=Math.min(Math.floor((c+2)*a)+1,i)+e,b=m-h;for(r=h;r<m;r++)n+=t[r].x,o+=t[r].y;n/=b,o/=b;const y=Math.floor(c*a)+1+e,v=Math.min(Math.floor((c+1)*a)+1,i)+e,{x:_,y:w}=t[g];for(f=d=-1,r=y;r<v;r++)d=.5*Math.abs((_-n)*(t[r].y-w)-(_-t[r].x)*(o-w)),d>f&&(f=d,u=t[r],p=r);s[l++]=u,g=p}return s[l++]=t[h],s}(l,u,f,r,i);break;case"min-max":c=function(t,e,i,r){let n,o,s,a,l,h,c,u,f,d,p=0,g=0;const m=[],b=e+i-1,y=t[e].x,v=t[b].x-y;for(n=e;n<e+i;++n){o=t[n],s=(o.x-y)/v*r,a=o.y;const e=0|s;if(e===l)a<f?(f=a,h=n):a>d&&(d=a,c=n),p=(g*p+o.x)/++g;else{const i=n-1;if(!I(h)&&!I(c)){const e=Math.min(h,c),r=Math.max(h,c);e!==u&&e!==i&&m.push({...t[e],x:p}),r!==u&&r!==i&&m.push({...t[r],x:p})}n>0&&i!==u&&m.push(t[i]),m.push(o),l=e,g=0,f=d=a,h=c=u=n}}return m}(l,u,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=c}}))},destroy(t){Vn(t)}};function Wn(t,e,i,r){if(r)return;let n=e[t],o=i[t];return"angle"===t&&(n=_t(n),o=_t(o)),{property:t,start:n,end:o}}function Hn(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function qn(t,e,i,r){return t&&e?r(t[i],e[i]):t?t[i]:e?e[i]:0}function $n(t,e){let i=[],r=!1;return R(t)?(r=!0,i=t):i=function(t,e){const{x:i=null,y:r=null}=t||{},n=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=Hn(t,e,n);const s=n[t],a=n[e];null!==r?(o.push({x:s.x,y:r}),o.push({x:a.x,y:r})):null!==i&&(o.push({x:i,y:s.y}),o.push({x:i,y:a.y}))})),o}(t,e),i.length?new En({points:i,options:{tension:0},_loop:r,_fullLoop:r}):null}function Kn(t){return t&&!1!==t.fill}function Yn(t,e,i){let r=t[e].fill;const n=[e];let o;if(!i)return r;for(;!1!==r&&-1===n.indexOf(r);){if(!D(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;n.push(r),r=o.fill}return!1}function Qn(t,e,i){const r=function(t){const e=t.options,i=e.fill;let r=N(i&&i.target,i);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(t);if(L(r))return!isNaN(r.value)&&r;let n=parseFloat(r);return D(n)&&Math.floor(n)===n?function(t,e,i,r){return"-"!==t&&"+"!==t||(i=e+i),!(i===e||i<0||i>=r)&&i}(r[0],e,n,i):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Xn(t,e,i){const r=[];for(let n=0;n<i.length;n++){const o=i[n],{first:s,last:a,point:l}=Gn(o,e,"x");if(!(!l||s&&a))if(s)r.unshift(l);else if(t.push(l),!a)break}t.push(...r)}function Gn(t,e,i){const r=t.interpolate(e,i);if(!r)return{};const n=r[i],o=t.segments,s=t.points;let a=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],r=s[e.start][i],h=s[e.end][i];if(kt(n,r,h)){a=n===r,l=n===h;break}}return{first:a,last:l,point:r}}class Zn{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:n,radius:o}=this;return e=e||{start:0,end:et},t.arc(r,n,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,n=t.angle;return{x:e+Math.cos(n)*r,y:i+Math.sin(n)*r,angle:n}}}function Jn(t,e,i){const r=function(t){const{chart:e,fill:i,line:r}=t;if(D(i))return function(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:r}=t,n=[],o=r.segments,s=r.points,a=function(t,e){const i=[],r=t.getMatchingVisibleMetas("line");for(let t=0;t<r.length;t++){const n=r[t];if(n.index===e)break;n.hidden||i.unshift(n.dataset)}return i}(e,i);a.push($n({x:null,y:e.bottom},r));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Xn(n,s[t],a)}return new En({points:n,options:{}})}(t);if("shape"===i)return!0;const n=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:i}=t,r=e.options,n=e.getLabels().length,o=r.reverse?e.max:e.min,s=function(t,e,i){let r;return r="start"===t?i:"end"===t?e.options.reverse?e.min:e.max:L(t)?t.value:e.getBaseValue(),r}(i,e,o),a=[];if(r.grid.circular){const t=e.getPointPositionForValue(0,o);return new Zn({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let t=0;t<n;++t)a.push(e.getPointPositionForValue(t,s));return a}(t):function(t){const{scale:e={},fill:i}=t,r=function(t,e){let i=null;return"start"===t?i=e.bottom:"end"===t?i=e.top:L(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e);if(D(r)){const t=e.isHorizontal();return{x:t?r:null,y:t?null:r}}return null}(t)}(t);return n instanceof Zn?n:$n(n,r)}(e),{line:n,scale:o,axis:s}=e,a=n.options,l=a.fill,h=a.backgroundColor,{above:c=h,below:u=h}=l||{};r&&n.points.length&&(le(t,i),function(t,e){const{line:i,target:r,above:n,below:o,area:s,scale:a}=e,l=i._loop?"angle":e.axis;t.save(),"x"===l&&o!==n&&(to(t,r,s.top),eo(t,{line:i,target:r,color:n,scale:a,property:l}),t.restore(),t.save(),to(t,r,s.bottom)),eo(t,{line:i,target:r,color:o,scale:a,property:l}),t.restore()}(t,{line:n,target:r,above:c,below:u,area:i,scale:o,axis:s}),he(t))}function to(t,e,i){const{segments:r,points:n}=e;let o=!0,s=!1;t.beginPath();for(const a of r){const{start:r,end:l}=a,h=n[r],c=n[Hn(r,l,n)];o?(t.moveTo(h.x,h.y),o=!1):(t.lineTo(h.x,i),t.lineTo(h.x,h.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(c.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function eo(t,e){const{line:i,target:r,property:n,color:o,scale:s}=e,a=function(t,e,i){const r=t.segments,n=t.points,o=e.points,s=[];for(const t of r){let{start:r,end:a}=t;a=Hn(r,a,n);const l=Wn(i,n[r],n[a],t.loop);if(!e.segments){s.push({source:t,target:l,start:n[r],end:n[a]});continue}const h=pi(e,l);for(const e of h){const r=Wn(i,o[e.start],o[e.end],e.loop),a=di(t,n,r);for(const t of a)s.push({source:t,target:e,start:{[i]:qn(l,r,"start",Math.max)},end:{[i]:qn(l,r,"end",Math.min)}})}}return s}(i,r,n);for(const{source:e,target:l,start:h,end:c}of a){const{style:{backgroundColor:a=o}={}}=e,u=!0!==r;t.save(),t.fillStyle=a,io(t,s,u&&Wn(n,h,c)),t.beginPath();const f=!!i.pathSegment(t,e);let d;if(u){f?t.closePath():ro(t,r,c,n);const e=!!r.pathSegment(t,l,{move:f,reverse:!0});d=f&&e,d||ro(t,r,h,n)}t.closePath(),t.fill(d?"evenodd":"nonzero"),t.restore()}}function io(t,e,i){const{top:r,bottom:n}=e.chart.chartArea,{property:o,start:s,end:a}=i||{};"x"===o&&(t.beginPath(),t.rect(s,r,a-s,n-r),t.clip())}function ro(t,e,i,r){const n=e.interpolate(i,r);n&&t.lineTo(n.x,n.y)}var no={id:"filler",afterDatasetsUpdate(t,e,i){const r=(t.data.datasets||[]).length,n=[];let o,s,a,l;for(s=0;s<r;++s)o=t.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof En&&(l={visible:t.isDatasetVisible(s),index:s,fill:Qn(a,s,r),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,n.push(l);for(s=0;s<r;++s)l=n[s],l&&!1!==l.fill&&(l.fill=Yn(n,s,i.propagate))},beforeDraw(t,e,i){const r="beforeDraw"===i.drawTime,n=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;i&&(i.line.updateControlPoints(o,i.axis),r&&i.fill&&Jn(t.ctx,i,o))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e){const i=r[e].$filler;Kn(i)&&Jn(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const r=e.meta.$filler;Kn(r)&&"beforeDatasetDraw"===i.drawTime&&Jn(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const oo=(t,e)=>{let{boxHeight:i=e,boxWidth:r=e}=t;return t.usePointStyle&&(i=Math.min(i,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:i,itemHeight:Math.max(e,i)}};class so extends Pr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=z(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,r=Se(i.font),n=r.size,o=this._computeTitleHeight(),{boxWidth:s,itemHeight:a}=oo(i,n);let l,h;e.font=r.string,this.isHorizontal()?(l=this.maxWidth,h=this._fitRows(o,n,s,a)+10):(h=this.maxHeight,l=this._fitCols(o,r,s,a)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:n,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],h=r+s;let c=t;n.textAlign="left",n.textBaseline="middle";let u=-1,f=-h;return this.legendItems.forEach(((t,d)=>{const p=i+e/2+n.measureText(t.text).width;(0===d||l[l.length-1]+p+2*s>o)&&(c+=h,l[l.length-(d>0?0:1)]=0,f+=h,u++),a[d]={left:0,top:f,row:u,width:p,height:r},l[l.length-1]+=p+s})),c}_fitCols(t,e,i,r){const{ctx:n,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],h=o-t;let c=s,u=0,f=0,d=0,p=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:g,itemHeight:m}=function(t,e,i,r,n){const o=function(t,e,i,r){let n=t.text;return n&&"string"!=typeof n&&(n=n.reduce(((t,e)=>t.length>e.length?t:e))),e+i.size/2+r.measureText(n).width}(r,t,e,i),s=function(t,e,i){let r=t;return"string"!=typeof e.text&&(r=ao(e,i)),r}(n,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}(i,e,n,t,r);o>0&&f+m+2*s>h&&(c+=u+s,l.push({width:u,height:f}),d+=u+s,p++,u=f=0),a[o]={left:d,top:f,col:p,width:g,height:m},u=Math.max(u,g),f+=m+s})),c+=u,l.push({width:u,height:f}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:n}}=this,o=li(n,this.left,this.width);if(this.isHorizontal()){let n=0,s=Rt(i,this.left+r,this.right-this.lineWidths[n]);for(const a of e)n!==a.row&&(n=a.row,s=Rt(i,this.left+r,this.right-this.lineWidths[n])),a.top+=this.top+t+r,a.left=o.leftForLtr(o.x(s),a.width),s+=a.width+r}else{let n=0,s=Rt(i,this.top+t+r,this.bottom-this.columnSizes[n].height);for(const a of e)a.col!==n&&(n=a.col,s=Rt(i,this.top+t+r,this.bottom-this.columnSizes[n].height)),a.top=s,a.left+=this.left+r,a.left=o.leftForLtr(o.x(a.left),a.width),s+=a.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;le(t,this),this._draw(),he(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:n,labels:o}=t,s=te.color,a=li(t.rtl,this.left,this.width),l=Se(o.font),{padding:h}=o,c=l.size,u=c/2;let f;this.drawTitle(),r.textAlign=a.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:d,boxHeight:p,itemHeight:g}=oo(o,c),m=this.isHorizontal(),b=this._computeTitleHeight();f=m?{x:Rt(n,this.left+h,this.right-i[0]),y:this.top+h+b,line:0}:{x:this.left+h,y:Rt(n,this.top+b+h,this.bottom-e[0].height),line:0},hi(this.ctx,t.textDirection);const y=g+h;this.legendItems.forEach(((v,_)=>{r.strokeStyle=v.fontColor,r.fillStyle=v.fontColor;const w=r.measureText(v.text).width,x=a.textAlign(v.textAlign||(v.textAlign=o.textAlign)),k=d+u+w;let S=f.x,C=f.y;if(a.setWidth(this.width),m?_>0&&S+k+h>this.right&&(C=f.y+=y,f.line++,S=f.x=Rt(n,this.left+h,this.right-i[f.line])):_>0&&C+y>this.bottom&&(S=f.x=S+e[f.line].width+h,f.line++,C=f.y=Rt(n,this.top+b+h,this.bottom-e[f.line].height)),function(t,e,i){if(isNaN(d)||d<=0||isNaN(p)||p<0)return;r.save();const n=N(i.lineWidth,1);if(r.fillStyle=N(i.fillStyle,s),r.lineCap=N(i.lineCap,"butt"),r.lineDashOffset=N(i.lineDashOffset,0),r.lineJoin=N(i.lineJoin,"miter"),r.lineWidth=n,r.strokeStyle=N(i.strokeStyle,s),r.setLineDash(N(i.lineDash,[])),o.usePointStyle){const s={radius:p*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},l=a.xPlus(t,d/2);se(r,s,l,e+u,o.pointStyleWidth&&d)}else{const o=e+Math.max((c-p)/2,0),s=a.leftForLtr(t,d),l=xe(i.borderRadius);r.beginPath(),Object.values(l).some((t=>0!==t))?ge(r,{x:s,y:o,w:d,h:p,radius:l}):r.rect(s,o,d,p),r.fill(),0!==n&&r.stroke()}r.restore()}(a.x(S),C,v),S=((t,e,i,r)=>t===(r?"left":"right")?i:"center"===t?(e+i)/2:e)(x,S+d+u,m?S+k:this.right,t.rtl),function(t,e,i){pe(r,i.text,t,e+g/2,l,{strikethrough:i.hidden,textAlign:a.textAlign(i.textAlign)})}(a.x(S),C,v),m)f.x+=k+h;else if("string"!=typeof v.text){const t=l.lineHeight;f.y+=ao(v,t)}else f.y+=y})),ci(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Se(e.font),r=ke(e.padding);if(!e.display)return;const n=li(t.rtl,this.left,this.width),o=this.ctx,s=e.position,a=i.size/2,l=r.top+a;let h,c=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),h=this.top+l,c=Rt(t.align,c,this.right-u);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);h=l+Rt(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const f=Rt(s,c,c+u);o.textAlign=n.textAlign(It(s)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,pe(o,e.text,f,h,i)}_computeTitleHeight(){const t=this.options.title,e=Se(t.font),i=ke(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,n;if(kt(t,this.left,this.right)&&kt(e,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(r=n[i],kt(t,r.left,r.left+r.width)&&kt(e,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,s=(n=i,null!==(r=o)&&null!==n&&r.datasetIndex===n.datasetIndex&&r.index===n.index);o&&!s&&z(e.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!s&&z(e.onHover,[t,i,this],this)}else i&&z(e.onClick,[t,i,this],this);var r,n}}function ao(t,e){return e*(t.text?t.text.length+.5:0)}var lo={id:"legend",_element:so,start(t,e,i){const r=t.legend=new so({ctx:t.ctx,options:i,chart:t});fr.configure(t,r,i),fr.addBox(t,r)},stop(t){fr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const r=t.legend;fr.configure(t,r,i),r.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const r=e.datasetIndex,n=i.chart;n.isDatasetVisible(r)?(n.hide(r),e.hidden=!0):(n.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:n,color:o,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(i?0:void 0),h=ke(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ho extends Pr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=R(i.text)?i.text.length:1;this._padding=ke(i.padding);const n=r*Se(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:r,right:n,options:o}=this,s=o.align;let a,l,h,c=0;return this.isHorizontal()?(l=Rt(s,i,n),h=e+t,a=n-i):("left"===o.position?(l=i+t,h=Rt(s,r,e),c=-.5*tt):(l=n-t,h=Rt(s,e,r),c=.5*tt),a=r-e),{titleX:l,titleY:h,maxWidth:a,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Se(e.font),r=i.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:s,rotation:a}=this._drawArgs(r);pe(t,e.text,0,0,i,{color:e.color,maxWidth:s,rotation:a,textAlign:It(e.align),textBaseline:"middle",translation:[n,o]})}}var co={id:"title",_element:ho,start(t,e,i){!function(t,e){const i=new ho({ctx:t.ctx,options:e,chart:t});fr.configure(t,i,e),fr.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;fr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const r=t.titleBlock;fr.configure(t,r,i),r.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const uo=new WeakMap;var fo={id:"subtitle",start(t,e,i){const r=new ho({ctx:t.ctx,options:i,chart:t});fr.configure(t,r,i),fr.addBox(t,r),uo.set(t,r)},stop(t){fr.removeBox(t,uo.get(t)),uo.delete(t)},beforeUpdate(t,e,i){const r=uo.get(t);fr.configure(t,r,i),r.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const po={average(t){if(!t.length)return!1;let e,i,r=0,n=0,o=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();r+=t.x,n+=t.y,++o}}return{x:r/o,y:n/o}},nearest(t,e){if(!t.length)return!1;let i,r,n,o=e.x,s=e.y,a=Number.POSITIVE_INFINITY;for(i=0,r=t.length;i<r;++i){const r=t[i].element;if(r&&r.hasValue()){const t=yt(e,r.getCenterPoint());t<a&&(a=t,n=r)}}if(n){const t=n.tooltipPosition();o=t.x,s=t.y}return{x:o,y:s}}};function go(t,e){return e&&(R(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function mo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function bo(t,e){const{element:i,datasetIndex:r,index:n}=e,o=t.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(n);return{chart:t,label:s,parsed:o.getParsed(n),raw:t.data.datasets[r].data[n],formattedValue:a,dataset:o.getDataset(),dataIndex:n,datasetIndex:r,element:i}}function yo(t,e){const i=t.chart.ctx,{body:r,footer:n,title:o}=t,{boxWidth:s,boxHeight:a}=e,l=Se(e.bodyFont),h=Se(e.titleFont),c=Se(e.footerFont),u=o.length,f=n.length,d=r.length,p=ke(e.padding);let g=p.height,m=0,b=r.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);b+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*h.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b&&(g+=d*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(b-d)*l.lineHeight+(b-1)*e.bodySpacing),f&&(g+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing);let y=0;const v=function(t){m=Math.max(m,i.measureText(t).width+y)};return i.save(),i.font=h.string,F(t.title,v),i.font=l.string,F(t.beforeBody.concat(t.afterBody),v),y=e.displayColors?s+2+e.boxPadding:0,F(r,(t=>{F(t.before,v),F(t.lines,v),F(t.after,v)})),y=0,i.font=c.string,F(t.footer,v),i.restore(),m+=p.width,{width:m,height:g}}function vo(t,e,i,r){const{x:n,width:o}=i,{width:s,chartArea:{left:a,right:l}}=t;let h="center";return"center"===r?h=n<=(a+l)/2?"left":"right":n<=o/2?h="left":n>=s-o/2&&(h="right"),function(t,e,i,r){const{x:n,width:o}=r,s=i.caretSize+i.caretPadding;return"left"===t&&n+o+s>e.width||"right"===t&&n-o-s<0||void 0}(h,t,e,i)&&(h="center"),h}function _o(t,e,i){const r=i.yAlign||e.yAlign||function(t,e){const{y:i,height:r}=e;return i<r/2?"top":i>t.height-r/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||vo(t,e,i,r),yAlign:r}}function wo(t,e,i,r){const{caretSize:n,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:l}=i,h=n+o,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:d}=xe(s);let p=function(t,e){let{x:i,width:r}=t;return"right"===e?i-=r:"center"===e&&(i-=r/2),i}(e,a);const g=function(t,e,i){let{y:r,height:n}=t;return"top"===e?r+=i:r-="bottom"===e?n+i:n/2,r}(e,l,h);return"center"===l?"left"===a?p+=h:"right"===a&&(p-=h):"left"===a?p-=Math.max(c,f)+n:"right"===a&&(p+=Math.max(u,d)+n),{x:xt(p,0,r.width-e.width),y:xt(g,0,r.height-e.height)}}function xo(t,e,i){const r=ke(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function ko(t){return go([],mo(t))}function So(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const Co={beforeTitle:P,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,r=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return i[e.dataIndex]}return""},afterTitle:P,beforeBody:P,beforeLabel:P,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return I(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:P,afterBody:P,beforeFooter:P,footer:P,afterFooter:P};function Eo(t,e,i,r){const n=t[e].call(i,r);return void 0===n?Co[e].call(i,r):n}class Mo extends Pr{static positioners=po;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,n=new xi(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(this,Ee(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(t,e){const{callbacks:i}=e,r=Eo(i,"beforeTitle",this,t),n=Eo(i,"title",this,t),o=Eo(i,"afterTitle",this,t);let s=[];return s=go(s,mo(r)),s=go(s,mo(n)),s=go(s,mo(o)),s}getBeforeBody(t,e){return ko(Eo(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return F(t,(t=>{const e={before:[],lines:[],after:[]},n=So(i,t);go(e.before,mo(Eo(n,"beforeLabel",this,t))),go(e.lines,Eo(n,"label",this,t)),go(e.after,mo(Eo(n,"afterLabel",this,t))),r.push(e)})),r}getAfterBody(t,e){return ko(Eo(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=Eo(i,"beforeFooter",this,t),n=Eo(i,"footer",this,t),o=Eo(i,"afterFooter",this,t);let s=[];return s=go(s,mo(r)),s=go(s,mo(n)),s=go(s,mo(o)),s}_createItems(t){const e=this._active,i=this.chart.data,r=[],n=[],o=[];let s,a,l=[];for(s=0,a=e.length;s<a;++s)l.push(bo(this.chart,e[s]));return t.filter&&(l=l.filter(((e,r,n)=>t.filter(e,r,n,i)))),t.itemSort&&(l=l.sort(((e,r)=>t.itemSort(e,r,i)))),F(l,(e=>{const i=So(t.callbacks,e);r.push(Eo(i,"labelColor",this,e)),n.push(Eo(i,"labelPointStyle",this,e)),o.push(Eo(i,"labelTextColor",this,e))})),this.labelColors=r,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let n,o=[];if(r.length){const t=po[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const e=this._size=yo(this,i),s=Object.assign({},t,e),a=_o(this.chart,i,s),l=wo(i,s,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,n={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const n=this.getCaretPosition(t,i,r);e.lineTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineTo(n.x3,n.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:n}=this,{caretSize:o,cornerRadius:s}=i,{topLeft:a,topRight:l,bottomLeft:h,bottomRight:c}=xe(s),{x:u,y:f}=t,{width:d,height:p}=e;let g,m,b,y,v,_;return"center"===n?(v=f+p/2,"left"===r?(g=u,m=g-o,y=v+o,_=v-o):(g=u+d,m=g+o,y=v-o,_=v+o),b=g):(m="left"===r?u+Math.max(a,h)+o:"right"===r?u+d-Math.max(l,c)-o:this.caretX,"top"===n?(y=f,v=y-o,g=m-o,b=m+o):(y=f+p,v=y+o,g=m+o,b=m-o),_=y),{x1:g,x2:m,x3:b,y1:y,y2:v,y3:_}}drawTitle(t,e,i){const r=this.title,n=r.length;let o,s,a;if(n){const l=li(i.rtl,this.x,this.width);for(t.x=xo(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",o=Se(i.titleFont),s=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,a=0;a<n;++a)e.fillText(r[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s,a+1===n&&(t.y+=i.titleMarginBottom-s)}}_drawColorBox(t,e,i,r,n){const o=this.labelColors[i],s=this.labelPointStyles[i],{boxHeight:a,boxWidth:l}=n,h=Se(n.bodyFont),c=xo(this,"left",n),u=r.x(c),f=a<h.lineHeight?(h.lineHeight-a)/2:0,d=e.y+f;if(n.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},i=r.leftForLtr(u,l)+l/2,h=d+a/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,oe(t,e,i,h),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,oe(t,e,i,h)}else{t.lineWidth=L(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=r.leftForLtr(u,l),i=r.leftForLtr(r.xPlus(u,1),l-2),s=xe(o.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=n.multiKeyBackground,ge(t,{x:e,y:d,w:l,h:a,radius:s}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),ge(t,{x:i,y:d+1,w:l-2,h:a-2,radius:s}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(e,d,l,a),t.strokeRect(e,d,l,a),t.fillStyle=o.backgroundColor,t.fillRect(i,d+1,l-2,a-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:n,bodyAlign:o,displayColors:s,boxHeight:a,boxWidth:l,boxPadding:h}=i,c=Se(i.bodyFont);let u=c.lineHeight,f=0;const d=li(i.rtl,this.x,this.width),p=function(i){e.fillText(i,d.x(t.x+f),t.y+u/2),t.y+=u+n},g=d.textAlign(o);let m,b,y,v,_,w,x;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=xo(this,g,i),e.fillStyle=i.bodyColor,F(this.beforeBody,p),f=s&&"right"!==g?"center"===o?l/2+h:l+2+h:0,v=0,w=r.length;v<w;++v){for(m=r[v],b=this.labelTextColors[v],e.fillStyle=b,F(m.before,p),y=m.lines,s&&y.length&&(this._drawColorBox(e,t,v,d,i),u=Math.max(c.lineHeight,a)),_=0,x=y.length;_<x;++_)p(y[_]),u=c.lineHeight;F(m.after,p)}f=0,u=c.lineHeight,F(this.afterBody,p),t.y-=n}drawFooter(t,e,i){const r=this.footer,n=r.length;let o,s;if(n){const a=li(i.rtl,this.x,this.width);for(t.x=xo(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=a.textAlign(i.footerAlign),e.textBaseline="middle",o=Se(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,s=0;s<n;++s)e.fillText(r[s],a.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:n,yAlign:o}=this,{x:s,y:a}=t,{width:l,height:h}=i,{topLeft:c,topRight:u,bottomLeft:f,bottomRight:d}=xe(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(s+c,a),"top"===o&&this.drawCaret(t,e,i,r),e.lineTo(s+l-u,a),e.quadraticCurveTo(s+l,a,s+l,a+u),"center"===o&&"right"===n&&this.drawCaret(t,e,i,r),e.lineTo(s+l,a+h-d),e.quadraticCurveTo(s+l,a+h,s+l-d,a+h),"bottom"===o&&this.drawCaret(t,e,i,r),e.lineTo(s+f,a+h),e.quadraticCurveTo(s,a+h,s,a+h-f),"center"===o&&"left"===n&&this.drawCaret(t,e,i,r),e.lineTo(s,a+c),e.quadraticCurveTo(s,a,s+c,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,n=i&&i.y;if(r||n){const i=po[t.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=yo(this,t),s=Object.assign({},i,this._size),a=_o(e,t,s),l=wo(t,s,a,e);r._to===l.x&&n._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ke(e.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&s&&(t.save(),t.globalAlpha=i,this.drawBackground(n,t,r,e),hi(t,e.textDirection),n.y+=o.top,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),ci(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),n=!V(i,r),o=this._positionChanged(r,e);(n||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,n=this._active||[],o=this._getActiveElements(t,n,e,i),s=this._positionChanged(o,t),a=e||!V(o,n)||s;return a&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,i,r){const n=this.options;if("mouseout"===t.type)return[];if(!r)return e;const o=this.chart.getElementsAtEventForMode(t,n.mode,n,i);return n.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:r,options:n}=this,o=po[n.position].call(this,t,e);return!1!==o&&(i!==o.x||r!==o.y)}}var To={id:"tooltip",_element:Mo,positioners:po,afterInit(t,e,i){i&&(t.tooltip=new Mo({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Co},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Ao=Object.freeze({__proto__:null,Colors:zn,Decimation:Un,Filler:no,Legend:lo,SubTitle:fo,Title:co,Tooltip:To});function Po(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function Oo(t,e,{horizontal:i,minRotation:r}){const n=pt(r),o=(i?Math.sin(n):Math.cos(n))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}class Io extends zr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return I(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:n}=this;const o=t=>r=e?r:t,s=t=>n=i?n:t;if(t){const t=ht(r),e=ht(n);t<0&&e<0?s(0):t>0&&e>0&&o(0)}if(r===n){let e=0===n?1:Math.abs(.05*n);s(n+e),t||o(r-e)}this.min=r,this.max=n}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r=function(t,e){const i=[],{bounds:r,step:n,min:o,max:s,precision:a,count:l,maxTicks:h,maxDigits:c,includeBounds:u}=t,f=n||1,d=h-1,{min:p,max:g}=e,m=!I(o),b=!I(s),y=!I(l),v=(g-p)/(c+1);let _,w,x,k,S=ut((g-p)/d/f)*f;if(S<1e-14&&!m&&!b)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>d&&(S=ut(k*S/d/f)*f),I(a)||(_=Math.pow(10,a),S=Math.ceil(S*_)/_),"ticks"===r?(w=Math.floor(p/S)*S,x=Math.ceil(g/S)*S):(w=p,x=g),m&&b&&n&&function(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}((s-o)/n,S/1e3)?(k=Math.round(Math.min((s-o)/S,h)),S=(s-o)/k,w=o,x=s):y?(w=m?o:w,x=b?s:x,k=l-1,S=(x-w)/k):(k=(x-w)/S,k=ct(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const C=Math.max(mt(S),mt(w));_=Math.pow(10,I(a)?C:a),w=Math.round(w*_)/_,x=Math.round(x*_)/_;let E=0;for(m&&(u&&w!==o?(i.push({value:o}),w<o&&E++,ct(Math.round((w+E*S)*_)/_,o,Oo(o,v,t))&&E++):w<o&&E++);E<k;++E){const t=Math.round((w+E*S)*_)/_;if(b&&t>s)break;i.push({value:t})}return b&&u&&x!==s?i.length&&ct(i[i.length-1].value,s,Oo(s,v,t))?i[i.length-1].value=s:i.push({value:s}):b&&x!==s||i.push({value:x}),i}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&dt(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return $t(t,this.chart.options.locale,this.options.ticks.format)}}class Ro extends Io{static id="linear";static defaults={ticks:{callback:Yt.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=D(t)?t:0,this.max=D(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=pt(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Lo=t=>Math.floor(lt(t)),Do=(t,e)=>Math.pow(10,Lo(t)+e);function Bo(t){return 1==t/Math.pow(10,Lo(t))}function No(t,e,i){const r=Math.pow(10,i),n=Math.floor(t/r);return Math.ceil(e/r)-n}class jo extends zr{static id="logarithmic";static defaults={ticks:{callback:Yt.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Io.prototype.parse.apply(this,[t,e]);if(0!==i)return D(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=D(t)?Math.max(0,t):null,this.max=D(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!D(this._userMin)&&(this.min=t===Do(this.min,0)?Do(this.min,-1):Do(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const n=e=>i=t?i:e,o=t=>r=e?r:t;i===r&&(i<=0?(n(1),o(10)):(n(Do(i,-1)),o(Do(r,1)))),i<=0&&n(Do(r,-1)),r<=0&&o(Do(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e=function(t,{min:e,max:i}){e=B(t.min,e);const r=[],n=Lo(e);let o=function(t,e){let i=Lo(e-t);for(;No(t,e,i)>10;)i++;for(;No(t,e,i)<10;)i--;return Math.min(i,Lo(t))}(e,i),s=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=n>o?Math.pow(10,n):0,h=Math.round((e-l)*s)/s,c=Math.floor((e-l)/a/10)*a*10;let u=Math.floor((h-c)/Math.pow(10,o)),f=B(t.min,Math.round((l+c+u*Math.pow(10,o))*s)/s);for(;f<i;)r.push({value:f,major:Bo(f),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,s=o>=0?1:s),f=Math.round((l+c+u*Math.pow(10,o))*s)/s;const d=B(t.max,f);return r.push({value:d,major:Bo(d),significand:u}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&dt(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":$t(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=lt(t),this._valueRange=lt(this.max)-lt(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(lt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function zo(t){const e=t.ticks;if(e.display&&t.display){const t=ke(e.backdropPadding);return N(e.font&&e.font.size,te.font.size)+t.height}return 0}function Fo(t,e,i,r,n){return t===r||t===n?{start:e-i/2,end:e+i/2}:t<r||t>n?{start:e-i,end:e}:{start:e,end:e+i}}function Vo(t,e,i,r,n){const o=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/o,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),n.start<e.t?(l=(e.t-n.start)/s,t.t=Math.min(t.t,e.t-l)):n.end>e.b&&(l=(n.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function Uo(t,e,i){const r=t.drawingArea,{extra:n,additionalAngle:o,padding:s,size:a}=i,l=t.getPointPosition(e,r+n+s,o),h=Math.round(gt(_t(l.angle+ot))),c=function(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}(l.y,a.h,h),u=function(t){return 0===t||180===t?"center":t<180?"left":"right"}(h),f=(d=l.x,p=a.w,"right"===(g=u)?d-=p:"center"===g&&(d-=p/2),d);var d,p,g;return{visible:!0,x:l.x,y:c,textAlign:u,left:f,top:c,right:f+a.w,bottom:c+a.h}}function Wo(t,e){if(!e)return!0;const{left:i,top:r,right:n,bottom:o}=t;return!(ae({x:i,y:r},e)||ae({x:i,y:o},e)||ae({x:n,y:r},e)||ae({x:n,y:o},e))}function Ho(t,e,i){const{left:r,top:n,right:o,bottom:s}=i,{backdropColor:a}=e;if(!I(a)){const i=xe(e.borderRadius),l=ke(e.backdropPadding);t.fillStyle=a;const h=r-l.left,c=n-l.top,u=o-r+l.width,f=s-n+l.height;Object.values(i).some((t=>0!==t))?(t.beginPath(),ge(t,{x:h,y:c,w:u,h:f,radius:i}),t.fill()):t.fillRect(h,c,u,f)}}function qo(t,e,i,r){const{ctx:n}=t;if(i)n.arc(t.xCenter,t.yCenter,e,0,et);else{let i=t.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let o=1;o<r;o++)i=t.getPointPosition(o,e),n.lineTo(i.x,i.y)}}class $o extends Io{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Yt.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ke(zo(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=D(t)&&!isNaN(t)?t:0,this.max=D(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/zo(this.options))}generateTickLabels(t){Io.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=z(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),r=[],n=[],o=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?tt/o:0;for(let u=0;u<o;u++){const o=s.setContext(t.getPointLabelContext(u));n[u]=o.padding;const f=t.getPointPosition(u,t.drawingArea+n[u],a),d=Se(o.font),p=(l=t.ctx,h=d,c=R(c=t._pointLabels[u])?c:[c],{w:ie(l,h.string,c),h:c.length*h.lineHeight});r[u]=p;const g=_t(t.getIndexAngle(u)+a),m=Math.round(gt(g));Vo(i,e,g,Fo(m,f.x,p.w,0,180),Fo(m,f.y,p.h,90,270))}var l,h,c;t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const r=[],n=t._pointLabels.length,o=t.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:zo(o)/2,additionalAngle:s?tt/n:0};let h;for(let o=0;o<n;o++){l.padding=i[o],l.size=e[o];const n=Uo(t,o,l);r.push(n),"auto"===a&&(n.visible=Wo(n,h),n.visible&&(h=n))}return r}(t,r,n)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){return _t(t*(et/(this._pointLabels.length||1))+pt(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(I(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(I(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return Ee(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-ot+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:n}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:n}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),qo(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:n}=e,o=this._pointLabels.length;let s,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:r}}=t;for(let n=e-1;n>=0;n--){const e=t._pointLabelItems[n];if(!e.visible)continue;const o=r.setContext(t.getPointLabelContext(n));Ho(i,o,e);const s=Se(o.font),{x:a,y:l,textAlign:h}=e;pe(i,t._pointLabels[n],a,l+s.lineHeight/2,s,{color:o.color,textAlign:h,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach(((t,e)=>{if(0!==e){a=this.getDistanceFromCenterForValue(t.value);const i=this.getContext(e),s=r.setContext(i),l=n.setContext(i);!function(t,e,i,r,n){const o=t.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!r||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(n.dash),o.lineDashOffset=n.dashOffset,o.beginPath(),qo(t,i,s,r),o.closePath(),o.stroke(),o.restore())}(this,s,a,o,l)}})),i.display){for(t.save(),s=o-1;s>=0;s--){const r=i.setContext(this.getPointLabelContext(s)),{color:n,lineWidth:o}=r;o&&n&&(t.lineWidth=o,t.strokeStyle=n,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(s,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let n,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((r,s)=>{if(0===s&&!e.reverse)return;const a=i.setContext(this.getContext(s)),l=Se(a.font);if(n=this.getDistanceFromCenterForValue(this.ticks[s].value),a.showLabelBackdrop){t.font=l.string,o=t.measureText(r.label).width,t.fillStyle=a.backdropColor;const e=ke(a.backdropPadding);t.fillRect(-o/2-e.left,-n-l.size/2-e.top,o+e.width,l.size+e.height)}pe(t,r.label,0,-n,l,{color:a.color})})),t.restore()}drawTitle(){}}const Ko={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yo=Object.keys(Ko);function Qo(t,e){return t-e}function Xo(t,e){if(I(e))return null;const i=t._adapter,{parser:r,round:n,isoWeekday:o}=t._parseOpts;let s=e;return"function"==typeof r&&(s=r(s)),D(s)||(s="string"==typeof r?i.parse(s,r):i.parse(s)),null===s?null:(n&&(s="week"!==n||!ft(o)&&!0!==o?i.startOf(s,n):i.startOf(s,"isoWeek",o)),+s)}function Go(t,e,i,r){const n=Yo.length;for(let o=Yo.indexOf(t);o<n-1;++o){const t=Ko[Yo[o]],n=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(n*t.size))<=r)return Yo[o]}return Yo[n-1]}function Zo(t,e,i){if(i){if(i.length){const{lo:r,hi:n}=St(i,e);t[i[r]>=e?i[r]:i[n]]=!0}}else t[e]=!0}function Jo(t,e,i){const r=[],n={},o=e.length;let s,a;for(s=0;s<o;++s)a=e[s],n[a]=s,r.push({value:a,major:!1});return 0!==o&&i?function(t,e,i,r){const n=t._adapter,o=+n.startOf(e[0].value,r),s=e[e.length-1].value;let a,l;for(a=o;a<=s;a=+n.add(a,1,r))l=i[a],l>=0&&(e[l].major=!0);return e}(t,r,n,i):r}class ts extends zr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new Yi(t.adapters.date);r.init(e),$(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Xo(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:n,minDefined:o,maxDefined:s}=this.getUserBounds();function a(t){o||isNaN(t.min)||(r=Math.min(r,t.min)),s||isNaN(t.max)||(n=Math.max(n,t.max))}o&&s||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),r=D(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),n=D(n)&&!isNaN(n)?n:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,n-1),this.max=Math.max(r+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const n=this.min,o=function(t,e,i){let r=0,n=t.length;for(;r<n&&t[r]<e;)r++;for(;n>r&&t[n-1]>i;)n--;return r>0||n<t.length?t.slice(r,n):t}(r,n,this.max);return this._unit=e.unit||(i.autoSkip?Go(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(t,e,i,r,n){for(let o=Yo.length-1;o>=Yo.indexOf(i);o--){const i=Yo[o];if(Ko[i].common&&t._adapter.diff(n,r,i)>=e-1)return i}return Yo[i?Yo.indexOf(i):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=Yo.indexOf(t)+1,i=Yo.length;e<i;++e)if(Ko[Yo[e]].common)return Yo[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&o.reverse(),Jo(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,i,r=0,n=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),n=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=xt(r,0,o),n=xt(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,n=r.time,o=n.unit||Go(n.minUnit,e,i,this._getLabelCapacity(e)),s=N(r.ticks.stepSize,1),a="week"===o&&n.isoWeekday,l=ft(a)||!0===a,h={};let c,u,f=e;if(l&&(f=+t.startOf(f,"isoWeek",a)),f=+t.startOf(f,l?"day":o),t.diff(i,e,o)>1e5*s)throw new Error(e+" and "+i+" are too far apart with stepSize of "+s+" "+o);const d="data"===r.ticks.source&&this.getDataTimestamps();for(c=f,u=0;c<i;c=+t.add(c,s,o),u++)Zo(h,c,d);return c!==i&&"ticks"!==r.bounds&&1!==u||Zo(h,c,d),Object.keys(h).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,r=this._unit,n=e||i[r];return this._adapter.format(t,n)}_tickFormatFunction(t,e,i,r){const n=this.options,o=n.ticks.callback;if(o)return z(o,[t,e,i],this);const s=n.time.displayFormats,a=this._unit,l=this._majorUnit,h=a&&s[a],c=l&&s[l],u=i[e],f=l&&c&&u&&u.major;return this._adapter.format(t,r||(f?c:h))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=pt(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(r),o=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:i*n+s*o,h:i*o+s*n}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,n=this._tickFormatFunction(t,0,Jo(this,[t],this._majorUnit),r),o=this._getLabelSize(n),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return s>0?s:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)i=i.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(Xo(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return At(t.sort(Qo))}}function es(t,e,i){let r,n,o,s,a=0,l=t.length-1;i?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Ct(t,"pos",e)),({pos:r,time:o}=t[a]),({pos:n,time:s}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Ct(t,"time",e)),({time:r,pos:o}=t[a]),({time:n,pos:s}=t[l]));const h=n-r;return h?o+(s-o)*(e-r)/h:o}var is=Object.freeze({__proto__:null,CategoryScale:class extends zr{static id="category";static defaults={ticks:{callback:Po}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:r}of e)t[i]===r&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(I(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:xt(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:function(t,e,i,r){const n=t.indexOf(e);return-1===n?((t,e,i,r)=>("string"==typeof e?(i=t.push(e)-1,r.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,r):n!==t.lastIndexOf(e)?i:n}(i,t,N(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let n=this.getLabels();n=0===t&&e===n.length-1?n:n.slice(t,e+1),this._valueRange=Math.max(n.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)r.push({value:i});return r}getLabelForValue(t){return Po.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:Ro,LogarithmicScale:jo,RadialLinearScale:$o,TimeScale:ts,TimeSeriesScale:class extends ts{static id="timeseries";static defaults=ts.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=es(e,this.min),this._tableRange=es(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],n=[];let o,s,a,l,h;for(o=0,s=t.length;o<s;++o)l=t[o],l>=e&&l<=i&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,s=r.length;o<s;++o)h=r[o+1],a=r[o-1],l=r[o],Math.round((h+a)/2)!==l&&n.push({time:l,pos:o/(s-1)});return n}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(es(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return es(this._table,i*this._tableRange+this._minPos,!0)}}});const rs=[qi,Rn,Ao,is];gn.register(...rs);const ns=gn;gn.register(Ro);const os=document.getElementById("myChart"),ss=document.getElementById("range-slider");if(os){const as=os.getContext("2d");let ls=[];const hs=new ns(as,{type:"line",data:{labels:[],datasets:[{label:"Live Data",cubicInterpolationMode:"monotone",data:ls,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{animation:{duration:0},scales:{y:{beginAtZero:!0}}}});function cs(){const t=Number(ss.value);ls.push(t),ls.length>10&&ls.shift();const e=(new Date).toLocaleTimeString("en-US");hs.data.labels.push(e),hs.data.labels.length>10&&hs.data.labels.shift(),hs.update()}setInterval(cs,1e3)}},400:(t,e,i)=>{"use strict";var r=i(277),n=i.n(r),o=document.location.hostname;console.log("Try to connect to "+o+":9001");var s="ws://"+o+":9001";let a=n().connect(s);function l(){const t=document.querySelector('input[name="btnradio"]:checked');var e,i;e={speed:h.value,level:t.value},i=JSON.stringify(e),console.log(i),a.publish("fromJs",i)}a.on("connect",(()=>{console.log("Connected to MQTT broker!"),a.publish("Hello","Hello from ASP.NET")}));const h=document.getElementById("range-slider");h&&(h.onmouseup=function(){l()});const c=document.querySelectorAll('input[name="btnradio"]');function u(){l()}c&&c.forEach((t=>{t.addEventListener("change",u)})),console.log("..")}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i(575),i(463),i(400)})();